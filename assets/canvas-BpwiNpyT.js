import{g as Mc,r as f,R as be,j as c,b as z,T as ye,e as xe,f as ve,p as Sc,E as un,o as kc}from"./index-BVLOCPvt.js";import{c as We,ak as hr,al as fr,aa as Bs,am as dt,an as Me,ao as mr,N as Vn,O as zs,Z as jc,T as pr,j as gr,l as Pc,f as yr,af as xr,o as _n,g as Ac,i as vr,A as Nc,ap as Fn,P as Ec,n as ee,k as $i,p as Rc,ah as Dc,q as Ic,r as Vc,F as _c,s as Fc,ag as Lc,t as Oc,w as Bc,C as zc,y as $c,E as Uc,u as jt,e as gt,J as $s,H as br,M as Kc,aq as Hc,ar as Ui,as as dn,at as vn,au as Rt,av as Cr,aw as Gc,ax as Wc,I as yt,ay as Tr,az as kn,aj as Xc,aA as Us,G as Ln,aB as wr,S as Xn,a1 as Ht,L as Yc,aC as Mr,aD as qc,a0 as $e,K as Ve,a3 as Zc,aE as Jc,aF as Qc,aG as Ki,a2 as eu,aH as tu,aI as nu,aJ as su,a9 as iu,ai as ou,aK as ru,aL as au,aM as lu,aN as Dt,aO as cu,aP as Hi,aQ as uu,aR as du,aS as It,aT as hu,aU as fu,aV as mu,aW as pu,aX as gu}from"./canvas-utils-CKx4bvoE.js";import{B as he,c as Sr,u as tn,P as Pt,d as yu,L as Vt}from"./label-D94JmDE6.js";import{a as te,u as Ks,k as hn,K as fn,e as Yn,f as xu}from"./theme-provider-DRfeBKmP.js";import{B as vu}from"./badge-Di01mCtK.js";import{u as bu}from"./databases-qJwIo_L4.js";import{D as Cu}from"./database-type-DzFzzfY6.js";import{f as Tu,e as wu}from"./use-storage-ouvhatIF.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],ms=te("box",Mu);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ku=te("chevron-right",Su);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=[["path",{d:"m9 7-5 5 5 5",key:"j5w590"}],["path",{d:"m15 7 5 5-5 5",key:"1bl6da"}]],Pu=te("chevrons-left-right",ju);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=[["path",{d:"m20 17-5-5 5-5",key:"30x0n2"}],["path",{d:"m4 17 5-5-5-5",key:"16spf4"}]],Nu=te("chevrons-right-left",Au);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=[["path",{d:"M10.1 2.18a9.93 9.93 0 0 1 3.8 0",key:"1qdqn0"}],["path",{d:"M17.6 3.71a9.95 9.95 0 0 1 2.69 2.7",key:"1bq7p6"}],["path",{d:"M21.82 10.1a9.93 9.93 0 0 1 0 3.8",key:"1rlaqf"}],["path",{d:"M20.29 17.6a9.95 9.95 0 0 1-2.7 2.69",key:"1xk03u"}],["path",{d:"M13.9 21.82a9.94 9.94 0 0 1-3.8 0",key:"l7re25"}],["path",{d:"M6.4 20.29a9.95 9.95 0 0 1-2.69-2.7",key:"1v18p6"}],["path",{d:"M2.18 13.9a9.93 9.93 0 0 1 0-3.8",key:"xdo6bj"}],["path",{d:"M3.71 6.4a9.95 9.95 0 0 1 2.7-2.69",key:"1jjmaz"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],Ru=te("circle-dot-dashed",Eu);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ps=te("database",Du);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],qn=te("eye-off",Iu);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Zn=te("eye",Vu);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Fu=te("folder",_u);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],kr=te("funnel",Lu);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Bu=te("grip-vertical",Ou);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]],$u=te("highlighter",zu);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],Ku=te("key-round",Uu);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Gu=te("layers",Hu);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=[["path",{d:"m6 15-4-4 6.75-6.77a7.79 7.79 0 0 1 11 11L13 22l-4-4 6.39-6.36a2.14 2.14 0 0 0-3-3L6 15",key:"1i3lhw"}],["path",{d:"m5 8 4 4",key:"j6kj7e"}],["path",{d:"m12 15 4 4",key:"lnac28"}]],Xu=te("magnet",Wu);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]],qu=te("message-circle-more",Yu);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],jr=te("pencil",Zu);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],Qu=te("redo",Ju);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],td=te("scan",ed);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],Pr=te("square-dot",nd);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}]],Ar=te("square-minus",sd);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]],od=te("table-2",id);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],ad=te("undo",rd);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],Nr=te("workflow",ld);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ud=te("zoom-in",cd);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],hd=te("zoom-out",dd);var fd=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var s,i,r;if(Array.isArray(t)){if(s=t.length,s!=n.length)return!1;for(i=s;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(r=Object.keys(t),s=r.length,s!==Object.keys(n).length)return!1;for(i=s;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,r[i]))return!1;for(i=s;i--!==0;){var o=r[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const _t=Mc(fd);function md(){var e=f.useRef(!0);return e.current?(e.current=!1,!0):e.current}var pd=function(e,t){var n=md();f.useEffect(function(){if(!n)return e()},t)},gd=function(){};function Er(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function Rr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var yd=typeof window<"u",xd=["mousedown","touchstart"],Hs=function(e,t,n){n===void 0&&(n=xd);var s=f.useRef(t);f.useEffect(function(){s.current=t},[t]),f.useEffect(function(){for(var i=function(l){var d=e.current;d&&!d.contains(l.target)&&s.current(l)},r=0,o=n;r<o.length;r++){var a=o[r];Er(document,a,i)}return function(){for(var l=0,d=n;l<d.length;l++){var u=d[l];Rr(document,u,i)}}},[n,e])},vd=yd?window:null,Gi=function(e){return!!e.addEventListener},Wi=function(e){return!!e.on},bd=function(e,t,n,s){n===void 0&&(n=vd),f.useEffect(function(){if(t&&n)return Gi(n)?Er(n,e,t,s):Wi(n)&&n.on(e,t,s),function(){Gi(n)?Rr(n,e,t,s):Wi(n)&&n.off(e,t,s)}},[e,t,n,JSON.stringify(s)])},Cd=function(e){return typeof e=="function"?e:typeof e=="string"?function(t){return t.key===e}:e?function(){return!0}:function(){return!1}},Xi=function(e,t,n,s){t===void 0&&(t=gd),n===void 0&&(n={}),s===void 0&&(s=[e]);var i=n.event,r=i===void 0?"keydown":i,o=n.target,a=n.options,l=f.useMemo(function(){var d=Cd(e),u=function(h){if(d(h))return t(h)};return u},s);bd(r,l,o,a)},Td=function(e){var t=f.useState([!1,null]),n=t[0],s=t[1];return Xi(e,function(i){return s([!0,i])},{event:"keydown"},[n]),Xi(e,function(i){return s([!1,i])},{event:"keyup"},[n]),n},Mt=function(e,t,n,s){s===void 0&&(s=Td);var i=s(e),r=i[0],o=i[1];pd(function(){r&&t&&t(o)},[r])};const gs="left_rel_",ys="right_rel_",bn="target_rel_",wd=(e,t)=>e.field.id===t.field.id&&e.field.name===t.field.name&&e.field.primaryKey===t.field.primaryKey&&e.field.nullable===t.field.nullable&&e.field.comments===t.field.comments&&e.field.unique===t.field.unique&&e.field.type.id===t.field.type.id&&e.field.type.name===t.field.type.name&&e.field.characterMaximumLength===t.field.characterMaximumLength&&e.field.precision===t.field.precision&&e.field.scale===t.field.scale&&e.focused===t.focused&&e.highlighted===t.highlighted&&e.visible===t.visible&&e.isConnectable===t.isConnectable&&e.tableNodeId===t.tableNodeId,Dr=be.memo(({field:e,focused:t,tableNodeId:n,highlighted:s,visible:i,isConnectable:r})=>{var at,Je;const{removeField:o,relationships:a,readonly:l,updateField:d,highlightedCustomType:u}=We(),[h,m]=f.useState(!1),[p,g]=f.useState(e.name),x=be.useRef(null),y=hr(),b=fr(),v=f.useMemo(()=>{var q,L;return b.inProgress&&b.fromNode.id!==n&&(((q=b.fromHandle.id)==null?void 0:q.startsWith(ys))||((L=b.fromHandle.id)==null?void 0:L.startsWith(gs)))},[b.inProgress,(at=b.fromNode)==null?void 0:at.id,(Je=b.fromHandle)==null?void 0:Je.id,n]),C=f.useMemo(()=>{let q=0;for(const L of a)L.targetTableId===n&&L.targetFieldId===e.id&&q++;return q},[a,n,e.id]),T=f.useRef(C);f.useEffect(()=>{if(T.current!==C){const q=setTimeout(()=>{y(n),T.current=C},100);return()=>clearTimeout(q)}},[n,y,C]);const M=f.useCallback(()=>{h&&(p.trim()&&d(n,e.id,{name:p.trim()}),m(!1))},[p,e.id,d,h,n]),k=f.useCallback(()=>{m(!1),g(e.name)},[e.name]);Hs(x,M),Mt("Enter",M),Mt("Escape",k);const{checkIfFieldRemoved:S,checkIfNewField:w,getFieldNewName:A,getFieldNewType:F,getFieldNewNullable:$,getFieldNewPrimaryKey:X,getFieldNewCharacterMaximumLength:H,getFieldNewPrecision:_,getFieldNewScale:oe,checkIfFieldHasChange:pe,isSummaryOnly:G}=Bs(),[W,E]=f.useState({isDiffFieldRemoved:!1,isDiffNewField:!1,fieldDiffChangedName:null,fieldDiffChangedType:null,fieldDiffChangedNullable:null,fieldDiffChangedCharacterMaximumLength:null,fieldDiffChangedScale:null,fieldDiffChangedPrecision:null,fieldDiffChangedPrimaryKey:null,isDiffFieldChanged:!1});f.useEffect(()=>{const q=requestAnimationFrame(()=>{E({isDiffFieldRemoved:S({fieldId:e.id}),isDiffNewField:w({fieldId:e.id}),fieldDiffChangedName:A({fieldId:e.id}),fieldDiffChangedType:F({fieldId:e.id}),fieldDiffChangedNullable:$({fieldId:e.id}),fieldDiffChangedPrimaryKey:X({fieldId:e.id}),fieldDiffChangedCharacterMaximumLength:H({fieldId:e.id}),fieldDiffChangedScale:oe({fieldId:e.id}),fieldDiffChangedPrecision:_({fieldId:e.id}),isDiffFieldChanged:pe({fieldId:e.id,tableId:n})})});return()=>cancelAnimationFrame(q)},[S,w,A,F,X,$,pe,H,_,oe,e.id,n]);const{isDiffFieldRemoved:R,isDiffNewField:O,fieldDiffChangedName:J,fieldDiffChangedType:se,isDiffFieldChanged:Q,fieldDiffChangedNullable:Le,fieldDiffChangedPrimaryKey:je,fieldDiffChangedCharacterMaximumLength:re,fieldDiffChangedScale:Ne,fieldDiffChangedPrecision:Ce}=W,Ue=f.useCallback(q=>{q.stopPropagation(),m(!0)},[]),fe=f.useMemo(()=>u?e.type.name===u.name:!1,[u,e.type.name]),{showFieldAttributes:Oe}=Ks();return c.jsxs("div",{className:z("group relative flex h-8 items-center justify-between gap-1 border-t px-3 text-sm last:rounded-b-[6px] hover:bg-slate-100 dark:hover:bg-slate-800","transition-all duration-200 ease-in-out",{"bg-pink-100 dark:bg-pink-900":s&&!fe,"bg-yellow-100 dark:bg-yellow-900":fe,"max-h-8 opacity-100":i,"z-0 max-h-0 overflow-hidden opacity-0":!i,"bg-sky-200 dark:bg-sky-800 hover:bg-sky-100 dark:hover:bg-sky-900 border-sky-300 dark:border-sky-700":Q&&!G&&!R&&!O,"bg-red-200 dark:bg-red-800 hover:bg-red-100 dark:hover:bg-red-900 border-red-300 dark:border-red-700":R,"bg-green-200 dark:bg-green-800 hover:bg-green-100 dark:hover:bg-green-900 border-green-300 dark:border-green-700":O}),children:[r?c.jsxs(c.Fragment,{children:[c.jsx(dt,{id:`${ys}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${!t||l?"!invisible":""}`,position:Me.Right,type:"source"}),c.jsx(dt,{id:`${gs}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${!t||l?"!invisible":""}`,position:Me.Left,type:"source"})]}):null,(!b.inProgress||v)&&r&&c.jsxs(c.Fragment,{children:[Array.from({length:C},(q,L)=>L).map(q=>c.jsx(dt,{id:`${bn}${q}_${e.id}`,className:"!invisible",position:Me.Left,type:"target"},`${bn}${q}_${e.id}`)),c.jsx(dt,{id:`${bn}${C}_${e.id}`,className:v?"!absolute !left-0 !top-0 !h-full !w-full !transform-none !rounded-none !border-none !opacity-0":"!invisible",position:Me.Left,type:"target"})]}),c.jsxs("div",{className:z("flex items-center gap-1 min-w-0 flex-1 text-left",{"font-semibold":e.primaryKey||e.unique,"w-full":h}),children:[R?c.jsx(Ar,{className:"size-3.5 text-red-800 dark:text-red-200"}):O?c.jsx(mr,{className:"size-3.5 text-green-800 dark:text-green-200"}):Q&&!G?c.jsx(Pr,{className:"size-3.5 shrink-0 text-sky-800 dark:text-sky-200"}):null,h&&!l?c.jsxs(c.Fragment,{children:[c.jsx(Vn,{ref:x,onBlur:M,placeholder:e.name,autoFocus:!0,type:"text",value:p,onClick:q=>q.stopPropagation(),onChange:q=>g(q.target.value),className:"h-5 w-full border-[0.5px] border-blue-400 bg-slate-100 focus-visible:ring-0 dark:bg-slate-900"}),c.jsx(he,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:M,children:c.jsx(zs,{className:"size-4"})})]}):c.jsx("span",{className:z("truncate min-w-0",{"text-red-800 font-normal dark:text-red-200":R,"text-green-800 font-normal dark:text-green-200":O,"text-sky-800 font-normal dark:text-sky-200":Q&&!G&&!R&&!O}),onDoubleClick:Ue,children:J?c.jsxs(c.Fragment,{children:[e.name," ",c.jsx("span",{className:"font-medium",children:"â†’"})," ",J]}):e.name}),e.comments&&!h?c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:c.jsx("div",{className:"shrink-0 cursor-pointer text-muted-foreground",children:c.jsx(qu,{size:14})})}),c.jsx(ve,{children:e.comments})]}):null]}),h?null:c.jsxs("div",{className:"ml-2 flex shrink-0 items-center justify-end gap-1.5",children:[e.primaryKey&&je===null||je?c.jsx("div",{className:z("text-muted-foreground",l?"":"group-hover:hidden",R?"text-red-800 dark:text-red-200":"",O?"text-green-800 dark:text-green-200":"",Q&&!G&&!R&&!O?"text-sky-800 dark:text-sky-200":""),children:c.jsx(Ku,{size:14})}):null,c.jsx("div",{className:z("content-center text-right text-xs text-muted-foreground overflow-hidden max-w-[8rem]",e.primaryKey?"min-w-0":"min-w-[3rem]",l?"":"group-hover:hidden",R?"text-red-800 dark:text-red-200":"",O?"text-green-800 dark:text-green-200":"",Q&&!R&&!G&&!O?"text-sky-800 dark:text-sky-200":""),children:c.jsxs("span",{className:"block truncate",children:[se?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"line-through",children:e.type.name.split(" ")[0]})," ",se.name.split(" ")[0]]}):`${e.type.name.split(" ")[0]}${Oe?jc({...e,precision:Ce??e.precision,scale:Ne??e.scale,characterMaximumLength:re??e.characterMaximumLength}):""}`,Le!==null?Le?c.jsx("span",{className:"font-semibold",children:"?"}):c.jsx("span",{className:"line-through",children:"?"}):e.nullable?"?":""]})}),l?null:c.jsx("div",{className:"hidden flex-row group-hover:flex",children:c.jsx(he,{variant:"ghost",className:"size-6 p-0 hover:bg-primary-foreground",onClick:q=>{q.stopPropagation(),o(n,e.id)},children:c.jsx(pr,{className:"size-3.5 text-red-700"})})})]})]})},wd);Dr.displayName="TableNodeField";var Ir=f.forwardRef((e,t)=>{const{children:n,...s}=e,i=f.Children.toArray(n),r=i.find(Sd);if(r){const o=r.props.children,a=i.map(l=>l===r?f.Children.count(o)>1?f.Children.only(null):f.isValidElement(o)?o.props.children:null:l);return c.jsx(xs,{...s,ref:t,children:f.isValidElement(o)?f.cloneElement(o,void 0,a):null})}return c.jsx(xs,{...s,ref:t,children:n})});Ir.displayName="Slot";var xs=f.forwardRef((e,t)=>{const{children:n,...s}=e;if(f.isValidElement(n)){const i=jd(n);return f.cloneElement(n,{...kd(s,n.props),ref:t?Sr(t,i):i})}return f.Children.count(n)>1?f.Children.only(null):null});xs.displayName="SlotClone";var Md=({children:e})=>c.jsx(c.Fragment,{children:e});function Sd(e){return f.isValidElement(e)&&e.type===Md}function kd(e,t){const n={...t};for(const s in t){const i=e[s],r=t[s];/^on[A-Z]/.test(s)?i&&r?n[s]=(...a)=>{r(...a),i(...a)}:i&&(n[s]=i):s==="style"?n[s]={...i,...r}:s==="className"&&(n[s]=[i,r].filter(Boolean).join(" "))}return{...e,...n}}function jd(e){var s,i;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var vs=["Enter"," "],Pd=["ArrowDown","PageUp","Home"],Vr=["ArrowUp","PageDown","End"],Ad=[...Pd,...Vr],Nd={ltr:[...vs,"ArrowRight"],rtl:[...vs,"ArrowLeft"]},Ed={ltr:["ArrowLeft"],rtl:["ArrowRight"]},nn="Menu",[Gt,Rd,Dd]=Pc(nn),[xt,_r]=gr(nn,[Dd,yr,xr]),sn=yr(),Fr=xr(),[Lr,ot]=xt(nn),[Id,on]=xt(nn),Or=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:i,onOpenChange:r,modal:o=!0}=e,a=sn(t),[l,d]=f.useState(null),u=f.useRef(!1),h=_n(r),m=Ac(i);return f.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),c.jsx(vr,{...a,children:c.jsx(Lr,{scope:t,open:n,onOpenChange:h,content:l,onContentChange:d,children:c.jsx(Id,{scope:t,onClose:f.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:m,modal:o,children:s})})})};Or.displayName=nn;var Vd="MenuAnchor",Gs=f.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,i=sn(n);return c.jsx(Nc,{...i,...s,ref:t})});Gs.displayName=Vd;var Ws="MenuPortal",[_d,Br]=xt(Ws,{forceMount:void 0}),zr=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:i}=e,r=ot(Ws,t);return c.jsx(_d,{scope:t,forceMount:n,children:c.jsx(Fn,{present:n||r.open,children:c.jsx(Ec,{asChild:!0,container:i,children:s})})})};zr.displayName=Ws;var _e="MenuContent",[Fd,Xs]=xt(_e),$r=f.forwardRef((e,t)=>{const n=Br(_e,e.__scopeMenu),{forceMount:s=n.forceMount,...i}=e,r=ot(_e,e.__scopeMenu),o=on(_e,e.__scopeMenu);return c.jsx(Gt.Provider,{scope:e.__scopeMenu,children:c.jsx(Fn,{present:s||r.open,children:c.jsx(Gt.Slot,{scope:e.__scopeMenu,children:o.modal?c.jsx(Ld,{...i,ref:t}):c.jsx(Od,{...i,ref:t})})})})}),Ld=f.forwardRef((e,t)=>{const n=ot(_e,e.__scopeMenu),s=f.useRef(null),i=tn(t,s);return f.useEffect(()=>{const r=s.current;if(r)return Rc(r)},[]),c.jsx(Ys,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ee(e.onFocusOutside,r=>r.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Od=f.forwardRef((e,t)=>{const n=ot(_e,e.__scopeMenu);return c.jsx(Ys,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Ys=f.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:p,disableOutsideScroll:g,...x}=e,y=ot(_e,n),b=on(_e,n),v=sn(n),C=Fr(n),T=Rd(n),[M,k]=f.useState(null),S=f.useRef(null),w=tn(t,S,y.onContentChange),A=f.useRef(0),F=f.useRef(""),$=f.useRef(0),X=f.useRef(null),H=f.useRef("right"),_=f.useRef(0),oe=g?Vc:f.Fragment,pe=g?{as:Ir,allowPinchZoom:!0}:void 0,G=E=>{var re,Ne;const R=F.current+E,O=T().filter(Ce=>!Ce.disabled),J=document.activeElement,se=(re=O.find(Ce=>Ce.ref.current===J))==null?void 0:re.textValue,Q=O.map(Ce=>Ce.textValue),Le=Zd(Q,R,se),je=(Ne=O.find(Ce=>Ce.textValue===Le))==null?void 0:Ne.ref.current;(function Ce(Ue){F.current=Ue,window.clearTimeout(A.current),Ue!==""&&(A.current=window.setTimeout(()=>Ce(""),1e3))})(R),je&&setTimeout(()=>je.focus())};f.useEffect(()=>()=>window.clearTimeout(A.current),[]),Ic();const W=f.useCallback(E=>{var O,J;return H.current===((O=X.current)==null?void 0:O.side)&&Qd(E,(J=X.current)==null?void 0:J.area)},[]);return c.jsx(Fd,{scope:n,searchRef:F,onItemEnter:f.useCallback(E=>{W(E)&&E.preventDefault()},[W]),onItemLeave:f.useCallback(E=>{var R;W(E)||((R=S.current)==null||R.focus(),k(null))},[W]),onTriggerLeave:f.useCallback(E=>{W(E)&&E.preventDefault()},[W]),pointerGraceTimerRef:$,onPointerGraceIntentChange:f.useCallback(E=>{X.current=E},[]),children:c.jsx(oe,{...pe,children:c.jsx(_c,{asChild:!0,trapped:i,onMountAutoFocus:ee(r,E=>{var R;E.preventDefault(),(R=S.current)==null||R.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:c.jsx(Fc,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:m,onDismiss:p,children:c.jsx(Lc,{asChild:!0,...C,dir:b.dir,orientation:"vertical",loop:s,currentTabStopId:M,onCurrentTabStopIdChange:k,onEntryFocus:ee(l,E=>{b.isUsingKeyboardRef.current||E.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(Oc,{role:"menu","aria-orientation":"vertical","data-state":oa(y.open),"data-radix-menu-content":"",dir:b.dir,...v,...x,ref:w,style:{outline:"none",...x.style},onKeyDown:ee(x.onKeyDown,E=>{const O=E.target.closest("[data-radix-menu-content]")===E.currentTarget,J=E.ctrlKey||E.altKey||E.metaKey,se=E.key.length===1;O&&(E.key==="Tab"&&E.preventDefault(),!J&&se&&G(E.key));const Q=S.current;if(E.target!==Q||!Ad.includes(E.key))return;E.preventDefault();const je=T().filter(re=>!re.disabled).map(re=>re.ref.current);Vr.includes(E.key)&&je.reverse(),Yd(je)}),onBlur:ee(e.onBlur,E=>{E.currentTarget.contains(E.target)||(window.clearTimeout(A.current),F.current="")}),onPointerMove:ee(e.onPointerMove,Wt(E=>{const R=E.target,O=_.current!==E.clientX;if(E.currentTarget.contains(R)&&O){const J=E.clientX>_.current?"right":"left";H.current=J,_.current=E.clientX}}))})})})})})})});$r.displayName=_e;var Bd="MenuGroup",qs=f.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return c.jsx(Pt.div,{role:"group",...s,ref:t})});qs.displayName=Bd;var zd="MenuLabel",Ur=f.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return c.jsx(Pt.div,{...s,ref:t})});Ur.displayName=zd;var jn="MenuItem",Yi="menu.itemSelect",On=f.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...i}=e,r=f.useRef(null),o=on(jn,e.__scopeMenu),a=Xs(jn,e.__scopeMenu),l=tn(t,r),d=f.useRef(!1),u=()=>{const h=r.current;if(!n&&h){const m=new CustomEvent(Yi,{bubbles:!0,cancelable:!0});h.addEventListener(Yi,p=>s==null?void 0:s(p),{once:!0}),yu(h,m),m.defaultPrevented?d.current=!1:o.onClose()}};return c.jsx(Kr,{...i,ref:l,disabled:n,onClick:ee(e.onClick,u),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),d.current=!0},onPointerUp:ee(e.onPointerUp,h=>{var m;d.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:ee(e.onKeyDown,h=>{const m=a.searchRef.current!=="";n||m&&h.key===" "||vs.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});On.displayName=jn;var Kr=f.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:i,...r}=e,o=Xs(jn,n),a=Fr(n),l=f.useRef(null),d=tn(t,l),[u,h]=f.useState(!1),[m,p]=f.useState("");return f.useEffect(()=>{const g=l.current;g&&p((g.textContent??"").trim())},[r.children]),c.jsx(Gt.ItemSlot,{scope:n,disabled:s,textValue:i??m,children:c.jsx(Dc,{asChild:!0,...a,focusable:!s,children:c.jsx(Pt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...r,ref:d,onPointerMove:ee(e.onPointerMove,Wt(g=>{s?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ee(e.onPointerLeave,Wt(g=>o.onItemLeave(g))),onFocus:ee(e.onFocus,()=>h(!0)),onBlur:ee(e.onBlur,()=>h(!1))})})})}),$d="MenuCheckboxItem",Hr=f.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...i}=e;return c.jsx(qr,{scope:e.__scopeMenu,checked:n,children:c.jsx(On,{role:"menuitemcheckbox","aria-checked":Pn(n)?"mixed":n,...i,ref:t,"data-state":Qs(n),onSelect:ee(i.onSelect,()=>s==null?void 0:s(Pn(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Hr.displayName=$d;var Gr="MenuRadioGroup",[Ud,Kd]=xt(Gr,{value:void 0,onValueChange:()=>{}}),Wr=f.forwardRef((e,t)=>{const{value:n,onValueChange:s,...i}=e,r=_n(s);return c.jsx(Ud,{scope:e.__scopeMenu,value:n,onValueChange:r,children:c.jsx(qs,{...i,ref:t})})});Wr.displayName=Gr;var Xr="MenuRadioItem",Yr=f.forwardRef((e,t)=>{const{value:n,...s}=e,i=Kd(Xr,e.__scopeMenu),r=n===i.value;return c.jsx(qr,{scope:e.__scopeMenu,checked:r,children:c.jsx(On,{role:"menuitemradio","aria-checked":r,...s,ref:t,"data-state":Qs(r),onSelect:ee(s.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});Yr.displayName=Xr;var Zs="MenuItemIndicator",[qr,Hd]=xt(Zs,{checked:!1}),Zr=f.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...i}=e,r=Hd(Zs,n);return c.jsx(Fn,{present:s||Pn(r.checked)||r.checked===!0,children:c.jsx(Pt.span,{...i,ref:t,"data-state":Qs(r.checked)})})});Zr.displayName=Zs;var Gd="MenuSeparator",Jr=f.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return c.jsx(Pt.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});Jr.displayName=Gd;var Wd="MenuArrow",Qr=f.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,i=sn(n);return c.jsx(Bc,{...i,...s,ref:t})});Qr.displayName=Wd;var Js="MenuSub",[Xd,ea]=xt(Js),ta=e=>{const{__scopeMenu:t,children:n,open:s=!1,onOpenChange:i}=e,r=ot(Js,t),o=sn(t),[a,l]=f.useState(null),[d,u]=f.useState(null),h=_n(i);return f.useEffect(()=>(r.open===!1&&h(!1),()=>h(!1)),[r.open,h]),c.jsx(vr,{...o,children:c.jsx(Lr,{scope:t,open:s,onOpenChange:h,content:d,onContentChange:u,children:c.jsx(Xd,{scope:t,contentId:$i(),triggerId:$i(),trigger:a,onTriggerChange:l,children:n})})})};ta.displayName=Js;var Lt="MenuSubTrigger",na=f.forwardRef((e,t)=>{const n=ot(Lt,e.__scopeMenu),s=on(Lt,e.__scopeMenu),i=ea(Lt,e.__scopeMenu),r=Xs(Lt,e.__scopeMenu),o=f.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=r,d={__scopeMenu:e.__scopeMenu},u=f.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return f.useEffect(()=>u,[u]),f.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),l(null)}},[a,l]),c.jsx(Gs,{asChild:!0,...d,children:c.jsx(Kr,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":oa(n.open),...e,ref:Sr(t,i.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ee(e.onPointerMove,Wt(h=>{r.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(r.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ee(e.onPointerLeave,Wt(h=>{var p,g;u();const m=(p=n.content)==null?void 0:p.getBoundingClientRect();if(m){const x=(g=n.content)==null?void 0:g.dataset.side,y=x==="right",b=y?-5:5,v=m[y?"left":"right"],C=m[y?"right":"left"];r.onPointerGraceIntentChange({area:[{x:h.clientX+b,y:h.clientY},{x:v,y:m.top},{x:C,y:m.top},{x:C,y:m.bottom},{x:v,y:m.bottom}],side:x}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>r.onPointerGraceIntentChange(null),300)}else{if(r.onTriggerLeave(h),h.defaultPrevented)return;r.onPointerGraceIntentChange(null)}})),onKeyDown:ee(e.onKeyDown,h=>{var p;const m=r.searchRef.current!=="";e.disabled||m&&h.key===" "||Nd[s.dir].includes(h.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),h.preventDefault())})})})});na.displayName=Lt;var sa="MenuSubContent",ia=f.forwardRef((e,t)=>{const n=Br(_e,e.__scopeMenu),{forceMount:s=n.forceMount,...i}=e,r=ot(_e,e.__scopeMenu),o=on(_e,e.__scopeMenu),a=ea(sa,e.__scopeMenu),l=f.useRef(null),d=tn(t,l);return c.jsx(Gt.Provider,{scope:e.__scopeMenu,children:c.jsx(Fn,{present:s||r.open,children:c.jsx(Gt.Slot,{scope:e.__scopeMenu,children:c.jsx(Ys,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;o.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ee(e.onFocusOutside,u=>{u.target!==a.trigger&&r.onOpenChange(!1)}),onEscapeKeyDown:ee(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ee(e.onKeyDown,u=>{var p;const h=u.currentTarget.contains(u.target),m=Ed[o.dir].includes(u.key);h&&m&&(r.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});ia.displayName=sa;function oa(e){return e?"open":"closed"}function Pn(e){return e==="indeterminate"}function Qs(e){return Pn(e)?"indeterminate":e?"checked":"unchecked"}function Yd(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function qd(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function Zd(e,t,n){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,r=n?e.indexOf(n):-1;let o=qd(e,Math.max(r,0));i.length===1&&(o=o.filter(d=>d!==n));const l=o.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function Jd(e,t){const{x:n,y:s}=e;let i=!1;for(let r=0,o=t.length-1;r<t.length;o=r++){const a=t[r].x,l=t[r].y,d=t[o].x,u=t[o].y;l>s!=u>s&&n<(d-a)*(s-l)/(u-l)+a&&(i=!i)}return i}function Qd(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Jd(n,t)}function Wt(e){return t=>t.pointerType==="mouse"?e(t):void 0}var eh=Or,th=Gs,nh=zr,sh=$r,ih=qs,oh=Ur,rh=On,ah=Hr,lh=Wr,ch=Yr,uh=Zr,dh=Jr,hh=Qr,o0=ta,fh=na,mh=ia,ei="ContextMenu",[ph,r0]=gr(ei,[_r]),ke=_r(),[gh,ra]=ph(ei),aa=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:s,dir:i,modal:r=!0}=e,[o,a]=f.useState(!1),l=ke(t),d=_n(s),u=f.useCallback(h=>{a(h),d(h)},[d]);return c.jsx(gh,{scope:t,open:o,onOpenChange:u,modal:r,children:c.jsx(eh,{...l,dir:i,open:o,onOpenChange:u,modal:r,children:n})})};aa.displayName=ei;var la="ContextMenuTrigger",ca=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:s=!1,...i}=e,r=ra(la,n),o=ke(n),a=f.useRef({x:0,y:0}),l=f.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),d=f.useRef(0),u=f.useCallback(()=>window.clearTimeout(d.current),[]),h=m=>{a.current={x:m.clientX,y:m.clientY},r.onOpenChange(!0)};return f.useEffect(()=>u,[u]),f.useEffect(()=>void(s&&u()),[s,u]),c.jsxs(c.Fragment,{children:[c.jsx(th,{...o,virtualRef:l}),c.jsx(Pt.span,{"data-state":r.open?"open":"closed","data-disabled":s?"":void 0,...i,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:s?e.onContextMenu:ee(e.onContextMenu,m=>{u(),h(m),m.preventDefault()}),onPointerDown:s?e.onPointerDown:ee(e.onPointerDown,mn(m=>{u(),d.current=window.setTimeout(()=>h(m),700)})),onPointerMove:s?e.onPointerMove:ee(e.onPointerMove,mn(u)),onPointerCancel:s?e.onPointerCancel:ee(e.onPointerCancel,mn(u)),onPointerUp:s?e.onPointerUp:ee(e.onPointerUp,mn(u))})]})});ca.displayName=la;var yh="ContextMenuPortal",ua=e=>{const{__scopeContextMenu:t,...n}=e,s=ke(t);return c.jsx(nh,{...s,...n})};ua.displayName=yh;var da="ContextMenuContent",ha=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,i=ra(da,n),r=ke(n),o=f.useRef(!1);return c.jsx(sh,{...r,...s,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{var l;(l=e.onCloseAutoFocus)==null||l.call(e,a),!a.defaultPrevented&&o.current&&a.preventDefault(),o.current=!1},onInteractOutside:a=>{var l;(l=e.onInteractOutside)==null||l.call(e,a),!a.defaultPrevented&&!i.modal&&(o.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ha.displayName=da;var xh="ContextMenuGroup",vh=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,i=ke(n);return c.jsx(ih,{...i,...s,ref:t})});vh.displayName=xh;var bh="ContextMenuLabel",fa=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,i=ke(n);return c.jsx(oh,{...i,...s,ref:t})});fa.displayName=bh;var Ch="ContextMenuItem",ma=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,i=ke(n);return c.jsx(rh,{...i,...s,ref:t})});ma.displayName=Ch;var Th="ContextMenuCheckboxItem",pa=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,i=ke(n);return c.jsx(ah,{...i,...s,ref:t})});pa.displayName=Th;var wh="ContextMenuRadioGroup",Mh=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,i=ke(n);return c.jsx(lh,{...i,...s,ref:t})});Mh.displayName=wh;var Sh="ContextMenuRadioItem",ga=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,i=ke(n);return c.jsx(ch,{...i,...s,ref:t})});ga.displayName=Sh;var kh="ContextMenuItemIndicator",ya=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,i=ke(n);return c.jsx(uh,{...i,...s,ref:t})});ya.displayName=kh;var jh="ContextMenuSeparator",xa=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,i=ke(n);return c.jsx(dh,{...i,...s,ref:t})});xa.displayName=jh;var Ph="ContextMenuArrow",Ah=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,i=ke(n);return c.jsx(hh,{...i,...s,ref:t})});Ah.displayName=Ph;var Nh="ContextMenuSubTrigger",va=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,i=ke(n);return c.jsx(fh,{...i,...s,ref:t})});va.displayName=Nh;var Eh="ContextMenuSubContent",ba=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...s}=e,i=ke(n);return c.jsx(mh,{...i,...s,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ba.displayName=Eh;function mn(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var Rh=aa,Dh=ca,Ih=ua,Ca=ha,Ta=fa,wa=ma,Ma=pa,Sa=ga,ka=ya,ja=xa,Pa=va,Aa=ba;const Na=Rh,Ea=Dh,Vh=f.forwardRef(({className:e,inset:t,children:n,...s},i)=>c.jsxs(Pa,{ref:i,className:z("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...s,children:[n,c.jsx(zc,{className:"ml-auto size-4"})]}));Vh.displayName=Pa.displayName;const _h=f.forwardRef(({className:e,...t},n)=>c.jsx(Aa,{ref:n,className:z("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));_h.displayName=Aa.displayName;const ti=f.forwardRef(({className:e,...t},n)=>c.jsx(Ih,{children:c.jsx(Ca,{ref:n,className:z("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));ti.displayName=Ca.displayName;const nt=f.forwardRef(({className:e,inset:t,...n},s)=>c.jsx(wa,{ref:s,className:z("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));nt.displayName=wa.displayName;const Fh=f.forwardRef(({className:e,children:t,checked:n,...s},i)=>c.jsxs(Ma,{ref:i,className:z("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[c.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:c.jsx(ka,{children:c.jsx($c,{className:"size-4"})})}),t]}));Fh.displayName=Ma.displayName;const Lh=f.forwardRef(({className:e,children:t,...n},s)=>c.jsxs(Sa,{ref:s,className:z("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[c.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:c.jsx(ka,{children:c.jsx(Uc,{className:"size-4 fill-current"})})}),t]}));Lh.displayName=Sa.displayName;const Oh=f.forwardRef(({className:e,inset:t,...n},s)=>c.jsx(Ta,{ref:s,className:z("px-2 py-1.5 text-sm font-semibold text-foreground",t&&"pl-8",e),...n}));Oh.displayName=Ta.displayName;const Bh=f.forwardRef(({className:e,...t},n)=>c.jsx(ja,{ref:n,className:z("-mx-1 my-1 h-px bg-border",e),...t}));Bh.displayName=ja.displayName;const zh=({children:e,table:t})=>{const{removeTable:n,readonly:s,createTable:i}=We(),{openTableFromSidebar:r}=jt(),{t:o}=gt(),{isMd:a}=$s("md"),{openCreateRelationshipDialog:l}=br(),d=f.useCallback(()=>{const p=Sc(t);p.name=`${p.name}_copy`,p.x+=30,p.y+=50,i(p)},[i,t]),u=f.useCallback(()=>{r(t.id)},[r,t.id]),h=f.useCallback(()=>{n(t.id)},[n,t.id]),m=f.useCallback(()=>{l({sourceTableId:t.id})},[l,t.id]);return!a||s?c.jsx(c.Fragment,{children:e}):c.jsxs(Na,{children:[c.jsx(Ea,{children:e}),c.jsxs(ti,{children:[c.jsxs(nt,{onClick:u,className:"flex justify-between gap-3",children:[c.jsx("span",{children:o("table_node_context_menu.edit_table")}),c.jsx(jr,{className:"size-3.5"})]}),c.jsxs(nt,{onClick:d,className:"flex justify-between gap-3",children:[c.jsx("span",{children:o("table_node_context_menu.duplicate_table")}),c.jsx(Kc,{className:"size-3.5"})]}),c.jsxs(nt,{onClick:m,className:"flex justify-between gap-3",children:[c.jsx("span",{children:o("table_node_context_menu.add_relationship")}),c.jsx(Nr,{className:"size-3.5"})]}),c.jsxs(nt,{onClick:h,className:"flex justify-between gap-3",children:[c.jsx("span",{children:o("table_node_context_menu.delete_table")}),c.jsx(pr,{className:"size-3.5 text-red-700"})]})]})]})},An="top_dep_",Ra="bottom_dep_",Cn="target_dep_",Da=be.memo(({table:e,focused:t})=>{const{dependencies:n}=We(),s=hr(),i=fr(),r=f.useMemo(()=>{var l,d;return i.inProgress&&i.fromNode.id!==e.id&&(((l=i.fromHandle.id)==null?void 0:l.startsWith(An))||((d=i.fromHandle.id)==null?void 0:d.startsWith(Ra)))},[i,e.id]),o=f.useMemo(()=>n.filter(l=>l.tableId===e.id).length,[n,e.id]),a=f.useRef(o);return f.useEffect(()=>{a.current!==o&&(s(e.id),a.current=o)},[e.id,s,o]),c.jsxs(c.Fragment,{children:[e.isView||e.isMaterializedView?c.jsx(dt,{id:`${An}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${t?"":"!invisible"}`,position:Me.Top,type:"source"}):null,Array.from({length:o},(l,d)=>d).map(l=>c.jsx(dt,{id:`${Cn}${l}_${e.id}`,className:"!invisible",position:Me.Top,type:"target"},`${Cn}${l}_${e.id}`)),r?c.jsx(dt,{id:`${Cn}${o}_${e.id}`,className:r?"!absolute !left-0 !top-0 !h-full !w-full !transform-none !rounded-none !border-none !opacity-0":"!invisible",position:Me.Top,type:"target"}):null]})});Da.displayName="TableNodeDependencyIndicator";const $h=({status:e})=>e==="none"?null:c.jsx("div",{className:"absolute left-1/2 top-0 z-10 -translate-x-1/2 -translate-y-1/2",children:c.jsx("span",{className:z("inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium text-white",{"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":e==="new","bg-sky-100 text-sky-800 dark:bg-sky-800 dark:text-sky-100":e==="changed","bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100":e==="removed"}),children:e==="new"?"New":e==="changed"?"Modified":"Deleted"})}),Ia=be.memo(({selected:e,dragging:t,id:n,data:{table:s,isOverlapping:i,highlightOverlappingTables:r,hasHighlightedCustomType:o}})=>{const{updateTable:a,relationships:l,readonly:d}=We(),u=Hc(L=>L.edges),{openTableFromSidebar:h,selectSidebarSection:m}=jt(),[p,g]=f.useState(s.expanded??!1),{t:x}=gt(),[y,b]=f.useState(!1),[v,C]=f.useState(s.name),T=be.useRef(null),[M,k]=f.useState(!1),{getTableNewName:S,getTableNewColor:w,checkIfTableHasChange:A,checkIfNewTable:F,checkIfTableRemoved:$,isSummaryOnly:X}=Bs(),H=f.useMemo(()=>s.fields,[s.fields]),_=f.useMemo(()=>S({tableId:s.id}),[S,s.id]),oe=f.useMemo(()=>w({tableId:s.id}),[w,s.id]),pe=f.useMemo(()=>oe||s.color,[oe,s.color]),[G,W]=f.useState({isDiffTableChanged:!1,isDiffNewTable:!1,isDiffTableRemoved:!1}),E=f.useRef(!1);f.useEffect(()=>{const L=()=>{W({isDiffTableChanged:A({tableId:s.id}),isDiffNewTable:F({tableId:s.id}),isDiffTableRemoved:$({tableId:s.id})})};E.current?L():(E.current=!0,requestAnimationFrame(L))},[A,F,$,s.id]);const{isDiffTableChanged:R,isDiffNewTable:O,isDiffTableRemoved:J}=G,se=f.useMemo(()=>{var ue;if(u.length===0)return[];const L=[];for(const Pe of u)Pe.type==="relationship-edge"&&(Pe.source===n||Pe.target===n)&&(Pe.selected||(ue=Pe.data)!=null&&ue.highlighted)&&L.push(Pe);return L},[u,n]),Q=f.useMemo(()=>{const L=new Set;return se.forEach(ue=>{var Pe,Qe;(Pe=ue.data)!=null&&Pe.relationship.sourceFieldId&&L.add(ue.data.relationship.sourceFieldId),(Qe=ue.data)!=null&&Qe.relationship.targetFieldId&&L.add(ue.data.relationship.targetFieldId)}),L},[se]),Le=f.useMemo(()=>!!e&&!t||M,[e,t,M]),je=f.useCallback(()=>{m("tables"),h(s.id)},[m,h,s.id]),re=f.useCallback(()=>{a(s.id,{width:(s.width??vn)<Ui?Ui:dn})},[s.id,s.width,a]),Ne=f.useCallback(()=>{a(s.id,{width:vn})},[s.id,a]),Ce=f.useCallback(()=>{g(L=>{const ue=!L;return a(s.id,{expanded:ue}),ue})},[s.id,a]),Ue=f.useMemo(()=>{const L=new Set;return l.forEach(ue=>{ue.sourceFieldId&&L.add(ue.sourceFieldId),ue.targetFieldId&&L.add(ue.targetFieldId)}),L},[l]),fe=f.useMemo(()=>{if(p||H.length<=Rt)return H;const L=[],ue=[];for(const Xe of H)Ue.has(Xe.id)||Xe.primaryKey?L.push(Xe):ue.push(Xe);const Pe=L.slice(0,Rt),Qe=Rt-Pe.length,Kn=Qe>0?ue.slice(0,Qe):[],Hn=new Set([...Pe,...Kn]);return H.filter(Xe=>Hn.has(Xe))},[p,H,Ue]),Oe=f.useCallback(()=>{y&&(v.trim()&&a(s.id,{name:v.trim()}),b(!1))},[v,s.id,a,y]),at=f.useCallback(()=>{b(!1),C(s.name)},[s.name]);Hs(T,Oe),Mt("Enter",Oe),Mt("Escape",at);const Je=f.useCallback(L=>{L.stopPropagation(),b(!0)},[]);be.useEffect(()=>{s.name.trim()&&C(s.name.trim())},[s.name]);const q=f.useMemo(()=>z("flex w-full flex-col border-2 bg-slate-50 dark:bg-slate-950 rounded-lg shadow-sm transition-transform duration-300",e?"border-pink-600":"border-slate-500 dark:border-slate-700",i?"ring-2 ring-offset-slate-50 dark:ring-offset-slate-900 ring-blue-500 ring-offset-2":"",!r&&i?"animate-scale":"",r&&i?"animate-scale-2":"",o?"ring-2 ring-offset-slate-50 dark:ring-offset-slate-900 ring-yellow-500 ring-offset-2 animate-scale":"",R&&!X&&!O&&!J?"outline outline-[3px] outline-sky-500 dark:outline-sky-900 outline-offset-[5px]":"",O?"outline outline-[3px] outline-green-500 dark:outline-green-900 outline-offset-[5px]":"",J?"outline outline-[3px] outline-red-500 dark:outline-red-900 outline-offset-[5px]":""),[e,i,r,o,X,R,O,J]);return c.jsx(zh,{table:s,children:c.jsxs("div",{className:q,onClick:L=>{L.detail===2&&je()},onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:[c.jsx(Cr,{isVisible:Le,lineClassName:"!border-none !w-2",minWidth:vn,maxWidth:dn,shouldResize:L=>L.dy===0,handleClassName:"!hidden"}),c.jsx(Da,{table:s,focused:Le}),c.jsx($h,{status:O?"new":J?"removed":R&&!X?"changed":"none"}),c.jsx("div",{className:"h-2 rounded-t-[6px]",style:{backgroundColor:pe}}),c.jsxs("div",{className:"group flex h-9 items-center justify-between bg-slate-200 px-2 dark:bg-slate-900",children:[c.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[O?c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:c.jsx(mr,{className:"size-3.5 shrink-0 text-green-600",strokeWidth:2.5})}),c.jsx(ve,{children:"New Table"})]}):J?c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:c.jsx(Ar,{className:"size-3.5 shrink-0 text-red-600",strokeWidth:2.5})}),c.jsx(ve,{children:"Table Removed"})]}):R&&!X?c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:c.jsx(Pr,{className:"size-3.5 shrink-0 text-sky-600",strokeWidth:2.5})}),c.jsx(ve,{children:"Table Changed"})]}):c.jsx(od,{className:"size-3.5 shrink-0 text-gray-600 dark:text-primary"}),_?c.jsxs(Vt,{className:"flex h-5 items-center justify-center truncate rounded-sm bg-sky-200 px-2 py-0.5 text-sm font-normal text-sky-900 dark:bg-sky-800 dark:text-sky-200",children:[c.jsx("span",{className:"truncate",children:s.name}),c.jsx("span",{className:"mx-1 font-semibold",children:"â†’"}),c.jsx("span",{className:"truncate",children:_})]}):O?c.jsx(Vt,{className:"flex h-5 flex-col justify-center truncate rounded-sm bg-green-200 px-2 py-0.5 text-sm font-normal text-green-900 dark:bg-green-800 dark:text-green-200",children:s.name}):J?c.jsx(Vt,{className:"flex h-5 flex-col justify-center truncate rounded-sm bg-red-200 px-2 py-0.5 text-sm font-normal text-red-900 dark:bg-red-800 dark:text-red-200",children:s.name}):R&&!X?c.jsx(Vt,{className:"flex h-5 flex-col justify-center truncate rounded-sm bg-sky-200 px-2 py-0.5 text-sm font-normal text-sky-900 dark:bg-sky-800 dark:text-sky-200",children:s.name}):y&&!d?c.jsxs(c.Fragment,{children:[c.jsx(Vn,{ref:T,onBlur:Oe,placeholder:s.name,autoFocus:!0,type:"text",value:v,onClick:L=>L.stopPropagation(),onChange:L=>C(L.target.value),className:"h-6 w-full border-[0.5px] border-blue-400 bg-slate-100 focus-visible:ring-0 dark:bg-slate-900"}),c.jsx(he,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:Oe,children:c.jsx(zs,{className:"size-4"})})]}):c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:c.jsx(Vt,{className:"text-editable truncate px-2 py-0.5 text-sm font-bold",onDoubleClick:Je,children:s.name})}),c.jsx(ve,{children:x("tool_tips.double_click_to_edit")})]})]}),c.jsxs("div",{className:"hidden shrink-0 flex-row group-hover:flex",children:[d||y?null:c.jsx(he,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:je,children:c.jsx(Ru,{className:"size-4"})}),y?null:c.jsx(he,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:s.width!==dn?re:Ne,children:s.width!==dn?c.jsx(Pu,{className:"size-4"}):c.jsx(Nu,{className:"size-4"})})]})]}),c.jsx("div",{className:"transition-[max-height] duration-200 ease-in-out",style:{maxHeight:p?`${H.length*2}rem`:`${Rt*2}rem`},children:fe.map(L=>c.jsx(Dr,{focused:Le,tableNodeId:n,field:L,highlighted:Q.has(L.id),visible:!0,isConnectable:!s.isView},L.id))}),H.length>Rt&&c.jsx("div",{className:"z-10 flex h-8 cursor-pointer items-center justify-center rounded-b-md border-t text-xs text-muted-foreground transition-colors duration-200 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:Ce,children:p?c.jsxs(c.Fragment,{children:[c.jsx(Gc,{className:"mr-1 size-3.5"}),x("show_less")]}):c.jsxs(c.Fragment,{children:[c.jsx(Wc,{className:"mr-1 size-3.5"}),x("show_more")]})})]})})});Ia.displayName="TableNode";const Va=be.memo(({id:e,sourceX:t,sourceY:n,targetX:s,targetY:i,source:r,target:o,selected:a,data:l})=>{const{getInternalNode:d,getEdge:u}=yt(),{openRelationshipFromSidebar:h,selectSidebarSection:m}=jt(),{checkIfRelationshipRemoved:p,checkIfNewRelationship:g}=Bs(),{relationships:x}=We(),y=l==null?void 0:l.relationship,b=f.useCallback(()=>{m("relationships"),h(e)},[e,h,m]),v=f.useMemo(()=>{let R=0;for(const O of x)if(O.targetTableId===o&&O.sourceTableId===r||O.targetTableId===r&&O.sourceTableId===o){if(O.id===e)return R;R++}return-1},[x,e,r,o]),C=f.useMemo(()=>d(r),[d,r]),T=f.useMemo(()=>d(o),[d,o]),M=f.useMemo(()=>u(e),[u,e]),k=f.useMemo(()=>{var R,O;return(O=(R=M==null?void 0:M.sourceHandle)==null?void 0:R.startsWith)!=null&&O.call(R,ys)?"right":"left"},[M==null?void 0:M.sourceHandle]),S=(C==null?void 0:C.measured.width)??0,w=k==="left"?t+3:t-S-10,A=k==="left"?t+S+9:t,F=(T==null?void 0:T.measured.width)??0,$=s-1,X=s+F+10,{sourceSide:H,targetSide:_}=f.useMemo(()=>{const R={leftToLeft:Math.abs(w-$),leftToRight:Math.abs(w-X),rightToLeft:Math.abs(A-$),rightToRight:Math.abs(A-X)},O=Math.min(R.leftToLeft,R.leftToRight,R.rightToLeft,R.rightToRight);switch(Object.keys(R).find(se=>R[se]===O)){case"leftToRight":return{sourceSide:"left",targetSide:"right"};case"rightToLeft":return{sourceSide:"right",targetSide:"left"};case"rightToRight":return{sourceSide:"right",targetSide:"right"};default:return{sourceSide:"left",targetSide:"left"}}},[w,A,$,X]),oe=f.useMemo(()=>{const R=Math.round(H==="left"?w:A),O=Math.round(_==="left"?$:X),J=Math.round(n),se=Math.round(i),[Q]=Tr({sourceX:R,sourceY:J,targetX:O,targetY:se,borderRadius:14,sourcePosition:H==="left"?Me.Left:Me.Right,targetPosition:_==="left"?Me.Left:Me.Right,offset:(v+1)*14});return Q},[w,A,$,X,n,i,H,_,v]),pe=f.useMemo(()=>kn({cardinality:(y==null?void 0:y.sourceCardinality)??"one",selected:a??!1,side:H}),[y==null?void 0:y.sourceCardinality,a,H]),G=f.useMemo(()=>kn({cardinality:(y==null?void 0:y.targetCardinality)??"one",selected:a??!1,side:_}),[y==null?void 0:y.targetCardinality,a,_]),W=f.useMemo(()=>y!=null&&y.id?g({relationshipId:y.id}):!1,[g,y==null?void 0:y.id]),E=f.useMemo(()=>y!=null&&y.id?p({relationshipId:y.id}):!1,[p,y==null?void 0:y.id]);return c.jsxs(c.Fragment,{children:[c.jsx("path",{id:e,d:oe,markerStart:`url(#${pe})`,markerEnd:`url(#${G})`,fill:"none",className:z(["react-flow__edge-path",`!stroke-2 ${a?"!stroke-pink-600":"!stroke-slate-400"}`,{"!stroke-green-500 !stroke-[3px]":W,"!stroke-red-500 !stroke-[3px]":E}]),onClick:R=>{R.detail===2&&b()}}),c.jsx("path",{d:oe,fill:"none",strokeOpacity:0,strokeWidth:20,className:"react-flow__edge-interaction",onClick:R=>{R.detail===2&&b()}})]})});Va.displayName="RelationshipEdge";const _a=be.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:z("rounded-xl border bg-card text-card-foreground shadow",e),...t}));_a.displayName="Card";const Uh=be.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:z("flex flex-col space-y-1.5 p-6",e),...t}));Uh.displayName="CardHeader";const Kh=be.forwardRef(({className:e,...t},n)=>c.jsx("h3",{ref:n,className:z("font-semibold leading-none tracking-tight",e),...t}));Kh.displayName="CardTitle";const Hh=be.forwardRef(({className:e,...t},n)=>c.jsx("p",{ref:n,className:z("text-sm text-muted-foreground",e),...t}));Hh.displayName="CardDescription";const Fa=be.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:z("p-6 pt-0",e),...t}));Fa.displayName="CardContent";const Gh=be.forwardRef(({className:e,...t},n)=>c.jsx("div",{ref:n,className:z("flex items-center p-6 pt-0",e),...t}));Gh.displayName="CardFooter";const ct=be.forwardRef((e,t)=>{const{className:n,...s}=e;return c.jsx(he,{ref:t,variant:"ghost",className:z("w-[36px] p-2 hover:bg-primary-foreground",n),...s})});ct.displayName=he.displayName;const qi=e=>`${Math.round(e*100)}%`,Wh=()=>{const{t:e}=gt(),{redo:t,undo:n,hasRedo:s,hasUndo:i}=Xc(),{getZoom:r,zoomIn:o,zoomOut:a,fitView:l}=yt(),[d,u]=f.useState(qi(r())),{setShowFilter:h}=Us(),{hasActiveFilter:m}=Ln(),p=f.useCallback(()=>{h(C=>!C)},[h]);wr({onChange:({zoom:C})=>{u(qi(C))}});const g=200,x=()=>{o({duration:g})},y=()=>{a({duration:g})},b=()=>{l({minZoom:1,maxZoom:1,duration:g})},v=f.useCallback(()=>{l({duration:500,padding:.1,maxZoom:.8})},[l]);return c.jsx("div",{className:"px-1",children:c.jsx(_a,{className:"h-[44px] bg-secondary p-0 shadow-none",children:c.jsxs(Fa,{className:"flex h-full flex-row items-center p-1",children:[c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:c.jsx("span",{children:c.jsx(ct,{onClick:p,className:z("transition-all duration-200",{"bg-pink-500 text-white hover:bg-pink-600 hover:text-white":m}),children:c.jsx(kr,{})})})}),c.jsxs(ve,{children:[e("toolbar.filter"),c.jsx("span",{className:"ml-2 text-muted-foreground",children:hn[fn.TOGGLE_FILTER].keyCombinationLabel})]})]}),c.jsx(Xn,{orientation:"vertical"}),c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:c.jsx("span",{children:c.jsx(ct,{onClick:v,children:c.jsx(td,{})})})}),c.jsxs(ve,{children:[e("toolbar.show_all"),c.jsx("span",{className:"ml-2 text-muted-foreground",children:hn[fn.SHOW_ALL].keyCombinationLabel})]})]}),c.jsx(Xn,{orientation:"vertical"}),c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:c.jsx("span",{children:c.jsx(ct,{onClick:y,children:c.jsx(hd,{})})})}),c.jsx(ve,{children:e("toolbar.zoom_out")})]}),c.jsx(he,{variant:"ghost",onClick:b,className:"w-[60px] p-2 hover:bg-primary-foreground",children:d}),c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:c.jsx("span",{children:c.jsx(ct,{onClick:x,children:c.jsx(ud,{})})})}),c.jsx(ve,{children:e("toolbar.zoom_in")})]}),c.jsx(Xn,{orientation:"vertical"}),c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:c.jsx("span",{children:c.jsx(ct,{onClick:n,disabled:!i,children:c.jsx(ad,{})})})}),c.jsxs(ve,{children:[e("toolbar.undo"),c.jsx("span",{className:"ml-2 text-muted-foreground",children:hn[fn.UNDO].keyCombinationLabel})]})]}),c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:c.jsx("span",{children:c.jsx(ct,{onClick:t,disabled:!s,children:c.jsx(Qu,{})})})}),c.jsxs(ve,{children:[e("toolbar.redo"),c.jsx("span",{className:"ml-2 text-muted-foreground",children:hn[fn.REDO].keyCombinationLabel})]})]})]})})})},Xh=()=>{const{showCardinality:e}=Ks(),t={one:"1",many:"N"},n=["left","right"],s=[!0,!1];return e?c.jsx("svg",{className:"marker-definitions absolute left-0 top-0 z-0 size-0",children:c.jsx("defs",{children:Object.entries(t).map(([i,r])=>n.map(o=>s.map(a=>c.jsxs("marker",{id:kn({cardinality:i,selected:a,side:o}),viewBox:"0 0 16 16",markerWidth:"16",markerHeight:"16",refX:o==="left"?"15":"1",refY:"8",children:[c.jsx("circle",{cx:"8",cy:"8",r:"5",className:z([a?"fill-pink-600":"fill-muted-foreground","stroke-background","stroke-[0.5]"])}),c.jsx("text",{x:"7.9",y:"8.4",fontSize:"6",fontWeight:"600",textAnchor:"middle",dominantBaseline:"middle",className:"fill-muted",children:r})]},kn({cardinality:i,selected:a,side:o})))))})}):null},Yh=({children:e})=>{const{createTable:t,readonly:n,createArea:s}=We(),{schemasDisplayed:i}=Ln(),{openCreateRelationshipDialog:r,openTableSchemaDialog:o}=br(),{screenToFlowPosition:a}=yt(),{t:l}=gt(),{isMd:d}=$s("md"),u=f.useCallback(p=>{var x;const g=a({x:p.clientX,y:p.clientY});if(i.length>1)o({onConfirm:({schema:y})=>t({x:g.x,y:g.y,schema:y.name}),schemas:i});else{const y=(i==null?void 0:i.length)===1?(x=i[0])==null?void 0:x.name:void 0;t({x:g.x,y:g.y,schema:y})}},[t,a,o,i]),h=f.useCallback(p=>{const g=a({x:p.clientX,y:p.clientY});s({x:g.x,y:g.y})},[s,a]),m=f.useCallback(()=>{r()},[r]);return d?c.jsxs(Na,{children:[c.jsx(Ea,{disabled:n,children:e}),c.jsxs(ti,{children:[c.jsxs(nt,{onClick:u,className:"flex justify-between gap-4",children:[l("canvas_context_menu.new_table"),c.jsx(Ht,{className:"size-3.5"})]}),c.jsxs(nt,{onClick:m,className:"flex justify-between gap-4",children:[l("canvas_context_menu.new_relationship"),c.jsx(Nr,{className:"size-3.5"})]}),c.jsxs(nt,{onClick:h,className:"flex justify-between gap-4",children:[l("canvas_context_menu.new_area"),c.jsx(Yc,{className:"size-3.5"})]})]})]}):c.jsx(c.Fragment,{children:e})},qh=({id:e,sourceX:t,sourceY:n,targetX:s,targetY:i,source:r,target:o,selected:a})=>{const{getInternalNode:l}=yt(),{dependencies:d}=We(),{openDependencyFromSidebar:u,selectSidebarSection:h}=jt(),m=f.useCallback(()=>{h("dependencies"),u(e)},[e,u,h]),p=f.useMemo(()=>d.filter(S=>S.tableId===o&&S.dependentTableId===r||S.tableId===r&&S.dependentTableId===o).findIndex(S=>S.id===e),[d,e,r,o]),g=l(r),x=l(o),{sourceTopY:y,sourceBottomY:b,targetTopY:v,targetBottomY:C}=f.useMemo(()=>{const S=(g==null?void 0:g.measured.height)??0,w=n+5,A=n+S+10,F=(x==null?void 0:x.measured.height)??0,$=i+1,X=i+F+5;return{sourceTopY:w,sourceBottomY:A,targetTopY:$,targetBottomY:X}},[g==null?void 0:g.measured.height,n,x==null?void 0:x.measured.height,i]),{sourceSide:T,targetSide:M}=f.useMemo(()=>{const S={topToTop:Math.abs(y-v),topToBottom:Math.abs(y-C),bottomToTop:Math.abs(b-v),bottomToBottom:Math.abs(b-C)},w=Math.min(S.topToTop,S.topToBottom,S.bottomToTop,S.bottomToBottom);switch(Object.keys(S).find(F=>S[F]===w)){case"topToBottom":return{sourceSide:"top",targetSide:"bottom"};case"bottomToTop":return{sourceSide:"bottom",targetSide:"top"};case"bottomToBottom":return{sourceSide:"bottom",targetSide:"bottom"};default:return{sourceSide:"top",targetSide:"top"}}},[y,b,v,C]),[k]=f.useMemo(()=>Tr({sourceX:t,sourceY:T==="top"?y:b,targetX:s,targetY:M==="top"?v:C,borderRadius:14,sourcePosition:T==="top"?Me.Top:Me.Bottom,targetPosition:M==="top"?Me.Top:Me.Bottom,offset:(p+1)*14}),[p,b,T,y,t,C,M,v,s]);return c.jsxs(c.Fragment,{children:[c.jsx("path",{id:e,d:k,fill:"none",className:z(["react-flow__edge-path",`!stroke-2 ${a?"!stroke-pink-600":"!stroke-blue-400"}`]),onClick:S=>{S.detail===2&&m()}}),c.jsx("path",{d:k,fill:"none",strokeOpacity:0,strokeWidth:20,className:"react-flow__edge-interaction",onClick:S=>{S.detail===2&&m()}})]})},La=be.memo(({selected:e,dragging:t,data:{area:n}})=>{const{updateArea:s,readonly:i}=We(),{t:r}=gt(),[o,a]=f.useState(!1),[l,d]=f.useState(n.name),u=be.useRef(null),{openAreaFromSidebar:h,selectSidebarSection:m}=jt(),p=!!e&&!t,g=f.useCallback(()=>{o&&(l.trim()&&s(n.id,{name:l.trim()}),a(!1))},[l,n.id,s,o]),x=f.useCallback(()=>{a(!1),d(n.name)},[n.name]),y=f.useCallback(()=>{m("areas"),h(n.id)},[m,h,n.id]);Hs(u,g),Mt("Enter",g),Mt("Escape",x);const b=v=>{v.stopPropagation(),a(!0)};return c.jsxs("div",{className:z("flex h-full flex-col rounded-md border-2 shadow-sm",e?"border-pink-600":"border-transparent"),style:{backgroundColor:`${n.color}15`,borderColor:e?void 0:n.color},onClick:v=>{v.detail===2&&y()},children:[c.jsx(Cr,{isVisible:p,lineClassName:"!border-4 !border-transparent",handleClassName:"!h-[10px] !w-[10px] !rounded-full !bg-pink-600",minHeight:100,minWidth:100}),c.jsx("div",{className:"group flex h-8 items-center justify-between rounded-t-md px-2",children:c.jsxs("div",{className:"flex w-full items-center gap-1",children:[c.jsx(Bu,{className:"size-4 shrink-0 text-slate-700 opacity-60 dark:text-slate-300"}),o&&!i?c.jsxs("div",{className:"flex w-full items-center",children:[c.jsx(Vn,{ref:u,autoFocus:!0,type:"text",placeholder:n.name,value:l,onClick:v=>v.stopPropagation(),onChange:v=>d(v.target.value),className:"h-6 bg-white/70 focus-visible:ring-0 dark:bg-slate-900/70"}),c.jsx(he,{variant:"ghost",className:"ml-1 size-6 p-0 hover:bg-white/20",onClick:g,children:c.jsx(zs,{className:"size-3.5 text-slate-700 dark:text-slate-300"})})]}):i?c.jsx("div",{className:"truncate px-1 py-0.5 text-base font-semibold text-slate-700 dark:text-slate-300",children:n.name}):c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:c.jsx("div",{className:"text-editable max-w-[200px] cursor-text truncate px-1 py-0.5 text-base font-semibold text-slate-700 dark:text-slate-300",onDoubleClick:b,children:n.name})}),c.jsx(ve,{children:r("tool_tips.double_click_to_edit")})]})]})}),c.jsx("div",{className:"flex-1"})]})});La.displayName="AreaNode";const Zh=(e,t)=>{const n=e.width??224,s=Mr(e),i=e.x,r=e.x+n,o=e.y,a=e.y+s,l=t.x,d=t.x+t.width,u=t.y,h=t.y+t.height;return i>=l&&r<=d&&o>=u&&a<=h},Jh=(e,t)=>{const n=[...t].sort((s,i)=>(i.order??0)-(s.order??0));for(const s of n)if(Zh(e,s))return s;return null},Qh=(e,t)=>e.map(n=>{const s=Jh(n,t),i=(s==null?void 0:s.id)||null;return n.parentAreaId!==i?{...n,parentAreaId:i}:n}),ef=(e,t)=>t.filter(n=>n.parentAreaId===e),ni=f.createContext({});function si(e){const t=f.useRef(null);return t.current===null&&(t.current=e()),t.current}const ii=typeof window<"u",Oa=ii?f.useLayoutEffect:f.useEffect,Bn=f.createContext(null);function oi(e,t){e.indexOf(t)===-1&&e.push(t)}function ri(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const qe=(e,t,n)=>n>t?t:n<e?e:n;let ai=()=>{};const Ze={},Ba=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function za(e){return typeof e=="object"&&e!==null}const $a=e=>/^0[^.\s]+$/u.test(e);function li(e){let t;return()=>(t===void 0&&(t=e()),t)}const Fe=e=>e,tf=(e,t)=>n=>t(e(n)),rn=(...e)=>e.reduce(tf),Xt=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s};class ci{constructor(){this.subscriptions=[]}add(t){return oi(this.subscriptions,t),()=>ri(this.subscriptions,t)}notify(t,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,s);else for(let r=0;r<i;r++){const o=this.subscriptions[r];o&&o(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ke=e=>e*1e3,He=e=>e/1e3;function Ua(e,t){return t?e*(1e3/t):0}const Ka=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,nf=1e-7,sf=12;function of(e,t,n,s,i){let r,o,a=0;do o=t+(n-t)/2,r=Ka(o,s,i)-e,r>0?n=o:t=o;while(Math.abs(r)>nf&&++a<sf);return o}function an(e,t,n,s){if(e===t&&n===s)return Fe;const i=r=>of(r,0,1,e,n);return r=>r===0||r===1?r:Ka(i(r),t,s)}const Ha=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ga=e=>t=>1-e(1-t),Wa=an(.33,1.53,.69,.99),ui=Ga(Wa),Xa=Ha(ui),Ya=e=>(e*=2)<1?.5*ui(e):.5*(2-Math.pow(2,-10*(e-1))),di=e=>1-Math.sin(Math.acos(e)),qa=Ga(di),Za=Ha(di),rf=an(.42,0,1,1),af=an(0,0,.58,1),Ja=an(.42,0,.58,1),lf=e=>Array.isArray(e)&&typeof e[0]!="number",Qa=e=>Array.isArray(e)&&typeof e[0]=="number",cf={linear:Fe,easeIn:rf,easeInOut:Ja,easeOut:af,circIn:di,circInOut:Za,circOut:qa,backIn:ui,backInOut:Xa,backOut:Wa,anticipate:Ya},uf=e=>typeof e=="string",Zi=e=>{if(Qa(e)){ai(e.length===4);const[t,n,s,i]=e;return an(t,n,s,i)}else if(uf(e))return cf[e];return e},pn=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function df(e,t){let n=new Set,s=new Set,i=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(d.schedule(u),e()),u(a)}const d={schedule:(u,h=!1,m=!1)=>{const g=m&&i?n:s;return h&&o.add(u),g.has(u)||g.add(u),u},cancel:u=>{s.delete(u),o.delete(u)},process:u=>{if(a=u,i){r=!0;return}i=!0,[n,s]=[s,n],n.forEach(l),n.clear(),i=!1,r&&(r=!1,d.process(u))}};return d}const hf=40;function el(e,t){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,o=pn.reduce((C,T)=>(C[T]=df(r),C),{}),{setup:a,read:l,resolveKeyframes:d,preUpdate:u,update:h,preRender:m,render:p,postRender:g}=o,x=()=>{const C=Ze.useManualTiming?i.timestamp:performance.now();n=!1,Ze.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(C-i.timestamp,hf),1)),i.timestamp=C,i.isProcessing=!0,a.process(i),l.process(i),d.process(i),u.process(i),h.process(i),m.process(i),p.process(i),g.process(i),i.isProcessing=!1,n&&t&&(s=!1,e(x))},y=()=>{n=!0,s=!0,i.isProcessing||e(x)};return{schedule:pn.reduce((C,T)=>{const M=o[T];return C[T]=(k,S=!1,w=!1)=>(n||y(),M.schedule(k,S,w)),C},{}),cancel:C=>{for(let T=0;T<pn.length;T++)o[pn[T]].cancel(C)},state:i,steps:o}}const{schedule:ie,cancel:st,state:ge,steps:Jn}=el(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fe,!0);let Tn;function ff(){Tn=void 0}const Ae={now:()=>(Tn===void 0&&Ae.set(ge.isProcessing||Ze.useManualTiming?ge.timestamp:performance.now()),Tn),set:e=>{Tn=e,queueMicrotask(ff)}},tl=e=>t=>typeof t=="string"&&t.startsWith(e),hi=tl("--"),mf=tl("var(--"),fi=e=>mf(e)?pf.test(e.split("/*")[0].trim()):!1,pf=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,At={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Yt={...At,transform:e=>qe(0,1,e)},gn={...At,default:1},Bt=e=>Math.round(e*1e5)/1e5,mi=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gf(e){return e==null}const yf=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pi=(e,t)=>n=>!!(typeof n=="string"&&yf.test(n)&&n.startsWith(e)||t&&!gf(n)&&Object.prototype.hasOwnProperty.call(n,t)),nl=(e,t,n)=>s=>{if(typeof s!="string")return s;const[i,r,o,a]=s.match(mi);return{[e]:parseFloat(i),[t]:parseFloat(r),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},xf=e=>qe(0,255,e),Qn={...At,transform:e=>Math.round(xf(e))},ht={test:pi("rgb","red"),parse:nl("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+Qn.transform(e)+", "+Qn.transform(t)+", "+Qn.transform(n)+", "+Bt(Yt.transform(s))+")"};function vf(e){let t="",n="",s="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,s+=s,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const bs={test:pi("#"),parse:vf,transform:ht.transform},ln=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),tt=ln("deg"),Ge=ln("%"),V=ln("px"),bf=ln("vh"),Cf=ln("vw"),Ji={...Ge,parse:e=>Ge.parse(e)/100,transform:e=>Ge.transform(e*100)},vt={test:pi("hsl","hue"),parse:nl("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+Ge.transform(Bt(t))+", "+Ge.transform(Bt(n))+", "+Bt(Yt.transform(s))+")"},me={test:e=>ht.test(e)||bs.test(e)||vt.test(e),parse:e=>ht.test(e)?ht.parse(e):vt.test(e)?vt.parse(e):bs.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ht.transform(e):vt.transform(e),getAnimatableNone:e=>{const t=me.parse(e);return t.alpha=0,me.transform(t)}},Tf=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wf(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(mi))==null?void 0:t.length)||0)+(((n=e.match(Tf))==null?void 0:n.length)||0)>0}const sl="number",il="color",Mf="var",Sf="var(",Qi="${}",kf=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qt(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},i=[];let r=0;const a=t.replace(kf,l=>(me.test(l)?(s.color.push(r),i.push(il),n.push(me.parse(l))):l.startsWith(Sf)?(s.var.push(r),i.push(Mf),n.push(l)):(s.number.push(r),i.push(sl),n.push(parseFloat(l))),++r,Qi)).split(Qi);return{values:n,split:a,indexes:s,types:i}}function ol(e){return qt(e).values}function rl(e){const{split:t,types:n}=qt(e),s=t.length;return i=>{let r="";for(let o=0;o<s;o++)if(r+=t[o],i[o]!==void 0){const a=n[o];a===sl?r+=Bt(i[o]):a===il?r+=me.transform(i[o]):r+=i[o]}return r}}const jf=e=>typeof e=="number"?0:me.test(e)?me.getAnimatableNone(e):e;function Pf(e){const t=ol(e);return rl(e)(t.map(jf))}const it={test:wf,parse:ol,createTransformer:rl,getAnimatableNone:Pf};function es(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Af({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let i=0,r=0,o=0;if(!t)i=r=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;i=es(l,a,e+1/3),r=es(l,a,e),o=es(l,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:s}}function Nn(e,t){return n=>n>0?t:e}const ae=(e,t,n)=>e+(t-e)*n,ts=(e,t,n)=>{const s=e*e,i=n*(t*t-s)+s;return i<0?0:Math.sqrt(i)},Nf=[bs,ht,vt],Ef=e=>Nf.find(t=>t.test(e));function eo(e){const t=Ef(e);if(!t)return!1;let n=t.parse(e);return t===vt&&(n=Af(n)),n}const to=(e,t)=>{const n=eo(e),s=eo(t);if(!n||!s)return Nn(e,t);const i={...n};return r=>(i.red=ts(n.red,s.red,r),i.green=ts(n.green,s.green,r),i.blue=ts(n.blue,s.blue,r),i.alpha=ae(n.alpha,s.alpha,r),ht.transform(i))},Cs=new Set(["none","hidden"]);function Rf(e,t){return Cs.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Df(e,t){return n=>ae(e,t,n)}function gi(e){return typeof e=="number"?Df:typeof e=="string"?fi(e)?Nn:me.test(e)?to:_f:Array.isArray(e)?al:typeof e=="object"?me.test(e)?to:If:Nn}function al(e,t){const n=[...e],s=n.length,i=e.map((r,o)=>gi(r)(r,t[o]));return r=>{for(let o=0;o<s;o++)n[o]=i[o](r);return n}}function If(e,t){const n={...e,...t},s={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(s[i]=gi(e[i])(e[i],t[i]));return i=>{for(const r in s)n[r]=s[r](i);return n}}function Vf(e,t){const n=[],s={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const r=t.types[i],o=e.indexes[r][s[r]],a=e.values[o]??0;n[i]=a,s[r]++}return n}const _f=(e,t)=>{const n=it.createTransformer(t),s=qt(e),i=qt(t);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?Cs.has(e)&&!i.values.length||Cs.has(t)&&!s.values.length?Rf(e,t):rn(al(Vf(s,i),i.values),n):Nn(e,t)};function ll(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?ae(e,t,n):gi(e)(e,t)}const Ff=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>ie.update(t,n),stop:()=>st(t),now:()=>ge.isProcessing?ge.timestamp:Ae.now()}},cl=(e,t,n=10)=>{let s="";const i=Math.max(Math.round(t/n),2);for(let r=0;r<i;r++)s+=Math.round(e(r/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},En=2e4;function yi(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<En;)t+=n,s=e.next(t);return t>=En?1/0:t}function Lf(e,t=100,n){const s=n({...e,keyframes:[0,t]}),i=Math.min(yi(s),En);return{type:"keyframes",ease:r=>s.next(i*r).value/t,duration:He(i)}}const Of=5;function ul(e,t,n){const s=Math.max(t-Of,0);return Ua(n-e(s),t-s)}const ce={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},no=.001;function Bf({duration:e=ce.duration,bounce:t=ce.bounce,velocity:n=ce.velocity,mass:s=ce.mass}){let i,r,o=1-t;o=qe(ce.minDamping,ce.maxDamping,o),e=qe(ce.minDuration,ce.maxDuration,He(e)),o<1?(i=d=>{const u=d*o,h=u*e,m=u-n,p=Ts(d,o),g=Math.exp(-h);return no-m/p*g},r=d=>{const h=d*o*e,m=h*n+n,p=Math.pow(o,2)*Math.pow(d,2)*e,g=Math.exp(-h),x=Ts(Math.pow(d,2),o);return(-i(d)+no>0?-1:1)*((m-p)*g)/x}):(i=d=>{const u=Math.exp(-d*e),h=(d-n)*e+1;return-.001+u*h},r=d=>{const u=Math.exp(-d*e),h=(n-d)*(e*e);return u*h});const a=5/e,l=$f(i,r,a);if(e=Ke(e),isNaN(l))return{stiffness:ce.stiffness,damping:ce.damping,duration:e};{const d=Math.pow(l,2)*s;return{stiffness:d,damping:o*2*Math.sqrt(s*d),duration:e}}}const zf=12;function $f(e,t,n){let s=n;for(let i=1;i<zf;i++)s=s-e(s)/t(s);return s}function Ts(e,t){return e*Math.sqrt(1-t*t)}const Uf=["duration","bounce"],Kf=["stiffness","damping","mass"];function so(e,t){return t.some(n=>e[n]!==void 0)}function Hf(e){let t={velocity:ce.velocity,stiffness:ce.stiffness,damping:ce.damping,mass:ce.mass,isResolvedFromDuration:!1,...e};if(!so(e,Kf)&&so(e,Uf))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,r=2*qe(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:ce.mass,stiffness:i,damping:r}}else{const n=Bf(e);t={...t,...n,mass:ce.mass},t.isResolvedFromDuration=!0}return t}function Rn(e=ce.visualDuration,t=ce.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:i}=n;const r=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:r},{stiffness:l,damping:d,mass:u,duration:h,velocity:m,isResolvedFromDuration:p}=Hf({...n,velocity:-He(n.velocity||0)}),g=m||0,x=d/(2*Math.sqrt(l*u)),y=o-r,b=He(Math.sqrt(l/u)),v=Math.abs(y)<5;s||(s=v?ce.restSpeed.granular:ce.restSpeed.default),i||(i=v?ce.restDelta.granular:ce.restDelta.default);let C;if(x<1){const M=Ts(b,x);C=k=>{const S=Math.exp(-x*b*k);return o-S*((g+x*b*y)/M*Math.sin(M*k)+y*Math.cos(M*k))}}else if(x===1)C=M=>o-Math.exp(-b*M)*(y+(g+b*y)*M);else{const M=b*Math.sqrt(x*x-1);C=k=>{const S=Math.exp(-x*b*k),w=Math.min(M*k,300);return o-S*((g+x*b*y)*Math.sinh(w)+M*y*Math.cosh(w))/M}}const T={calculatedDuration:p&&h||null,next:M=>{const k=C(M);if(p)a.done=M>=h;else{let S=M===0?g:0;x<1&&(S=M===0?Ke(g):ul(C,M,k));const w=Math.abs(S)<=s,A=Math.abs(o-k)<=i;a.done=w&&A}return a.value=a.done?o:k,a},toString:()=>{const M=Math.min(yi(T),En),k=cl(S=>T.next(M*S).value,M,30);return M+"ms "+k},toTransition:()=>{}};return T}Rn.applyToOptions=e=>{const t=Lf(e,100,Rn);return e.ease=t.ease,e.duration=Ke(t.duration),e.type="keyframes",e};function ws({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:d=.5,restSpeed:u}){const h=e[0],m={done:!1,value:h},p=w=>a!==void 0&&w<a||l!==void 0&&w>l,g=w=>a===void 0?l:l===void 0||Math.abs(a-w)<Math.abs(l-w)?a:l;let x=n*t;const y=h+x,b=o===void 0?y:o(y);b!==y&&(x=b-h);const v=w=>-x*Math.exp(-w/s),C=w=>b+v(w),T=w=>{const A=v(w),F=C(w);m.done=Math.abs(A)<=d,m.value=m.done?b:F};let M,k;const S=w=>{p(m.value)&&(M=w,k=Rn({keyframes:[m.value,g(m.value)],velocity:ul(C,w,m.value),damping:i,stiffness:r,restDelta:d,restSpeed:u}))};return S(0),{calculatedDuration:null,next:w=>{let A=!1;return!k&&M===void 0&&(A=!0,T(w),S(w)),M!==void 0&&w>=M?k.next(w-M):(!A&&T(w),m)}}}function Gf(e,t,n){const s=[],i=n||Ze.mix||ll,r=e.length-1;for(let o=0;o<r;o++){let a=i(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||Fe:t;a=rn(l,a)}s.push(a)}return s}function Wf(e,t,{clamp:n=!0,ease:s,mixer:i}={}){const r=e.length;if(ai(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=Gf(t,s,i),l=a.length,d=u=>{if(o&&u<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const m=Xt(e[h],e[h+1],u);return a[h](m)};return n?u=>d(qe(e[0],e[r-1],u)):d}function Xf(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const i=Xt(0,t,s);e.push(ae(n,1,i))}}function Yf(e){const t=[0];return Xf(t,e.length-1),t}function qf(e,t){return e.map(n=>n*t)}function Zf(e,t){return e.map(()=>t||Ja).splice(0,e.length-1)}function zt({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const i=lf(s)?s.map(Zi):Zi(s),r={done:!1,value:t[0]},o=qf(n&&n.length===t.length?n:Yf(t),e),a=Wf(o,t,{ease:Array.isArray(i)?i:Zf(t,i)});return{calculatedDuration:e,next:l=>(r.value=a(l),r.done=l>=e,r)}}const Jf=e=>e!==null;function xi(e,{repeat:t,repeatType:n="loop"},s,i=1){const r=e.filter(Jf),a=i<0||t&&n!=="loop"&&t%2===1?0:r.length-1;return!a||s===void 0?r[a]:s}const Qf={decay:ws,inertia:ws,tween:zt,keyframes:zt,spring:Rn};function dl(e){typeof e.type=="string"&&(e.type=Qf[e.type])}class vi{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const em=e=>e/100;class bi extends vi{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Ae.now()&&this.tick(Ae.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(s=this.options).onStop)==null||i.call(s))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;dl(t);const{type:n=zt,repeat:s=0,repeatDelay:i=0,repeatType:r,velocity:o=0}=t;let{keyframes:a}=t;const l=n||zt;l!==zt&&typeof a[0]!="number"&&(this.mixKeyframes=rn(em,ll(a[0],a[1])),a=[0,100]);const d=l({...t,keyframes:a});r==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=yi(d));const{calculatedDuration:u}=d;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=d}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:s,totalDuration:i,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return s.next(0);const{delay:d=0,keyframes:u,repeat:h,repeatType:m,repeatDelay:p,type:g,onUpdate:x,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const b=this.currentTime-d*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?b<0:b>i;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let C=this.currentTime,T=s;if(h){const w=Math.min(this.currentTime,i)/a;let A=Math.floor(w),F=w%1;!F&&w>=1&&(F=1),F===1&&A--,A=Math.min(A,h+1),!!(A%2)&&(m==="reverse"?(F=1-F,p&&(F-=p/a)):m==="mirror"&&(T=o)),C=qe(0,1,F)*a}const M=v?{done:!1,value:u[0]}:T.next(C);r&&(M.value=r(M.value));let{done:k}=M;!v&&l!==null&&(k=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return S&&g!==ws&&(M.value=xi(u,this.options,y,this.speed)),x&&x(M.value),S&&this.finish(),M}then(t,n){return this.finished.then(t,n)}get duration(){return He(this.calculatedDuration)}get time(){return He(this.currentTime)}set time(t){var n;t=Ke(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ae.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=He(this.currentTime))}play(){var i,r;if(this.isStopped)return;const{driver:t=Ff,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(r=(i=this.options).onPlay)==null||r.call(i);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ae.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function tm(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const ft=e=>e*180/Math.PI,Ms=e=>{const t=ft(Math.atan2(e[1],e[0]));return Ss(t)},nm={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Ms,rotateZ:Ms,skewX:e=>ft(Math.atan(e[1])),skewY:e=>ft(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Ss=e=>(e=e%360,e<0&&(e+=360),e),io=Ms,oo=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ro=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),sm={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:oo,scaleY:ro,scale:e=>(oo(e)+ro(e))/2,rotateX:e=>Ss(ft(Math.atan2(e[6],e[5]))),rotateY:e=>Ss(ft(Math.atan2(-e[2],e[0]))),rotateZ:io,rotate:io,skewX:e=>ft(Math.atan(e[4])),skewY:e=>ft(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ks(e){return e.includes("scale")?1:0}function js(e,t){if(!e||e==="none")return ks(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(n)s=sm,i=n;else{const a=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=nm,i=a}if(!i)return ks(t);const r=s[t],o=i[1].split(",").map(om);return typeof r=="function"?r(o):o[r]}const im=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return js(n,t)};function om(e){return parseFloat(e.trim())}const Nt=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Et=new Set(Nt),ao=e=>e===At||e===V,rm=new Set(["x","y","z"]),am=Nt.filter(e=>!rm.has(e));function lm(e){const t=[];return am.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const mt={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>js(t,"x"),y:(e,{transform:t})=>js(t,"y")};mt.translateX=mt.x;mt.translateY=mt.y;const pt=new Set;let Ps=!1,As=!1,Ns=!1;function hl(){if(As){const e=Array.from(pt).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const i=lm(s);i.length&&(n.set(s,i),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([r,o])=>{var a;(a=s.getValue(r))==null||a.set(o)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}As=!1,Ps=!1,pt.forEach(e=>e.complete(Ns)),pt.clear()}function fl(){pt.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(As=!0)})}function cm(){Ns=!0,fl(),hl(),Ns=!1}class Ci{constructor(t,n,s,i,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=i,this.element=r,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(pt.add(this),Ps||(Ps=!0,ie.read(fl),ie.resolveKeyframes(hl))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:i}=this;if(t[0]===null){const r=i==null?void 0:i.get(),o=t[t.length-1];if(r!==void 0)t[0]=r;else if(s&&n){const a=s.readValue(n,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),i&&r===void 0&&i.set(t[0])}tm(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),pt.delete(this)}cancel(){this.state==="scheduled"&&(pt.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const um=e=>e.startsWith("--");function dm(e,t,n){um(t)?e.style.setProperty(t,n):e.style[t]=n}const hm=li(()=>window.ScrollTimeline!==void 0),fm={};function mm(e,t){const n=li(e);return()=>fm[t]??n()}const ml=mm(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ot=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,lo={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ot([0,.65,.55,1]),circOut:Ot([.55,0,1,.45]),backIn:Ot([.31,.01,.66,-.59]),backOut:Ot([.33,1.53,.69,.99])};function pl(e,t){if(e)return typeof e=="function"?ml()?cl(e,t):"ease-out":Qa(e)?Ot(e):Array.isArray(e)?e.map(n=>pl(n,t)||lo.easeOut):lo[e]}function pm(e,t,n,{delay:s=0,duration:i=300,repeat:r=0,repeatType:o="loop",ease:a="easeOut",times:l}={},d=void 0){const u={[t]:n};l&&(u.offset=l);const h=pl(a,i);Array.isArray(h)&&(u.easing=h);const m={delay:s,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),e.animate(u,m)}function gl(e){return typeof e=="function"&&"applyToOptions"in e}function gm({type:e,...t}){return gl(e)&&ml()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class ym extends vi{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:s,keyframes:i,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!r,this.allowFlatten=o,this.options=t,ai(typeof t.type!="string");const d=gm(t);this.animation=pm(n,s,i,d,r),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const u=xi(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):dm(n,s,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,s;const t=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return He(Number(t))}get time(){return He(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ke(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&hm()?(this.animation.timeline=t,Fe):n(this)}}const yl={anticipate:Ya,backInOut:Xa,circInOut:Za};function xm(e){return e in yl}function vm(e){typeof e.ease=="string"&&xm(e.ease)&&(e.ease=yl[e.ease])}const co=10;class bm extends ym{constructor(t){vm(t),dl(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:s,onComplete:i,element:r,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const a=new bi({...o,autoplay:!1}),l=Ke(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-co).value,a.sample(l).value,co),a.stop()}}const uo=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(it.test(e)||e==="0")&&!e.startsWith("url("));function Cm(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Tm(e,t,n,s){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const r=e[e.length-1],o=uo(i,t),a=uo(r,t);return!o||!a?!1:Cm(e)||(n==="spring"||gl(n))&&s}const wm=new Set(["opacity","clipPath","filter","transform"]),Mm=li(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Sm(e){var u;const{motionValue:t,name:n,repeatDelay:s,repeatType:i,damping:r,type:o}=e;if(!(((u=t==null?void 0:t.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:d}=t.owner.getProps();return Mm()&&n&&wm.has(n)&&(n!=="transform"||!d)&&!l&&!s&&i!=="mirror"&&r!==0&&o!=="inertia"}const km=40;class jm extends vi{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o="loop",keyframes:a,name:l,motionValue:d,element:u,...h}){var g;super(),this.stop=()=>{var x,y;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=Ae.now();const m={autoplay:t,delay:n,type:s,repeat:i,repeatDelay:r,repeatType:o,name:l,motionValue:d,element:u,...h},p=(u==null?void 0:u.KeyframeResolver)||Ci;this.keyframeResolver=new p(a,(x,y,b)=>this.onKeyframesResolved(x,y,m,!b),l,d,u),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(t,n,s,i){this.keyframeResolver=void 0;const{name:r,type:o,velocity:a,delay:l,isHandoff:d,onUpdate:u}=s;this.resolvedAt=Ae.now(),Tm(t,r,o,a)||((Ze.instantAnimations||!l)&&(u==null||u(xi(t,s,n))),t[0]=t[t.length-1],s.duration=0,s.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>km?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:t},p=!d&&Sm(m)?new bm({...m,element:m.motionValue.owner.current}):new bi(m);p.finished.then(()=>this.notifyFinished()).catch(Fe),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),cm()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const Pm=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Am(e){const t=Pm.exec(e);if(!t)return[,];const[,n,s,i]=t;return[`--${n??s}`,i]}function xl(e,t,n=1){const[s,i]=Am(e);if(!s)return;const r=window.getComputedStyle(t).getPropertyValue(s);if(r){const o=r.trim();return Ba(o)?parseFloat(o):o}return fi(i)?xl(i,t,n+1):i}function Ti(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const vl=new Set(["width","height","top","left","right","bottom",...Nt]),Nm={test:e=>e==="auto",parse:e=>e},bl=e=>t=>t.test(e),Cl=[At,V,Ge,tt,Cf,bf,Nm],ho=e=>Cl.find(bl(e));function Em(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||$a(e):!0}const Rm=new Set(["brightness","contrast","saturate","opacity"]);function Dm(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(mi)||[];if(!s)return e;const i=n.replace(s,"");let r=Rm.has(t)?1:0;return s!==n&&(r*=100),t+"("+r+i+")"}const Im=/\b([a-z-]*)\(.*?\)/gu,Es={...it,getAnimatableNone:e=>{const t=e.match(Im);return t?t.map(Dm).join(" "):e}},fo={...At,transform:Math.round},Vm={rotate:tt,rotateX:tt,rotateY:tt,rotateZ:tt,scale:gn,scaleX:gn,scaleY:gn,scaleZ:gn,skew:tt,skewX:tt,skewY:tt,distance:V,translateX:V,translateY:V,translateZ:V,x:V,y:V,z:V,perspective:V,transformPerspective:V,opacity:Yt,originX:Ji,originY:Ji,originZ:V},wi={borderWidth:V,borderTopWidth:V,borderRightWidth:V,borderBottomWidth:V,borderLeftWidth:V,borderRadius:V,radius:V,borderTopLeftRadius:V,borderTopRightRadius:V,borderBottomRightRadius:V,borderBottomLeftRadius:V,width:V,maxWidth:V,height:V,maxHeight:V,top:V,right:V,bottom:V,left:V,padding:V,paddingTop:V,paddingRight:V,paddingBottom:V,paddingLeft:V,margin:V,marginTop:V,marginRight:V,marginBottom:V,marginLeft:V,backgroundPositionX:V,backgroundPositionY:V,...Vm,zIndex:fo,fillOpacity:Yt,strokeOpacity:Yt,numOctaves:fo},_m={...wi,color:me,backgroundColor:me,outlineColor:me,fill:me,stroke:me,borderColor:me,borderTopColor:me,borderRightColor:me,borderBottomColor:me,borderLeftColor:me,filter:Es,WebkitFilter:Es},Tl=e=>_m[e];function wl(e,t){let n=Tl(e);return n!==Es&&(n=it),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Fm=new Set(["auto","none","0"]);function Lm(e,t,n){let s=0,i;for(;s<e.length&&!i;){const r=e[s];typeof r=="string"&&!Fm.has(r)&&qt(r).values.length&&(i=e[s]),s++}if(i&&n)for(const r of t)e[r]=wl(n,i)}class Om extends Ci{constructor(t,n,s,i,r){super(t,n,s,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let d=t[l];if(typeof d=="string"&&(d=d.trim(),fi(d))){const u=xl(d,n.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!vl.has(s)||t.length!==2)return;const[i,r]=t,o=ho(i),a=ho(r);if(o!==a)if(ao(o)&&ao(a))for(let l=0;l<t.length;l++){const d=t[l];typeof d=="string"&&(t[l]=parseFloat(d))}else mt[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let i=0;i<t.length;i++)(t[i]===null||Em(t[i]))&&s.push(i);s.length&&Lm(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=mt[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(s,i).jump(i,!1)}measureEndState(){var a;const{element:t,name:n,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const r=s.length-1,o=s[r];s[r]=mt[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,d])=>{t.getValue(l).set(d)}),this.resolveNoneKeyframes()}}function Bm(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let s=document;const i=(n==null?void 0:n[e])??s.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const Ml=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Sl(e){return za(e)&&"offsetHeight"in e}const mo=30,zm=e=>!isNaN(parseFloat(e));class $m{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,i=!0)=>{var o,a;const r=Ae.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();i&&((a=this.events.renderRequest)==null||a.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Ae.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=zm(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new ci);const s=this.events[t].add(n);return t==="change"?()=>{s(),ie.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ae.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>mo)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,mo);return Ua(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function St(e,t){return new $m(e,t)}const{schedule:Mi}=el(queueMicrotask,!1),ze={x:!1,y:!1};function kl(){return ze.x||ze.y}function Um(e){return e==="x"||e==="y"?ze[e]?null:(ze[e]=!0,()=>{ze[e]=!1}):ze.x||ze.y?null:(ze.x=ze.y=!0,()=>{ze.x=ze.y=!1})}function jl(e,t){const n=Bm(e),s=new AbortController,i={passive:!0,...t,signal:s.signal};return[n,i,()=>s.abort()]}function po(e){return!(e.pointerType==="touch"||kl())}function Km(e,t,n={}){const[s,i,r]=jl(e,n),o=a=>{if(!po(a))return;const{target:l}=a,d=t(l,a);if(typeof d!="function"||!l)return;const u=h=>{po(h)&&(d(h),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return s.forEach(a=>{a.addEventListener("pointerenter",o,i)}),r}const Pl=(e,t)=>t?e===t?!0:Pl(e,t.parentElement):!1,Si=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Hm=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Gm(e){return Hm.has(e.tagName)||e.tabIndex!==-1}const wn=new WeakSet;function go(e){return t=>{t.key==="Enter"&&e(t)}}function ns(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Wm=(e,t)=>{const n=e.currentTarget;if(!n)return;const s=go(()=>{if(wn.has(n))return;ns(n,"down");const i=go(()=>{ns(n,"up")}),r=()=>ns(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",r,t)});n.addEventListener("keydown",s,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),t)};function yo(e){return Si(e)&&!kl()}function Xm(e,t,n={}){const[s,i,r]=jl(e,n),o=a=>{const l=a.currentTarget;if(!yo(a))return;wn.add(l);const d=t(l,a),u=(p,g)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),wn.has(l)&&wn.delete(l),yo(p)&&typeof d=="function"&&d(p,{success:g})},h=p=>{u(p,l===window||l===document||n.useGlobalTarget||Pl(l,p.target))},m=p=>{u(p,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",m,i)};return s.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),Sl(a)&&(a.addEventListener("focus",d=>Wm(d,i)),!Gm(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),r}function Al(e){return za(e)&&"ownerSVGElement"in e}function Ym(e){return Al(e)&&e.tagName==="svg"}const Te=e=>!!(e&&e.getVelocity),qm=[...Cl,me,it],Zm=e=>qm.find(bl(e)),ki=f.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Jm extends f.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=n.offsetParent,i=Sl(s)&&s.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=i-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Qm({children:e,isPresent:t,anchorX:n,root:s}){const i=f.useId(),r=f.useRef(null),o=f.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=f.useContext(ki);return f.useInsertionEffect(()=>{const{width:l,height:d,top:u,left:h,right:m}=o.current;if(t||!r.current||!l||!d)return;const p=n==="left"?`left: ${h}`:`right: ${m}`;r.current.dataset.motionPopId=i;const g=document.createElement("style");a&&(g.nonce=a);const x=s??document.head;return x.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${d}px !important;
            ${p}px !important;
            top: ${u}px !important;
          }
        `),()=>{x.removeChild(g),x.contains(g)&&x.removeChild(g)}},[t]),c.jsx(Jm,{isPresent:t,childRef:r,sizeRef:o,children:f.cloneElement(e,{ref:r})})}const ep=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:r,mode:o,anchorX:a,root:l})=>{const d=si(tp),u=f.useId();let h=!0,m=f.useMemo(()=>(h=!1,{id:u,initial:t,isPresent:n,custom:i,onExitComplete:p=>{d.set(p,!0);for(const g of d.values())if(!g)return;s&&s()},register:p=>(d.set(p,!1),()=>d.delete(p))}),[n,d,s]);return r&&h&&(m={...m}),f.useMemo(()=>{d.forEach((p,g)=>d.set(g,!1))},[n]),f.useEffect(()=>{!n&&!d.size&&s&&s()},[n]),o==="popLayout"&&(e=c.jsx(Qm,{isPresent:n,anchorX:a,root:l,children:e})),c.jsx(Bn.Provider,{value:m,children:e})};function tp(){return new Map}function Nl(e=!0){const t=f.useContext(Bn);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=t,r=f.useId();f.useEffect(()=>{if(e)return i(r)},[e]);const o=f.useCallback(()=>e&&s&&s(r),[r,s,e]);return!n&&s?[!1,o]:[!0]}const yn=e=>e.key||"";function xo(e){const t=[];return f.Children.forEach(e,n=>{f.isValidElement(n)&&t.push(n)}),t}const np=({children:e,custom:t,initial:n=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:r="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[d,u]=Nl(o),h=f.useMemo(()=>xo(e),[e]),m=o&&!d?[]:h.map(yn),p=f.useRef(!0),g=f.useRef(h),x=si(()=>new Map),[y,b]=f.useState(h),[v,C]=f.useState(h);Oa(()=>{p.current=!1,g.current=h;for(let k=0;k<v.length;k++){const S=yn(v[k]);m.includes(S)?x.delete(S):x.get(S)!==!0&&x.set(S,!1)}},[v,m.length,m.join("-")]);const T=[];if(h!==y){let k=[...h];for(let S=0;S<v.length;S++){const w=v[S],A=yn(w);m.includes(A)||(k.splice(S,0,w),T.push(w))}return r==="wait"&&T.length&&(k=T),C(xo(k)),b(h),null}const{forceRender:M}=f.useContext(ni);return c.jsx(c.Fragment,{children:v.map(k=>{const S=yn(k),w=o&&!d?!1:h===v||m.includes(S),A=()=>{if(x.has(S))x.set(S,!0);else return;let F=!0;x.forEach($=>{$||(F=!1)}),F&&(M==null||M(),C(g.current),o&&(u==null||u()),s&&s())};return c.jsx(ep,{isPresent:w,initial:!p.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:r,root:l,onExitComplete:w?void 0:A,anchorX:a,children:k},S)})})},El=f.createContext({strict:!1}),vo={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},kt={};for(const e in vo)kt[e]={isEnabled:t=>vo[e].some(n=>!!t[n])};function sp(e){for(const t in e)kt[t]={...kt[t],...e[t]}}const ip=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dn(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||ip.has(e)}let Rl=e=>!Dn(e);function op(e){typeof e=="function"&&(Rl=t=>t.startsWith("on")?!Dn(t):e(t))}try{op(require("@emotion/is-prop-valid").default)}catch{}function rp(e,t,n){const s={};for(const i in e)i==="values"&&typeof e.values=="object"||(Rl(i)||n===!0&&Dn(i)||!t&&!Dn(i)||e.draggable&&i.startsWith("onDrag"))&&(s[i]=e[i]);return s}const zn=f.createContext({});function $n(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Zt(e){return typeof e=="string"||Array.isArray(e)}const ji=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Pi=["initial",...ji];function Un(e){return $n(e.animate)||Pi.some(t=>Zt(e[t]))}function Dl(e){return!!(Un(e)||e.variants)}function ap(e,t){if(Un(e)){const{initial:n,animate:s}=e;return{initial:n===!1||Zt(n)?n:void 0,animate:Zt(s)?s:void 0}}return e.inherit!==!1?t:{}}function lp(e){const{initial:t,animate:n}=ap(e,f.useContext(zn));return f.useMemo(()=>({initial:t,animate:n}),[bo(t),bo(n)])}function bo(e){return Array.isArray(e)?e.join(" "):e}const Jt={};function cp(e){for(const t in e)Jt[t]=e[t],hi(t)&&(Jt[t].isCSSVariable=!0)}function Il(e,{layout:t,layoutId:n}){return Et.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Jt[e]||e==="opacity")}const up={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},dp=Nt.length;function hp(e,t,n){let s="",i=!0;for(let r=0;r<dp;r++){const o=Nt[r],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const d=Ml(a,wi[o]);if(!l){i=!1;const u=up[o]||o;s+=`${u}(${d}) `}n&&(t[o]=d)}}return s=s.trim(),n?s=n(t,i?"":s):i&&(s="none"),s}function Ai(e,t,n){const{style:s,vars:i,transformOrigin:r}=e;let o=!1,a=!1;for(const l in t){const d=t[l];if(Et.has(l)){o=!0;continue}else if(hi(l)){i[l]=d;continue}else{const u=Ml(d,wi[l]);l.startsWith("origin")?(a=!0,r[l]=u):s[l]=u}}if(t.transform||(o||n?s.transform=hp(t,e.transform,n):s.transform&&(s.transform="none")),a){const{originX:l="50%",originY:d="50%",originZ:u=0}=r;s.transformOrigin=`${l} ${d} ${u}`}}const Ni=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Vl(e,t,n){for(const s in t)!Te(t[s])&&!Il(s,n)&&(e[s]=t[s])}function fp({transformTemplate:e},t){return f.useMemo(()=>{const n=Ni();return Ai(n,t,e),Object.assign({},n.vars,n.style)},[t])}function mp(e,t){const n=e.style||{},s={};return Vl(s,n,e),Object.assign(s,fp(e,t)),s}function pp(e,t){const n={},s=mp(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const gp={offset:"stroke-dashoffset",array:"stroke-dasharray"},yp={offset:"strokeDashoffset",array:"strokeDasharray"};function xp(e,t,n=1,s=0,i=!0){e.pathLength=1;const r=i?gp:yp;e[r.offset]=V.transform(-s);const o=V.transform(t),a=V.transform(n);e[r.array]=`${o} ${a}`}function _l(e,{attrX:t,attrY:n,attrScale:s,pathLength:i,pathSpacing:r=1,pathOffset:o=0,...a},l,d,u){if(Ai(e,a,d),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m}=e;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),s!==void 0&&(h.scale=s),i!==void 0&&xp(h,i,r,o,!1)}const Fl=()=>({...Ni(),attrs:{}}),Ll=e=>typeof e=="string"&&e.toLowerCase()==="svg";function vp(e,t,n,s){const i=f.useMemo(()=>{const r=Fl();return _l(r,t,Ll(s),e.transformTemplate,e.style),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const r={};Vl(r,e.style,e),i.style={...r,...i.style}}return i}const bp=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ei(e){return typeof e!="string"||e.includes("-")?!1:!!(bp.indexOf(e)>-1||/[A-Z]/u.test(e))}function Cp(e,t,n,{latestValues:s},i,r=!1){const a=(Ei(e)?vp:pp)(t,s,i,e),l=rp(t,typeof e=="string",r),d=e!==f.Fragment?{...l,...a,ref:n}:{},{children:u}=t,h=f.useMemo(()=>Te(u)?u.get():u,[u]);return f.createElement(e,{...d,children:h})}function Co(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function Ri(e,t,n,s){if(typeof t=="function"){const[i,r]=Co(s);t=t(n!==void 0?n:e.custom,i,r)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,r]=Co(s);t=t(n!==void 0?n:e.custom,i,r)}return t}function Mn(e){return Te(e)?e.get():e}function Tp({scrapeMotionValuesFromProps:e,createRenderState:t},n,s,i){return{latestValues:wp(n,s,i,e),renderState:t()}}function wp(e,t,n,s){const i={},r=s(e,{});for(const m in r)i[m]=Mn(r[m]);let{initial:o,animate:a}=e;const l=Un(e),d=Dl(e);t&&d&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!$n(h)){const m=Array.isArray(h)?h:[h];for(let p=0;p<m.length;p++){const g=Ri(e,m[p]);if(g){const{transitionEnd:x,transition:y,...b}=g;for(const v in b){let C=b[v];if(Array.isArray(C)){const T=u?C.length-1:0;C=C[T]}C!==null&&(i[v]=C)}for(const v in x)i[v]=x[v]}}}return i}const Ol=e=>(t,n)=>{const s=f.useContext(zn),i=f.useContext(Bn),r=()=>Tp(e,t,s,i);return n?r():si(r)};function Di(e,t,n){var r;const{style:s}=e,i={};for(const o in s)(Te(s[o])||t.style&&Te(t.style[o])||Il(o,e)||((r=n==null?void 0:n.getValue(o))==null?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}const Mp=Ol({scrapeMotionValuesFromProps:Di,createRenderState:Ni});function Bl(e,t,n){const s=Di(e,t,n);for(const i in e)if(Te(e[i])||Te(t[i])){const r=Nt.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[r]=e[i]}return s}const Sp=Ol({scrapeMotionValuesFromProps:Bl,createRenderState:Fl}),kp=Symbol.for("motionComponentSymbol");function bt(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function jp(e,t,n){return f.useCallback(s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):bt(n)&&(n.current=s))},[t])}const Ii=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Pp="framerAppearId",zl="data-"+Ii(Pp),$l=f.createContext({});function Ap(e,t,n,s,i){var x,y;const{visualElement:r}=f.useContext(zn),o=f.useContext(El),a=f.useContext(Bn),l=f.useContext(ki).reducedMotion,d=f.useRef(null);s=s||o.renderer,!d.current&&s&&(d.current=s(e,{visualState:t,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=d.current,h=f.useContext($l);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&Np(d.current,n,i,h);const m=f.useRef(!1);f.useInsertionEffect(()=>{u&&m.current&&u.update(n,a)});const p=n[zl],g=f.useRef(!!p&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,p))&&((y=window.MotionHasOptimisedAnimation)==null?void 0:y.call(window,p)));return Oa(()=>{u&&(m.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),g.current&&u.animationState&&u.animationState.animateChanges())}),f.useEffect(()=>{u&&(!g.current&&u.animationState&&u.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,p)}),g.current=!1))}),u}function Np(e,t,n,s){const{layoutId:i,layout:r,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:d,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Ul(e.parent)),e.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!o||a&&bt(a),visualElement:e,animationType:typeof r=="string"?r:"both",initialPromotionConfig:s,crossfade:u,layoutScroll:l,layoutRoot:d})}function Ul(e){if(e)return e.options.allowProjection!==!1?e.projection:Ul(e.parent)}function ss(e,{forwardMotionProps:t=!1}={},n,s){n&&sp(n);const i=Ei(e)?Sp:Mp;function r(a,l){let d;const u={...f.useContext(ki),...a,layoutId:Ep(a)},{isStatic:h}=u,m=lp(a),p=i(a,h);if(!h&&ii){Rp();const g=Dp(u);d=g.MeasureLayout,m.visualElement=Ap(e,p,u,s,g.ProjectionNode)}return c.jsxs(zn.Provider,{value:m,children:[d&&m.visualElement?c.jsx(d,{visualElement:m.visualElement,...u}):null,Cp(e,a,jp(p,m.visualElement,l),p,h,t)]})}r.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=f.forwardRef(r);return o[kp]=e,o}function Ep({layoutId:e}){const t=f.useContext(ni).id;return t&&e!==void 0?t+"-"+e:e}function Rp(e,t){f.useContext(El).strict}function Dp(e){const{drag:t,layout:n}=kt;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function Ip(e,t){if(typeof Proxy>"u")return ss;const n=new Map,s=(r,o)=>ss(r,o,e,t),i=(r,o)=>s(r,o);return new Proxy(i,{get:(r,o)=>o==="create"?s:(n.has(o)||n.set(o,ss(o,void 0,e,t)),n.get(o))})}function Kl({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function Vp({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function _p(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function is(e){return e===void 0||e===1}function Rs({scale:e,scaleX:t,scaleY:n}){return!is(e)||!is(t)||!is(n)}function ut(e){return Rs(e)||Hl(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Hl(e){return To(e.x)||To(e.y)}function To(e){return e&&e!=="0%"}function In(e,t,n){const s=e-n,i=t*s;return n+i}function wo(e,t,n,s,i){return i!==void 0&&(e=In(e,i,s)),In(e,n,s)+t}function Ds(e,t=0,n=1,s,i){e.min=wo(e.min,t,n,s,i),e.max=wo(e.max,t,n,s,i)}function Gl(e,{x:t,y:n}){Ds(e.x,t.translate,t.scale,t.originPoint),Ds(e.y,n.translate,n.scale,n.originPoint)}const Mo=.999999999999,So=1.0000000000001;function Fp(e,t,n,s=!1){const i=n.length;if(!i)return;t.x=t.y=1;let r,o;for(let a=0;a<i;a++){r=n[a],o=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Tt(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Gl(e,o)),s&&ut(r.latestValues)&&Tt(e,r.latestValues))}t.x<So&&t.x>Mo&&(t.x=1),t.y<So&&t.y>Mo&&(t.y=1)}function Ct(e,t){e.min=e.min+t,e.max=e.max+t}function ko(e,t,n,s,i=.5){const r=ae(e.min,e.max,i);Ds(e,t,n,r,s)}function Tt(e,t){ko(e.x,t.x,t.scaleX,t.scale,t.originX),ko(e.y,t.y,t.scaleY,t.scale,t.originY)}function Wl(e,t){return Kl(_p(e.getBoundingClientRect(),t))}function Lp(e,t,n){const s=Wl(e,n),{scroll:i}=t;return i&&(Ct(s.x,i.offset.x),Ct(s.y,i.offset.y)),s}const jo=()=>({translate:0,scale:1,origin:0,originPoint:0}),wt=()=>({x:jo(),y:jo()}),Po=()=>({min:0,max:0}),de=()=>({x:Po(),y:Po()}),Is={current:null},Xl={current:!1};function Op(){if(Xl.current=!0,!!ii)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Is.current=e.matches;e.addEventListener("change",t),t()}else Is.current=!1}const Bp=new WeakMap;function zp(e,t,n){for(const s in t){const i=t[s],r=n[s];if(Te(i))e.addValue(s,i);else if(Te(r))e.addValue(s,St(i,{owner:e}));else if(r!==i)if(e.hasValue(s)){const o=e.getValue(s);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(s);e.addValue(s,St(o!==void 0?o:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const Ao=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $p{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ci,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Ae.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ie.render(this.render,!1,!0))};const{latestValues:l,renderState:d}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=Un(n),this.isVariantNode=Dl(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const p=h[m];l[m]!==void 0&&Te(p)&&p.set(l[m],!1)}}mount(t){this.current=t,Bp.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),Xl.current||Op(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Is.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),st(this.notifyUpdate),st(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=Et.has(t);s&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&ie.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),r=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),r(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in kt){const n=kt[t];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[t]&&i&&s(this.props)&&(this.features[t]=new i(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):de()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Ao.length;s++){const i=Ao[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,o=t[r];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=zp(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=St(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(Ba(s)||$a(s))?s=parseFloat(s):!Zm(s)&&it.test(n)&&(s=wl(t,n)),this.setBaseTarget(t,Te(s)?s.get():s)),Te(s)?s.get():s}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const o=Ri(this.props,n,(r=this.presenceContext)==null?void 0:r.custom);o&&(s=o[t])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Te(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new ci),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){Mi.render(this.render)}}class Yl extends $p{constructor(){super(...arguments),this.KeyframeResolver=Om}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Te(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function ql(e,{style:t,vars:n},s,i){const r=e.style;let o;for(o in t)r[o]=t[o];i==null||i.applyProjectionStyles(r,s);for(o in n)r.setProperty(o,n[o])}function Up(e){return window.getComputedStyle(e)}class Kp extends Yl{constructor(){super(...arguments),this.type="html",this.renderInstance=ql}readValueFromInstance(t,n){var s;if(Et.has(n))return(s=this.projection)!=null&&s.isProjecting?ks(n):im(t,n);{const i=Up(t),r=(hi(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Wl(t,n)}build(t,n,s){Ai(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return Di(t,n,s)}}const Zl=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Hp(e,t,n,s){ql(e,t,void 0,s);for(const i in t.attrs)e.setAttribute(Zl.has(i)?i:Ii(i),t.attrs[i])}class Gp extends Yl{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=de}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Et.has(n)){const s=Tl(n);return s&&s.default||0}return n=Zl.has(n)?n:Ii(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return Bl(t,n,s)}build(t,n,s){_l(t,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(t,n,s,i){Hp(t,n,s,i)}mount(t){this.isSVGTag=Ll(t.tagName),super.mount(t)}}const Wp=(e,t)=>Ei(e)?new Gp(t):new Kp(t,{allowProjection:e!==f.Fragment});function Qt(e,t,n){const s=e.getProps();return Ri(s,t,n!==void 0?n:s.custom,e)}const Vs=e=>Array.isArray(e);function Xp(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,St(n))}function Yp(e){return Vs(e)?e[e.length-1]||0:e}function qp(e,t){const n=Qt(e,t);let{transitionEnd:s={},transition:i={},...r}=n||{};r={...r,...s};for(const o in r){const a=Yp(r[o]);Xp(e,o,a)}}function Zp(e){return!!(Te(e)&&e.add)}function _s(e,t){const n=e.getValue("willChange");if(Zp(n))return n.add(t);if(!n&&Ze.WillChange){const s=new Ze.WillChange("auto");e.addValue("willChange",s),s.add(t)}}function Jl(e){return e.props[zl]}const Jp=e=>e!==null;function Qp(e,{repeat:t,repeatType:n="loop"},s){const i=e.filter(Jp),r=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[r]}const eg={type:"spring",stiffness:500,damping:25,restSpeed:10},tg=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),ng={type:"keyframes",duration:.8},sg={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ig=(e,{keyframes:t})=>t.length>2?ng:Et.has(e)?e.startsWith("scale")?tg(t[1]):eg:sg;function og({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:d,...u}){return!!Object.keys(u).length}const Vi=(e,t,n,s={},i,r)=>o=>{const a=Ti(s,e)||{},l=a.delay||s.delay||0;let{elapsed:d=0}=s;d=d-Ke(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-d,onUpdate:m=>{t.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:r?void 0:i};og(a)||Object.assign(u,ig(e,u)),u.duration&&(u.duration=Ke(u.duration)),u.repeatDelay&&(u.repeatDelay=Ke(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),(Ze.instantAnimations||Ze.skipAnimations)&&(h=!0,u.duration=0,u.delay=0),u.allowFlatten=!a.type&&!a.ease,h&&!r&&t.get()!==void 0){const m=Qp(u.keyframes,a);if(m!==void 0){ie.update(()=>{u.onUpdate(m),u.onComplete()});return}}return a.isSync?new bi(u):new jm(u)};function rg({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function Ql(e,t,{delay:n=0,transitionOverride:s,type:i}={}){let{transition:r=e.getDefaultTransition(),transitionEnd:o,...a}=t;s&&(r=s);const l=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const u in a){const h=e.getValue(u,e.latestValues[u]??null),m=a[u];if(m===void 0||d&&rg(d,u))continue;const p={delay:n,...Ti(r||{},u)},g=h.get();if(g!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===g&&!p.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const b=Jl(e);if(b){const v=window.MotionHandoffAnimation(b,u,ie);v!==null&&(p.startTime=v,x=!0)}}_s(e,u),h.start(Vi(u,h,m,e.shouldReduceMotion&&vl.has(u)?{type:!1}:p,e,x));const y=h.animation;y&&l.push(y)}return o&&Promise.all(l).then(()=>{ie.update(()=>{o&&qp(e,o)})}),l}function Fs(e,t,n={}){var l;const s=Qt(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const r=s?()=>Promise.all(Ql(e,s,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:m}=i;return ag(e,t,d,u,h,m,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[d,u]=a==="beforeChildren"?[r,o]:[o,r];return d().then(()=>u())}else return Promise.all([r(),o(n.delay)])}function ag(e,t,n=0,s=0,i=0,r=1,o){const a=[],l=e.variantChildren.size,d=(l-1)*i,u=typeof s=="function",h=u?m=>s(m,l):r===1?(m=0)=>m*i:(m=0)=>d-m*i;return Array.from(e.variantChildren).sort(lg).forEach((m,p)=>{m.notify("AnimationStart",t),a.push(Fs(m,t,{...o,delay:n+(u?0:s)+h(p)}).then(()=>m.notify("AnimationComplete",t)))}),Promise.all(a)}function lg(e,t){return e.sortNodePosition(t)}function cg(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const i=t.map(r=>Fs(e,r,n));s=Promise.all(i)}else if(typeof t=="string")s=Fs(e,t,n);else{const i=typeof t=="function"?Qt(e,t,n.custom):t;s=Promise.all(Ql(e,i,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}function ec(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}const ug=Pi.length;function tc(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?tc(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<ug;n++){const s=Pi[n],i=e.props[s];(Zt(i)||i===!1)&&(t[s]=i)}return t}const dg=[...ji].reverse(),hg=ji.length;function fg(e){return t=>Promise.all(t.map(({animation:n,options:s})=>cg(e,n,s)))}function mg(e){let t=fg(e),n=No(),s=!0;const i=l=>(d,u)=>{var m;const h=Qt(e,u,l==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:p,transitionEnd:g,...x}=h;d={...d,...x,...g}}return d};function r(l){t=l(e)}function o(l){const{props:d}=e,u=tc(e.parent)||{},h=[],m=new Set;let p={},g=1/0;for(let y=0;y<hg;y++){const b=dg[y],v=n[b],C=d[b]!==void 0?d[b]:u[b],T=Zt(C),M=b===l?v.isActive:null;M===!1&&(g=y);let k=C===u[b]&&C!==d[b]&&T;if(k&&s&&e.manuallyAnimateOnMount&&(k=!1),v.protectedKeys={...p},!v.isActive&&M===null||!C&&!v.prevProp||$n(C)||typeof C=="boolean")continue;const S=pg(v.prevProp,C);let w=S||b===l&&v.isActive&&!k&&T||y>g&&T,A=!1;const F=Array.isArray(C)?C:[C];let $=F.reduce(i(b),{});M===!1&&($={});const{prevResolvedValues:X={}}=v,H={...X,...$},_=G=>{w=!0,m.has(G)&&(A=!0,m.delete(G)),v.needsAnimating[G]=!0;const W=e.getValue(G);W&&(W.liveStyle=!1)};for(const G in H){const W=$[G],E=X[G];if(p.hasOwnProperty(G))continue;let R=!1;Vs(W)&&Vs(E)?R=!ec(W,E):R=W!==E,R?W!=null?_(G):m.add(G):W!==void 0&&m.has(G)?_(G):v.protectedKeys[G]=!0}v.prevProp=C,v.prevResolvedValues=$,v.isActive&&(p={...p,...$}),s&&e.blockInitialAnimation&&(w=!1),w&&(!(k&&S)||A)&&h.push(...F.map(G=>({animation:G,options:{type:b}})))}if(m.size){const y={};if(typeof d.initial!="boolean"){const b=Qt(e,Array.isArray(d.initial)?d.initial[0]:d.initial);b&&b.transition&&(y.transition=b.transition)}m.forEach(b=>{const v=e.getBaseTarget(b),C=e.getValue(b);C&&(C.liveStyle=!0),y[b]=v??null}),h.push({animation:y})}let x=!!h.length;return s&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(x=!1),s=!1,x?t(h):Promise.resolve()}function a(l,d){var h;if(n[l].isActive===d)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(m=>{var p;return(p=m.animationState)==null?void 0:p.setActive(l,d)}),n[l].isActive=d;const u=o(l);for(const m in n)n[m].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>n,reset:()=>{n=No(),s=!0}}}function pg(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!ec(t,e):!1}function lt(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function No(){return{animate:lt(!0),whileInView:lt(),whileHover:lt(),whileTap:lt(),whileDrag:lt(),whileFocus:lt(),exit:lt()}}class rt{constructor(t){this.isMounted=!1,this.node=t}update(){}}class gg extends rt{constructor(t){super(t),t.animationState||(t.animationState=mg(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();$n(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let yg=0;class xg extends rt{constructor(){super(...arguments),this.id=yg++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const vg={animation:{Feature:gg},exit:{Feature:xg}};function en(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function cn(e){return{point:{x:e.pageX,y:e.pageY}}}const bg=e=>t=>Si(t)&&e(t,cn(t));function $t(e,t,n,s){return en(e,t,bg(n),s)}const nc=1e-4,Cg=1-nc,Tg=1+nc,sc=.01,wg=0-sc,Mg=0+sc;function Se(e){return e.max-e.min}function Sg(e,t,n){return Math.abs(e-t)<=n}function Eo(e,t,n,s=.5){e.origin=s,e.originPoint=ae(t.min,t.max,e.origin),e.scale=Se(n)/Se(t),e.translate=ae(n.min,n.max,e.origin)-e.originPoint,(e.scale>=Cg&&e.scale<=Tg||isNaN(e.scale))&&(e.scale=1),(e.translate>=wg&&e.translate<=Mg||isNaN(e.translate))&&(e.translate=0)}function Ut(e,t,n,s){Eo(e.x,t.x,n.x,s?s.originX:void 0),Eo(e.y,t.y,n.y,s?s.originY:void 0)}function Ro(e,t,n){e.min=n.min+t.min,e.max=e.min+Se(t)}function kg(e,t,n){Ro(e.x,t.x,n.x),Ro(e.y,t.y,n.y)}function Do(e,t,n){e.min=t.min-n.min,e.max=e.min+Se(t)}function Kt(e,t,n){Do(e.x,t.x,n.x),Do(e.y,t.y,n.y)}function Ie(e){return[e("x"),e("y")]}const ic=({current:e})=>e?e.ownerDocument.defaultView:null,Io=(e,t)=>Math.abs(e-t);function jg(e,t){const n=Io(e.x,t.x),s=Io(e.y,t.y);return Math.sqrt(n**2+s**2)}class oc{constructor(t,n,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:r=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=rs(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=jg(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!g)return;const{point:x}=m,{timestamp:y}=ge;this.history.push({...x,timestamp:y});const{onStart:b,onMove:v}=this.handlers;p||(b&&b(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,m)},this.handlePointerMove=(m,p)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=os(p,this.transformPagePoint),ie.update(this.updatePoint,!0)},this.handlePointerUp=(m,p)=>{this.end();const{onEnd:g,onSessionEnd:x,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=rs(m.type==="pointercancel"?this.lastMoveEventInfo:os(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(m,b),x&&x(m,b)},!Si(t))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=o,this.contextWindow=i||window;const a=cn(t),l=os(a,this.transformPagePoint),{point:d}=l,{timestamp:u}=ge;this.history=[{...d,timestamp:u}];const{onSessionStart:h}=n;h&&h(t,rs(l,this.history)),this.removeListeners=rn($t(this.contextWindow,"pointermove",this.handlePointerMove),$t(this.contextWindow,"pointerup",this.handlePointerUp),$t(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),st(this.updatePoint)}}function os(e,t){return t?{point:t(e.point)}:e}function Vo(e,t){return{x:e.x-t.x,y:e.y-t.y}}function rs({point:e},t){return{point:e,delta:Vo(e,rc(t)),offset:Vo(e,Pg(t)),velocity:Ag(t,.1)}}function Pg(e){return e[0]}function rc(e){return e[e.length-1]}function Ag(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const i=rc(e);for(;n>=0&&(s=e[n],!(i.timestamp-s.timestamp>Ke(t)));)n--;if(!s)return{x:0,y:0};const r=He(i.timestamp-s.timestamp);if(r===0)return{x:0,y:0};const o={x:(i.x-s.x)/r,y:(i.y-s.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ng(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?ae(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?ae(n,e,s.max):Math.min(e,n)),e}function _o(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Eg(e,{top:t,left:n,bottom:s,right:i}){return{x:_o(e.x,n,i),y:_o(e.y,t,s)}}function Fo(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function Rg(e,t){return{x:Fo(e.x,t.x),y:Fo(e.y,t.y)}}function Dg(e,t){let n=.5;const s=Se(e),i=Se(t);return i>s?n=Xt(t.min,t.max-s,e.min):s>i&&(n=Xt(e.min,e.max-i,t.min)),qe(0,1,n)}function Ig(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Ls=.35;function Vg(e=Ls){return e===!1?e=0:e===!0&&(e=Ls),{x:Lo(e,"left","right"),y:Lo(e,"top","bottom")}}function Lo(e,t,n){return{min:Oo(e,t),max:Oo(e,n)}}function Oo(e,t){return typeof e=="number"?e:e[t]||0}const _g=new WeakMap;class Fg{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=de(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(cn(h).point)},o=(h,m)=>{const{drag:p,dragPropagation:g,onDragStart:x}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Um(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ie(b=>{let v=this.getAxisMotionValue(b).get()||0;if(Ge.test(v)){const{projection:C}=this.visualElement;if(C&&C.layout){const T=C.layout.layoutBox[b];T&&(v=Se(T)*(parseFloat(v)/100))}}this.originPoint[b]=v}),x&&ie.postRender(()=>x(h,m)),_s(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},a=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:x,onDrag:y}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:b}=m;if(g&&this.currentDirection===null){this.currentDirection=Lg(b),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,b),this.updateAxis("y",m.point,b),this.visualElement.render(),y&&y(h,m)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Ie(h=>{var m;return this.getAnimationState(h)==="paused"&&((m=this.getAxisMotionValue(h).animation)==null?void 0:m.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new oc(t,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:s,contextWindow:ic(this.visualElement)})}stop(t,n){const s=t||this.latestPointerEvent,i=n||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!i||!s)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&ie.postRender(()=>a(s,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:i}=this.getProps();if(!s||!xn(t,i,this.currentDirection))return;const r=this.getAxisMotionValue(t);let o=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(o=Ng(o,this.constraints[t],this.elastic[t])),r.set(o)}resolveConstraints(){var r;const{dragConstraints:t,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,i=this.constraints;t&&bt(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=Eg(s.layoutBox,t):this.constraints=!1,this.elastic=Vg(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Ie(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Ig(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!bt(t))return!1;const s=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=Lp(s,i.root,this.visualElement.getTransformPagePoint());let o=Rg(i.layout.layoutBox,r);if(n){const a=n(Vp(o));this.hasMutatedConstraints=!!a,a&&(o=Kl(a))}return o}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},d=Ie(u=>{if(!xn(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const m=i?200:1e6,p=i?40:1e7,g={type:"inertia",velocity:s?t[u]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...r,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(d).then(a)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return _s(this.visualElement,t),s.start(Vi(t,s,0,n,this.visualElement,!1))}stopAnimation(){Ie(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ie(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Ie(n=>{const{drag:s}=this.getProps();if(!xn(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];r.set(t[n]-ae(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!bt(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ie(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=Dg({min:l,max:l},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Ie(o=>{if(!xn(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:d}=this.constraints[o];a.set(ae(l,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;_g.set(this.visualElement,this);const t=this.visualElement.current,n=$t(t,"pointerdown",l=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(l)}),s=()=>{const{dragConstraints:l}=this.getProps();bt(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ie.read(s);const o=en(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:d})=>{this.isDragging&&d&&(Ie(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),r(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=Ls,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function xn(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Lg(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Og extends rt{constructor(t){super(t),this.removeGroupControls=Fe,this.removeListeners=Fe,this.controls=new Fg(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fe}unmount(){this.removeGroupControls(),this.removeListeners()}}const Bo=e=>(t,n)=>{e&&ie.postRender(()=>e(t,n))};class Bg extends rt{constructor(){super(...arguments),this.removePointerDownListener=Fe}onPointerDown(t){this.session=new oc(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ic(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:Bo(t),onStart:Bo(n),onMove:s,onEnd:(r,o)=>{delete this.session,i&&ie.postRender(()=>i(r,o))}}}mount(){this.removePointerDownListener=$t(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Sn={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zo(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ft={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(V.test(e))e=parseFloat(e);else return e;const n=zo(e,t.target.x),s=zo(e,t.target.y);return`${n}% ${s}%`}},zg={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,i=it.parse(e);if(i.length>5)return s;const r=it.createTransformer(e),o=typeof i[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;i[0+o]/=a,i[1+o]/=l;const d=ae(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),r(i)}};let $o=!1;class $g extends f.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:r}=t;cp(Ug),r&&(n.group&&n.group.add(r),s&&s.register&&i&&s.register(r),$o&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Sn.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:i,isPresent:r}=this.props,{projection:o}=s;return o&&(o.isPresent=r,$o=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==r?o.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?o.promote():o.relegate()||ie.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Mi.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ac(e){const[t,n]=Nl(),s=f.useContext(ni);return c.jsx($g,{...e,layoutGroup:s,switchLayoutGroup:f.useContext($l),isPresent:t,safeToRemove:n})}const Ug={borderRadius:{...Ft,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ft,borderTopRightRadius:Ft,borderBottomLeftRadius:Ft,borderBottomRightRadius:Ft,boxShadow:zg};function Kg(e,t,n){const s=Te(e)?e:St(e);return s.start(Vi("",s,t,n)),s.animation}const Hg=(e,t)=>e.depth-t.depth;class Gg{constructor(){this.children=[],this.isDirty=!1}add(t){oi(this.children,t),this.isDirty=!0}remove(t){ri(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Hg),this.isDirty=!1,this.children.forEach(t)}}function Wg(e,t){const n=Ae.now(),s=({timestamp:i})=>{const r=i-n;r>=t&&(st(s),e(r-t))};return ie.setup(s,!0),()=>st(s)}const lc=["TopLeft","TopRight","BottomLeft","BottomRight"],Xg=lc.length,Uo=e=>typeof e=="string"?parseFloat(e):e,Ko=e=>typeof e=="number"||V.test(e);function Yg(e,t,n,s,i,r){i?(e.opacity=ae(0,n.opacity??1,qg(s)),e.opacityExit=ae(t.opacity??1,0,Zg(s))):r&&(e.opacity=ae(t.opacity??1,n.opacity??1,s));for(let o=0;o<Xg;o++){const a=`border${lc[o]}Radius`;let l=Ho(t,a),d=Ho(n,a);if(l===void 0&&d===void 0)continue;l||(l=0),d||(d=0),l===0||d===0||Ko(l)===Ko(d)?(e[a]=Math.max(ae(Uo(l),Uo(d),s),0),(Ge.test(d)||Ge.test(l))&&(e[a]+="%")):e[a]=d}(t.rotate||n.rotate)&&(e.rotate=ae(t.rotate||0,n.rotate||0,s))}function Ho(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const qg=cc(0,.5,qa),Zg=cc(.5,.95,Fe);function cc(e,t,n){return s=>s<e?0:s>t?1:n(Xt(e,t,s))}function Go(e,t){e.min=t.min,e.max=t.max}function De(e,t){Go(e.x,t.x),Go(e.y,t.y)}function Wo(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Xo(e,t,n,s,i){return e-=t,e=In(e,1/n,s),i!==void 0&&(e=In(e,1/i,s)),e}function Jg(e,t=0,n=1,s=.5,i,r=e,o=e){if(Ge.test(t)&&(t=parseFloat(t),t=ae(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=ae(r.min,r.max,s);e===r&&(a-=t),e.min=Xo(e.min,t,n,a,i),e.max=Xo(e.max,t,n,a,i)}function Yo(e,t,[n,s,i],r,o){Jg(e,t[n],t[s],t[i],t.scale,r,o)}const Qg=["x","scaleX","originX"],ey=["y","scaleY","originY"];function qo(e,t,n,s){Yo(e.x,t,Qg,n?n.x:void 0,s?s.x:void 0),Yo(e.y,t,ey,n?n.y:void 0,s?s.y:void 0)}function Zo(e){return e.translate===0&&e.scale===1}function uc(e){return Zo(e.x)&&Zo(e.y)}function Jo(e,t){return e.min===t.min&&e.max===t.max}function ty(e,t){return Jo(e.x,t.x)&&Jo(e.y,t.y)}function Qo(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function dc(e,t){return Qo(e.x,t.x)&&Qo(e.y,t.y)}function er(e){return Se(e.x)/Se(e.y)}function tr(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class ny{constructor(){this.members=[]}add(t){oi(this.members,t),t.scheduleRender()}remove(t){if(ri(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){s=r;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function sy(e,t,n){let s="";const i=e.x.translate/t.x,r=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((i||r||o)&&(s=`translate3d(${i}px, ${r}px, ${o}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:m,skewX:p,skewY:g}=n;d&&(s=`perspective(${d}px) ${s}`),u&&(s+=`rotate(${u}deg) `),h&&(s+=`rotateX(${h}deg) `),m&&(s+=`rotateY(${m}deg) `),p&&(s+=`skewX(${p}deg) `),g&&(s+=`skewY(${g}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(s+=`scale(${a}, ${l})`),s||"none"}const as=["","X","Y","Z"],iy=1e3;let oy=0;function ls(e,t,n,s){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),s&&(s[e]=0))}function hc(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Jl(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ie,!(i||r))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&hc(s)}function fc({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},a=t==null?void 0:t()){this.id=oy++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ly),this.nodes.forEach(hy),this.nodes.forEach(fy),this.nodes.forEach(cy)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Gg)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ci),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Al(o)&&!Ym(o),this.instance=o;const{layoutId:a,layout:l,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),e){let u,h=0;const m=()=>this.root.updateBlockedByResize=!1;ie.read(()=>{h=window.innerWidth}),e(o,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,u&&u(),u=Wg(m,250),Sn.hasAnimatedSinceResize&&(Sn.hasAnimatedSinceResize=!1,this.nodes.forEach(ir)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&d&&(a||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||xy,{onLayoutAnimationStart:x,onLayoutAnimationComplete:y}=d.getProps(),b=!this.targetLayout||!dc(this.targetLayout,p),v=!h&&m;if(this.options.layoutRoot||this.resumeFrom||v||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...Ti(g,"layout"),onPlay:x,onComplete:y};(d.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(u,v)}else h||ir(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),st(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(my),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&hc(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nr);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(sr);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(dy),this.nodes.forEach(ry),this.nodes.forEach(ay)):this.nodes.forEach(sr),this.clearAllSnapshots();const a=Ae.now();ge.delta=qe(0,1e3/60,a-ge.timestamp),ge.timestamp=a,ge.isProcessing=!0,Jn.update.process(ge),Jn.preRender.process(ge),Jn.render.process(ge),ge.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Mi.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(uy),this.sharedNodes.forEach(py)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ie.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ie.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Se(this.snapshot.measuredBox.x)&&!Se(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=de(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!uc(this.projectionDelta),l=this.getTransformTemplate(),d=l?l(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&this.instance&&(a||ut(this.latestValues)||u)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),vy(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return de();const a=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(by))){const{scroll:u}=this.root;u&&(Ct(a.x,u.offset.x),Ct(a.y,u.offset.y))}return a}removeElementScroll(o){var l;const a=de();if(De(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:h,options:m}=u;u!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&De(a,o),Ct(a.x,h.offset.x),Ct(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=de();De(l,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Tt(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),ut(u.latestValues)&&Tt(l,u.latestValues)}return ut(this.latestValues)&&Tt(l,this.latestValues),l}removeTransform(o){const a=de();De(a,o);for(let l=0;l<this.path.length;l++){const d=this.path[l];if(!d.instance||!ut(d.latestValues))continue;Rs(d.latestValues)&&d.updateSnapshot();const u=de(),h=d.measurePageBox();De(u,h),qo(a,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return ut(this.latestValues)&&qo(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ge.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=ge.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=de(),this.relativeTargetOrigin=de(),Kt(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),De(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=de(),this.targetWithTransforms=de()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),kg(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):De(this.target,this.layout.layoutBox),Gl(this.target,this.targetDelta)):De(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=de(),this.relativeTargetOrigin=de(),Kt(this.relativeTargetOrigin,this.target,p.target),De(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Rs(this.parent.latestValues)||Hl(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ge.timestamp&&(l=!1),l)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;De(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;Fp(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=de());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Wo(this.prevProjectionDelta.x,this.projectionDelta.x),Wo(this.prevProjectionDelta.y,this.projectionDelta.y)),Ut(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!tr(this.projectionDelta.x,this.prevProjectionDelta.x)||!tr(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wt(),this.projectionDelta=wt(),this.projectionDeltaWithTransform=wt()}setAnimationOrigin(o,a=!1){const l=this.snapshot,d=l?l.latestValues:{},u={...this.latestValues},h=wt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=de(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,x=p!==g,y=this.getStack(),b=!y||y.members.length<=1,v=!!(x&&!b&&this.options.crossfade===!0&&!this.path.some(yy));this.animationProgress=0;let C;this.mixTargetDelta=T=>{const M=T/1e3;or(h.x,o.x,M),or(h.y,o.y,M),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Kt(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),gy(this.relativeTarget,this.relativeTargetOrigin,m,M),C&&ty(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=de()),De(C,this.relativeTarget)),x&&(this.animationValues=u,Yg(u,d,this.latestValues,M,v,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,d;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(d=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||d.stop(),this.pendingAnimation&&(st(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ie.update(()=>{Sn.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=St(0)),this.currentAnimation=Kg(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(iy),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:d,latestValues:u}=o;if(!(!a||!l||!d)){if(this!==o&&this.layout&&d&&mc(this.options.animationType,this.layout.layoutBox,d.layoutBox)){l=this.target||de();const h=Se(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const m=Se(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}De(a,l),Tt(a,u),Ut(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new ny),this.sharedNodes.get(o).add(a);const d=a.options.initialPromotionConfig;a.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const d=this.getStack();d&&d.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const d={};l.z&&ls("z",o,d,this.animationValues);for(let u=0;u<as.length;u++)ls(`rotate${as[u]}`,o,d,this.animationValues),ls(`skew${as[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Mn(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Mn(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!ut(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=d.animationValues||d.latestValues;this.applyTransformsToTarget();let h=sy(this.projectionDeltaWithTransform,this.treeScale,u);l&&(h=l(u,h)),o.transform=h;const{x:m,y:p}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,d.animationValues?o.opacity=d===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=d===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const g in Jt){if(u[g]===void 0)continue;const{correct:x,applyTo:y,isCSSVariable:b}=Jt[g],v=h==="none"?u[g]:x(u[g],d);if(y){const C=y.length;for(let T=0;T<C;T++)o[y[T]]=v}else b?this.options.visualElement.renderState.vars[g]=v:o[g]=v}this.options.layoutId&&(o.pointerEvents=d===this?Mn(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(nr),this.root.sharedNodes.clear()}}}function ry(e){e.updateLayout()}function ay(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=e.layout,{animationType:r}=e.options,o=t.source!==e.layout.source;r==="size"?Ie(h=>{const m=o?t.measuredBox[h]:t.layoutBox[h],p=Se(m);m.min=s[h].min,m.max=m.min+p}):mc(r,t.layoutBox,s)&&Ie(h=>{const m=o?t.measuredBox[h]:t.layoutBox[h],p=Se(s[h]);m.max=m.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const a=wt();Ut(a,s,t.layoutBox);const l=wt();o?Ut(l,e.applyTransform(i,!0),t.measuredBox):Ut(l,s,t.layoutBox);const d=!uc(a);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:p}=h;if(m&&p){const g=de();Kt(g,t.layoutBox,m.layoutBox);const x=de();Kt(x,s,p.layoutBox),dc(g,x)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=g,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:d,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function ly(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cy(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function uy(e){e.clearSnapshot()}function nr(e){e.clearMeasurements()}function sr(e){e.isLayoutDirty=!1}function dy(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ir(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function hy(e){e.resolveTargetDelta()}function fy(e){e.calcProjection()}function my(e){e.resetSkewAndRotation()}function py(e){e.removeLeadSnapshot()}function or(e,t,n){e.translate=ae(t.translate,0,n),e.scale=ae(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function rr(e,t,n,s){e.min=ae(t.min,n.min,s),e.max=ae(t.max,n.max,s)}function gy(e,t,n,s){rr(e.x,t.x,n.x,s),rr(e.y,t.y,n.y,s)}function yy(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const xy={duration:.45,ease:[.4,0,.1,1]},ar=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),lr=ar("applewebkit/")&&!ar("chrome/")?Math.round:Fe;function cr(e){e.min=lr(e.min),e.max=lr(e.max)}function vy(e){cr(e.x),cr(e.y)}function mc(e,t,n){return e==="position"||e==="preserve-aspect"&&!Sg(er(t),er(n),.2)}function by(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const Cy=fc({attachResizeListener:(e,t)=>en(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),cs={current:void 0},pc=fc({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!cs.current){const e=new Cy({});e.mount(window),e.setOptions({layoutScroll:!0}),cs.current=e}return cs.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Ty={pan:{Feature:Bg},drag:{Feature:Og,ProjectionNode:pc,MeasureLayout:ac}};function ur(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,r=s[i];r&&ie.postRender(()=>r(t,cn(t)))}class wy extends rt{mount(){const{current:t}=this.node;t&&(this.unmount=Km(t,(n,s)=>(ur(this.node,s,"Start"),i=>ur(this.node,i,"End"))))}unmount(){}}class My extends rt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rn(en(this.node.current,"focus",()=>this.onFocus()),en(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function dr(e,t,n){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),r=s[i];r&&ie.postRender(()=>r(t,cn(t)))}class Sy extends rt{mount(){const{current:t}=this.node;t&&(this.unmount=Xm(t,(n,s)=>(dr(this.node,s,"Start"),(i,{success:r})=>dr(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Os=new WeakMap,us=new WeakMap,ky=e=>{const t=Os.get(e.target);t&&t(e)},jy=e=>{e.forEach(ky)};function Py({root:e,...t}){const n=e||document;us.has(n)||us.set(n,{});const s=us.get(n),i=JSON.stringify(t);return s[i]||(s[i]=new IntersectionObserver(jy,{root:e,...t})),s[i]}function Ay(e,t,n){const s=Py(t);return Os.set(e,n),s.observe(e),()=>{Os.delete(e),s.unobserve(e)}}const Ny={some:0,all:1};class Ey extends rt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:r}=t,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:Ny[i]},a=l=>{const{isIntersecting:d}=l;if(this.isInView===d||(this.isInView=d,r&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=d?u:h;m&&m(l)};return Ay(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Ry(t,n))&&this.startObserver()}unmount(){}}function Ry({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Dy={inView:{Feature:Ey},tap:{Feature:Sy},focus:{Feature:My},hover:{Feature:wy}},Iy={layout:{ProjectionNode:pc,MeasureLayout:ac}},Vy={...vg,...Dy,...Ty,...Iy},_y=Ip(Vy,Wp);function Fy({fetchChildren:e,expanded:t,setExpanded:n}){const[s,i]=f.useState({}),r=f.useMemo(()=>t??s,[t,s]),o=f.useCallback(x=>{n?n(x):i(x)},[n,i]),[a,l]=f.useState({}),[d,u]=f.useState({}),[h,m]=f.useState({}),p=f.useCallback((x=[],y=[])=>{const b=new Set(y.map(C=>C.id));return[...x.filter(C=>!b.has(C.id)),...y]},[]),g=f.useCallback(async(x,y,b,v)=>{if(r[x]){o(T=>({...T,[x]:!1}));return}const C=d[x]||[];if(v!=null&&v.length){const T=p(v,C);u(M=>({...M,[x]:T})),m(M=>({...M,[x]:!C.length}))}if(o(T=>({...T,[x]:!0})),!C.length){l(T=>({...T,[x]:!0}));try{const T=await(e==null?void 0:e(x,y,b)),M=p(v||[],T);u(k=>({...k,[x]:M})),m(k=>({...k,[x]:!1}))}catch(T){console.error("Error loading children:",T)}finally{l(T=>({...T,[x]:!1}))}}},[r,d,e,p,o]);return{expanded:r,loading:a,loadedChildren:d,hasMoreChildren:h,toggleNode:g}}function Ly({className:e,...t}){return c.jsx("div",{className:z("animate-pulse rounded-md bg-primary/10",e),...t})}const Oy=({className:e,style:t})=>c.jsx("div",{className:z("px-2 py-1",e),style:t,children:c.jsx(Ly,{className:"h-3.5 w-full rounded-sm"})});function By({data:e,fetchChildren:t,onNodeClick:n,className:s,defaultIcon:i=qc,defaultFolderIcon:r=Fu,defaultIconProps:o,defaultFolderIconProps:a,selectable:l,expanded:d,setExpanded:u,renderHoverComponent:h,renderActionsComponent:m,loadingNodeIds:p}){const{expanded:g,loading:x,loadedChildren:y,hasMoreChildren:b,toggleNode:v}=Fy({fetchChildren:t,expanded:d,setExpanded:u}),[C,T]=be.useState(l==null?void 0:l.defaultSelectedId),M=f.useMemo(()=>(l==null?void 0:l.selectedId)??C,[l==null?void 0:l.selectedId,C]),k=f.useCallback(w=>{l!=null&&l.setSelectedId?l.setSelectedId(w):T(w)},[l,T]);f.useEffect(()=>{var w;if(l!=null&&l.enabled&&l.defaultSelectedId){if(l.defaultSelectedId===M)return;k(l.defaultSelectedId);const{node:A,path:F}=yc(e,l.defaultSelectedId);if(A){(w=l.onSelectedChange)==null||w.call(l,A);for(const $ of F)g[$.id]||v($.id,$.type,$.context,$.children)}}},[l,v,M,e,g,k]);const S=w=>{var A;l!=null&&l.enabled&&(k(w.id),(A=l.onSelectedChange)==null||A.call(l,w))};return c.jsx("div",{className:z("w-full",s),children:e.map((w,A)=>c.jsx(gc,{node:w,level:0,expanded:g,loading:x,loadedChildren:y,hasMoreChildren:b,onToggle:v,onNodeClick:n,defaultIcon:i,defaultFolderIcon:r,defaultIconProps:o,defaultFolderIconProps:a,selectable:l==null?void 0:l.enabled,selectedId:M,onSelect:S,className:A>0?"mt-0.5":"",renderHoverComponent:h,renderActionsComponent:m,loadingNodeIds:p},w.id))})}function gc({node:e,level:t,expanded:n,loading:s,loadedChildren:i,hasMoreChildren:r,onToggle:o,onNodeClick:a,defaultIcon:l,defaultFolderIcon:d,defaultIconProps:u,defaultFolderIconProps:h,selectable:m,selectedId:p,onSelect:g,className:x,renderHoverComponent:y,renderActionsComponent:b,loadingNodeIds:v}){var $,X;const[C,T]=f.useState(!1),M=n[e.id],k=s[e.id],S=i[e.id]||e.children,w=p===e.id,A=e.icon||(e.isFolder?d:l),F={strokeWidth:w?2.5:2,...e.isFolder?h:u,...e.iconProps,className:z("h-3.5 w-3.5 text-muted-foreground flex-none",w&&"text-primary text-white",($=e.iconProps)==null?void 0:$.className)};return c.jsxs("div",{className:z(x),children:[c.jsxs("div",{className:z("flex items-center gap-1.5 px-2 py-1 rounded-lg cursor-pointer group h-6","transition-colors duration-200",w?"bg-sky-500 border border-sky-600 border dark:bg-sky-600 dark:border-sky-700":"hover:bg-gray-200/50 border border-transparent dark:hover:bg-gray-700/50",e.className),...w?{"data-selected":!0}:{},style:{paddingLeft:`${t*16+8}px`},onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),onClick:H=>{H.stopPropagation(),m&&!e.unselectable&&g(e),H.detail!==2&&(a==null||a(e))},onDoubleClick:H=>{H.stopPropagation(),e.isFolder&&o(e.id,e.type,e.context,e.children)},children:[c.jsxs("div",{className:"flex flex-none items-center gap-1.5",children:[c.jsx(he,{variant:"ghost",size:"icon",className:z("h-3.5 w-3.5 p-0 hover:bg-transparent flex-none",M&&"rotate-90","transition-transform duration-200"),onClick:H=>{H.stopPropagation(),e.isFolder&&o(e.id,e.type,e.context,e.children)},children:e.isFolder&&(k?c.jsx(Yn,{className:z("size-3.5 animate-spin",{"text-white":w})}):c.jsx(ku,{className:z("size-3.5",{"text-white":w}),strokeWidth:2}))}),e.tooltip?c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:v!=null&&v.includes(e.id)?c.jsx(Yn,{className:z("size-3.5 animate-spin",{"text-white":w})}):c.jsx(A,{...w?{"data-selected":!0}:{},...F})}),c.jsx(ve,{align:"center",className:"max-w-[400px]",children:e.tooltip})]}):e.empty?null:v!=null&&v.includes(e.id)?c.jsx(Yn,{className:z("size-3.5 animate-spin",{})}):c.jsx(A,{...w?{"data-selected":!0}:{},...F})]}),c.jsx("span",{...e.labelProps,className:z("text-xs truncate min-w-0 flex-1 w-0",w&&"font-medium text-primary text-white",(X=e.labelProps)==null?void 0:X.className),...w?{"data-selected":!0}:{},children:e.empty?"":e.name}),b&&b(e),C&&y?y(e):null]}),c.jsx(np,{initial:!1,children:M&&S&&c.jsxs(_y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1,transition:{height:{duration:Math.min(.3+S.length*.018,.7),ease:"easeInOut"},opacity:{duration:Math.min(.2+S.length*.012,.4),ease:"easeInOut"}}},exit:{height:0,opacity:0,transition:{height:{duration:Math.min(.2+S.length*.01,.45),ease:"easeInOut"},opacity:{duration:.1,ease:"easeOut"}}},style:{overflow:"hidden"},children:[S.map(H=>c.jsx(gc,{node:H,level:t+1,expanded:n,loading:s,loadedChildren:i,hasMoreChildren:r,onToggle:o,onNodeClick:a,defaultIcon:l,defaultFolderIcon:d,defaultIconProps:u,defaultFolderIconProps:h,selectable:m,selectedId:p,onSelect:g,className:"mt-0.5",renderHoverComponent:y,renderActionsComponent:b,loadingNodeIds:v},H.id)),k?c.jsx(Oy,{style:{paddingLeft:`${t+2*16+8}px`}}):null]})})]})}function yc(e,t,n=[]){const s=[...n];for(const i of e){if(i.id===t)return{node:i,path:s};if(i.children){const r=yc(i.children,t,[...s,i]);if(r.node)return r}}return{node:null,path:s}}const zy=({areas:e,databaseType:t,filter:n,relevantTableData:s})=>{const i=[],r=new Map,o=[];if(s.forEach(a=>{a.parentAreaId?(r.has(a.parentAreaId)||r.set(a.parentAreaId,[]),r.get(a.parentAreaId).push(a)):o.push(a)}),r.forEach(a=>{a.sort((l,d)=>l.name.localeCompare(d.name))}),o.sort((a,l)=>a.name.localeCompare(l.name)),e.forEach(a=>{const l=r.get(a.id)||[],d=!l.some(h=>$e({table:{id:h.id,schema:h.schema},filter:n,options:{defaultSchema:Ve[t]}})===!1),u={id:`area-${a.id}`,name:`${a.name} (${l.length})`,type:"area",isFolder:!0,icon:ms,context:{id:a.id,name:a.name,visible:d,isUngrouped:!1},className:d?"":"opacity-50",children:l.map(h=>{const m=$e({table:{id:h.id,schema:h.schema},filter:n,options:{defaultSchema:Ve[t]}});return{id:h.id,name:h.name,type:"table",isFolder:!1,icon:Ht,context:{tableSchema:h.schema,visible:m},className:m?"":"opacity-50"}})};l.length>0&&i.push(u)}),o.length>0){const a=!o.some(d=>$e({table:{id:d.id,schema:d.schema},filter:n,options:{defaultSchema:Ve[t]}})==!1),l={id:"ungrouped",name:`Ungrouped (${o.length})`,type:"area",isFolder:!0,icon:Gu,context:{id:"ungrouped",name:"Ungrouped",visible:a,isUngrouped:!0},className:a?"":"opacity-50",children:o.map(d=>{const u=$e({table:{id:d.id,schema:d.schema},filter:n,options:{defaultSchema:Ve[t]}});return{id:d.id,name:d.name,type:"table",isFolder:!1,icon:Ht,context:{tableSchema:d.schema,visible:u},className:u?"":"opacity-50"}})};i.push(l)}return i},$y=({relevantTableData:e,databaseWithSchemas:t,databaseType:n,filter:s})=>{const i=[],r=new Map;return e.forEach(o=>{const a=t?o.schema??Ve[n]??"default":"All Tables";r.has(a)||r.set(a,[]),r.get(a).push(o)}),r.forEach(o=>{o.sort((a,l)=>a.name.localeCompare(l.name))}),r.forEach((o,a)=>{let l;t?l=!o.some(u=>$e({table:{id:u.id,schema:u.schema},filter:s,options:{defaultSchema:Ve[n]}})===!1):l=!o.some(u=>$e({table:{id:u.id,schema:u.schema},filter:s,options:{defaultSchema:Ve[n]}})===!1);const d={id:`schema-${a}`,name:`${a} (${o.length})`,type:"schema",isFolder:!0,icon:ps,context:{name:a,visible:l},className:l?"":"opacity-50",children:o.map(u=>{const h=$e({table:{id:u.id,schema:u.schema},filter:s,options:{defaultSchema:Ve[n]}}),m=!h;return{id:u.id,name:u.name,type:"table",isFolder:!1,icon:Ht,context:{tableSchema:u.schema,visible:h},className:m?"opacity-50":""}})};i.push(d)}),i},Uy=({node:e,databaseWithSchemas:t,toggleSchemaFilter:n,toggleTableFilter:s,clearTableIdsFilter:i,setTableIdsFilterEmpty:r,addTablesToFilter:o,removeTablesFromFilter:a})=>{if(e.type==="schema"){const l=e.context,d=l.visible,u=l.name,h=Tu(u);return c.jsx(he,{variant:"ghost",size:"sm",className:"size-7 h-fit p-0",onClick:m=>{m.stopPropagation(),t?n(h):d?r():i()},children:d?c.jsx(Zn,{className:"size-3.5"}):c.jsx(qn,{className:"size-3.5 text-muted-foreground"})})}if(e.type==="area"){const l=e.context,d=l.visible,u=l.isUngrouped,h=l.id;return c.jsx(he,{variant:"ghost",size:"sm",className:"size-7 h-fit p-0",onClick:m=>{m.stopPropagation(),d?a({filterCallback:p=>u&&!p.areaId||!u&&p.areaId===h}):o({filterCallback:p=>u&&!p.areaId||!u&&p.areaId===h})},children:d?c.jsx(Zn,{className:"size-3.5"}):c.jsx(qn,{className:"size-3.5 text-muted-foreground"})})}if(e.type==="table"){const l=e.id,u=e.context.visible;return c.jsx(he,{variant:"ghost",size:"sm",className:"size-7 h-fit p-0",onClick:h=>{h.stopPropagation(),s(l)},children:u?c.jsx(Zn,{className:"size-3.5"}):c.jsx(qn,{className:"size-3.5 text-muted-foreground"})})}return null},Ky=({onClose:e})=>{const{t}=gt(),{tables:n,databaseType:s,areas:i}=We(),{filter:r,toggleSchemaFilter:o,toggleTableFilter:a,clearTableIdsFilter:l,setTableIdsFilterEmpty:d,addTablesToFilter:u,removeTablesFromFilter:h}=Ln(),{fitView:m,setNodes:p}=yt(),[g,x]=f.useState(""),[y,b]=f.useState({}),[v,C]=f.useState(!1),[T,M]=f.useState("schema"),k=f.useRef(null),S=f.useMemo(()=>n.map(_=>({id:_.id,name:_.name,schema:_.schema,parentAreaId:_.parentAreaId})),[n]),w=f.useMemo(()=>wu.includes(s),[s]),A=f.useMemo(()=>T==="area"?zy({areas:i,databaseType:s,filter:r,relevantTableData:S}):$y({relevantTableData:S,databaseWithSchemas:w,databaseType:s,filter:r}),[S,s,r,w,T,i]);f.useMemo(()=>{const _={};A.forEach(oe=>{_[oe.id]=!0}),b(_)},[A]);const F=f.useMemo(()=>{if(!g.trim())return A;const _=g.toLowerCase(),oe=[];return A.forEach(pe=>{var W;const G=(W=pe.children)==null?void 0:W.filter(E=>E.name.toLowerCase().includes(_));G&&G.length>0&&oe.push({...pe,children:G})}),oe},[A,g]),$=f.useCallback(_=>c.jsx(Uy,{node:_,databaseWithSchemas:w,toggleSchemaFilter:o,toggleTableFilter:a,clearTableIdsFilter:l,setTableIdsFilterEmpty:d,addTablesToFilter:u,removeTablesFromFilter:h}),[w,o,a,l,d,u,h]),X=f.useCallback(_=>{p(oe=>oe.map(pe=>pe.id===_?{...pe,hidden:!1,selected:!0}:{...pe,selected:!1})),setTimeout(()=>{m({duration:500,maxZoom:1,minZoom:1,nodes:[{id:_}]})},100)},[m,p]),H=f.useCallback(_=>{_.type==="table"&&_.context.visible&&X(_.id)},[X]);return f.useEffect(()=>{C(!0),setTimeout(()=>{var _;(_=k.current)==null||_.focus()},300)},[]),c.jsxs("div",{className:`absolute right-2 top-2 z-10 flex flex-col rounded-lg border bg-background/85 shadow-lg backdrop-blur-sm transition-all duration-300 md:right-4 md:top-4 ${v?"translate-x-0 opacity-100":"translate-x-full opacity-0"} size-[calc(100%-1rem)] max-w-sm md:h-[calc(100%-2rem)] md:w-80`,children:[c.jsxs("div",{className:"flex items-center justify-between rounded-t-lg border-b px-2 py-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(kr,{className:"size-3.5 text-muted-foreground md:size-4"}),c.jsx("h2",{className:"text-sm font-medium",children:t("canvas_filter.title","Filter Tables")})]}),c.jsx(he,{variant:"ghost",size:"sm",className:"size-8 p-0",onClick:e,children:c.jsx(Zc,{className:"size-4"})})]}),c.jsx("div",{className:"border-b p-2",children:c.jsxs("div",{className:"relative h-9",children:[c.jsx(Jc,{className:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),c.jsx(Vn,{ref:k,placeholder:t("canvas_filter.search_placeholder","Search tables..."),value:g,onChange:_=>x(_.target.value),className:"h-full pl-9"})]})}),c.jsx("div",{className:"border-b p-2",children:c.jsxs(Qc,{type:"single",value:T,onValueChange:_=>{_&&M(_)},className:"w-full",children:[c.jsxs(Ki,{value:"schema",className:"flex-1 text-xs",children:[c.jsx(ps,{className:"mr-1.5 size-3.5"}),t("canvas_filter.group_by_schema","Group by Schema")]}),c.jsxs(Ki,{value:"area",className:"flex-1 text-xs",children:[c.jsx(ms,{className:"mr-1.5 size-3.5"}),t("canvas_filter.group_by_area","Group by Area")]})]})}),c.jsx(eu,{className:"flex-1 rounded-b-lg",type:"auto",children:c.jsx(By,{data:F,onNodeClick:H,renderActionsComponent:$,defaultFolderIcon:T==="area"?ms:ps,defaultIcon:Ht,expanded:y,setExpanded:b,className:"py-2"})})]})},Hy=()=>{const{fitView:e}=Us(),[t,n]=f.useState(!1);f.useEffect(()=>{const i=setTimeout(()=>{n(!0)},300);return()=>clearTimeout(i)},[]);const s=f.useCallback(()=>{e({duration:500,padding:.1,maxZoom:.8})},[e]);return c.jsxs("div",{className:z("transition-all duration-300 ease-in-out",t?"translate-y-0 opacity-100":"pointer-events-none translate-y-4 opacity-0"),children:[c.jsx("div",{className:"sm:hidden",children:c.jsx(he,{onClick:s,size:"sm",className:"h-fit rounded-lg bg-slate-900 px-4 py-1.5 text-xs text-white shadow-lg hover:bg-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600",children:"Show All"})}),c.jsxs("div",{className:"hidden items-center gap-2 rounded-lg bg-slate-900 px-3 py-2 shadow-lg sm:flex",children:[c.jsx("div",{className:"flex size-6 items-center justify-center rounded-full bg-pink-600",children:c.jsx(tu,{className:"size-4 text-white"})}),c.jsx("span",{className:"text-sm text-white",children:"Your content is out of view"}),c.jsx(he,{onClick:s,size:"sm",className:"ml-2 h-fit rounded-lg bg-slate-700 px-4 py-1.5 text-xs text-white hover:bg-slate-600 dark:hover:bg-slate-800",children:"Show All"})]})]})},Gy=()=>{const{getNodes:e,getViewport:t}=yt(),[n,s]=f.useState(!1),i=f.useCallback(()=>{var y,b;const o=e(),a=t();if(o.length===0){s(!1);return}const l=o.filter(v=>!v.hidden);if(l.length===0){s(!1);return}const d=-a.x/a.zoom,u=-a.y/a.zoom,h=((y=document.getElementById("canvas"))==null?void 0:y.clientWidth)||window.innerWidth,m=((b=document.getElementById("canvas"))==null?void 0:b.clientHeight)||window.innerHeight,p=d+h/a.zoom,g=u+m/a.zoom,x=l.some(v=>{var A;let C=v.width||0,T=v.height||0;if(v.type==="table"&&((A=v.data)!=null&&A.table)){const $=nu(v.data.table);C=$.width,T=$.height}const M=v.position.x,k=v.position.y,S=M+C,w=k+T;return S>=d&&M<=p&&w>=u&&k<=g});s(!x)},[e,t]),r=su(i,1e3);return wr({onEnd:()=>{r()}}),{isLostInCanvas:n}},ds=1,hs=0,Wy={"relationship-edge":Va,"dependency-edge":qh},Xy={table:Ia,area:La},Yy=[],fs=(e,{filter:t,databaseType:n,filterLoading:s})=>{const i={x:e.x,y:e.y};return{id:e.id,type:"table",position:i,data:{table:e,isOverlapping:!1},width:e.width??vn,hidden:!$e({table:{id:e.id,schema:e.schema},filter:t,options:{defaultSchema:Ve[n]}})||s}},qy=(e,{tables:t,filter:n,databaseType:s,filterLoading:i})=>{const r=t.filter(a=>a.parentAreaId===e.id),o=r.length===0||r.some(a=>$e({table:{id:a.id,schema:a.schema},filter:n,options:{defaultSchema:Ve[s]}}));return{id:e.id,type:"area",position:{x:e.x,y:e.y},data:{area:e},width:e.width,height:e.height,zIndex:-10,hidden:!o||i}},l0=({initialTables:e})=>{const{getEdge:t,getInternalNode:n,getNode:s}=yt(),[i,r]=f.useState([]),[o,a]=f.useState([]),{toast:l}=iu(),{t:d}=gt(),{isLostInCanvas:u}=Gy(),{tables:h,areas:m,relationships:p,createRelationship:g,createDependency:x,updateTablesState:y,removeRelationships:b,removeDependencies:v,getField:C,databaseType:T,events:M,dependencies:k,readonly:S,removeArea:w,updateArea:A,highlightedCustomType:F,highlightCustomTypeId:$}=We(),{showSidePanel:X}=jt(),{effectiveTheme:H}=bu(),{scrollAction:_,showDependenciesOnCanvas:oe,showMiniMapOnCanvas:pe}=Ks(),{showAlert:G}=ou(),{isMd:W}=$s("md"),[E,R]=f.useState(!1),{reorderTables:O,fitView:J,setOverlapGraph:se,overlapGraph:Q,showFilter:Le,setShowFilter:je}=Us(),{filter:re,loading:Ne}=Ln(),[Ce,Ue]=f.useState(!0),[fe,Oe,at]=ru(e.map(N=>fs(N,{filter:re,databaseType:T,filterLoading:Ne}))),[Je,q,L]=au(Yy),[ue,Pe]=f.useState(!1);f.useEffect(()=>{Ue(!0)},[e]),f.useEffect(()=>{const N=e.map(D=>fs(D,{filter:re,databaseType:T,filterLoading:Ne}));_t(N,fe)&&Ue(!1)},[e,fe,re,T,Ne]),f.useEffect(()=>{Ce||un(()=>{J({duration:200,padding:.1,maxZoom:.8})},500)()},[Ce,J]),f.useEffect(()=>{const N=p.reduce((P,K)=>(P[`${K.targetTableId}${K.targetFieldId}`]=0,P),{}),D=k.reduce((P,K)=>(P[K.tableId]=0,P),{});q([...p.map(P=>({id:P.id,source:P.sourceTableId,target:P.targetTableId,sourceHandle:`${gs}${P.sourceFieldId}`,targetHandle:`${bn}${N[`${P.targetTableId}${P.targetFieldId}`]++}_${P.targetFieldId}`,type:"relationship-edge",data:{relationship:P}})),...k.map(P=>({id:P.id,source:P.dependentTableId,target:P.tableId,sourceHandle:`${An}${P.dependentTableId}`,targetHandle:`${Cn}${D[P.tableId]++}_${P.tableId}`,type:"dependency-edge",data:{dependency:P},hidden:!oe&&T!==Cu.CLICKHOUSE}))])},[p,k,q,oe,T]),f.useEffect(()=>{const N=fe.filter(D=>D.selected).map(D=>D.id);_t(N,i)||r(N)},[fe,r,i]),f.useEffect(()=>{const N=Je.filter(D=>D.selected).map(D=>D.id);_t(N,o)||a(N)},[Je,a,o]),f.useEffect(()=>{const N=new Set(i),D=new Set(o);q(P=>{let K=!1;const U=P.map(I=>{var Y;const j=D.has(I.id)||N.has(I.source)||N.has(I.target),Z=((Y=I.data)==null?void 0:Y.highlighted)??!1,le=I.animated??!1,Ee=I.zIndex??0;if(Z===j&&le===j&&Ee===(j?ds:hs))return I;if(K=!0,I.type==="dependency-edge"){const B=I;return{...B,data:{...B.data,highlighted:j},animated:j,zIndex:j?ds:hs}}else{const B=I;return{...B,data:{...B.data,highlighted:j},animated:j,zIndex:j?ds:hs}}});return K?U:P})},[o,i,q]),f.useEffect(()=>{Oe(N=>{const D=[...h.map(P=>{const K=(Q.graph.get(P.id)??[]).length>0,U=fs(P,{filter:re,databaseType:T,filterLoading:Ne});let I=!1;return F&&(I=P.fields.some(j=>j.type.name===F.name)),{...U,data:{...U.data,isOverlapping:K,highlightOverlappingTables:E,hasHighlightedCustomType:I}}}),...m.map(P=>qy(P,{tables:h,filter:re,databaseType:T,filterLoading:Ne}))];return _t(N,D)?N:D})},[h,m,Oe,re,T,Q.lastUpdated,Q.graph,E,F,Ne]);const Qe=f.useRef(void 0);f.useEffect(()=>{_t(re,Qe.current)||(un(()=>{const N=Hi({tables:h.filter(D=>$e({table:{id:D.id,schema:D.schema},filter:re,options:{defaultSchema:Ve[T]}}))});se(N),J({duration:500,padding:.1,maxZoom:.8})},500)(),Qe.current=re)},[re,J,h,se,T]),f.useEffect(()=>{un(()=>{const D=fe.filter(I=>I.type==="table"&&!I.hidden).map(I=>I.data.table),P=fe.filter(I=>I.type==="area"&&!I.hidden).map(I=>I.data.area),K=Qh(D,P),U=[];K.forEach((I,j)=>{const Z=D[j];Z&&(I.parentAreaId||Z.parentAreaId)&&I.parentAreaId!==Z.parentAreaId&&U.push({id:I.id,parentAreaId:I.parentAreaId||null})}),U.length>0&&y(I=>I.map(j=>{const Z=U.find(le=>le.id===j.id);return Z?{id:j.id,parentAreaId:Z.parentAreaId}:j}),{updateHistory:!1})},300)()},[fe,y]);const Kn=f.useCallback(async N=>{var Z,le,Ee,Y,B,ne,Be,we;if((le=(Z=N.sourceHandle)==null?void 0:Z.startsWith)!=null&&le.call(Z,An)||(Y=(Ee=N.sourceHandle)==null?void 0:Ee.startsWith)!=null&&Y.call(Ee,Ra)){const et=N.target,Re=N.source;x({tableId:et,dependentTableId:Re});return}const D=N.source,P=N.target,K=((ne=(B=N.sourceHandle)==null?void 0:B.split("_"))==null?void 0:ne.pop())??"",U=((we=(Be=N.targetHandle)==null?void 0:Be.split("_"))==null?void 0:we.pop())??"",I=C(D,K),j=C(P,U);if(!(!I||!j)){if(!lu(I.type,j.type,T)){l({title:"Field types are not compatible",variant:"destructive",description:"Relationships can only be created between compatible field types"});return}g({sourceTableId:D,targetTableId:P,sourceFieldId:K,targetFieldId:U})}},[g,x,C,l,T]),Hn=f.useCallback(N=>{let D=N;S&&(D=D.filter(j=>j.type!=="remove"));const K=D.filter(j=>j.type==="remove").map(j=>t(j.id)).filter(j=>!!j),U=K.filter(j=>(j==null?void 0:j.type)==="relationship-edge").map(j=>{var Z,le;return(le=(Z=j==null?void 0:j.data)==null?void 0:Z.relationship)==null?void 0:le.id}),I=K.filter(j=>(j==null?void 0:j.type)==="dependency-edge").map(j=>{var Z,le;return(le=(Z=j==null?void 0:j.data)==null?void 0:Z.dependency)==null?void 0:le.id});return U.length>0&&b(U),I.length>0&&v(I),L(D)},[t,L,b,v,S]),_i=f.useCallback(({positionChanges:N,sizeChanges:D})=>{if(N.length>0||D.length>0){let P=Q;for(const K of N){const U=s(K.id);U&&U.type==="table"&&(P=Dt({node:U},{nodes:fe.filter(I=>!I.hidden&&I.type==="table")},P))}for(const K of D){const U=s(K.id);U&&U.type==="table"&&(P=Dt({node:U},{nodes:fe.filter(I=>!I.hidden&&I.type==="table")},P))}se(P)}},[fe,Q,se,s]),Xe=un(_i,200),Gn=f.useCallback((N,D)=>{const P=N.filter(j=>{var Z,le;if(j.type==="position"&&!j.dragging&&((Z=j.position)==null?void 0:Z.x)!==void 0&&((le=j.position)==null?void 0:le.y)!==void 0&&!isNaN(j.position.x)&&!isNaN(j.position.y)||j.type==="dimensions"&&j.resizing||j.type==="remove"){const Ee=s(j.id);return!(!Ee||Ee.type!==D)}return!1}),K=P.filter(j=>{var Z,le;return j.type==="position"&&!j.dragging&&((Z=j.position)==null?void 0:Z.x)!==void 0&&((le=j.position)==null?void 0:le.y)!==void 0&&!isNaN(j.position.x)&&!isNaN(j.position.y)}),U=P.filter(j=>j.type==="remove"),I=P.filter(j=>j.type==="dimensions"&&j.resizing);return{positionChanges:K,removeChanges:U,sizeChanges:I}},[s]),xc=f.useCallback(N=>{let D=N;S&&(D=D.filter(Y=>Y.type!=="remove"));const P=D.filter(Y=>{if(Y.type==="position"){const B=s(Y.id);return(B==null?void 0:B.type)==="area"&&Y.dragging}return!1});if(P.length>0){const Y=[];P.forEach(B=>{const ne=m.find(Be=>Be.id===B.id);if(ne&&B.position){const Be=B.position.x-ne.x,we=B.position.y-ne.y;h.filter(Re=>Re.parentAreaId===B.id).forEach(Re=>{Y.push({id:Re.id,type:"position",position:{x:Re.x+Be,y:Re.y+we},dragging:!0})})}}),D=[...D,...Y]}const{positionChanges:K,removeChanges:U,sizeChanges:I}=Gn(D,"area"),{positionChanges:j,removeChanges:Z,sizeChanges:le}=Gn(D,"table"),Ee=new Map;if(K.length>0&&I.length===0&&K.forEach(Y=>{if(Y.type==="position"&&Y.position){const B=m.find(ne=>ne.id===Y.id);if(B){const ne=Y.position.x-B.x,Be=Y.position.y-B.y;ef(Y.id,h).forEach(et=>{Ee.set(et.id,{deltaX:ne,deltaY:Be})})}}}),(j.length>0||Z.length>0||le.length>0||Ee.size>0||U.length>0)&&y(Y=>Y.map(ne=>{var Oi,Bi,zi;if(U.find(Ye=>Ye.id===ne.parentAreaId))return{...ne,parentAreaId:null};const we=j.find(Ye=>Ye.id===ne.id),et=le.find(Ye=>Ye.id===ne.id),Re=Ee.get(ne.id);if(we||et||Re){const Ye=(Oi=we==null?void 0:we.position)==null?void 0:Oi.x,Wn=(Bi=we==null?void 0:we.position)==null?void 0:Bi.y;return{...ne,...we&&Ye!==void 0&&Wn!==void 0&&!isNaN(Ye)&&!isNaN(Wn)?{x:Ye,y:Wn}:{},...Re&&!we?{x:ne.x+Re.deltaX,y:ne.y+Re.deltaY}:{},...et?{width:((zi=et.dimensions)==null?void 0:zi.width)??ne.width}:{}}}return ne}).filter(ne=>!Z.some(Be=>Be.id===ne.id))),Xe({positionChanges:j,sizeChanges:le}),K.length>0||U.length>0||I.length>0){const Y={};if(K.forEach(B=>{B.type==="position"&&B.position&&(Y[B.id]={...Y[B.id],x:B.position.x,y:B.position.y})}),I.forEach(B=>{B.type==="dimensions"&&B.dimensions&&(Y[B.id]={...Y[B.id],width:B.dimensions.width,height:B.dimensions.height})}),U.forEach(B=>{w(B.id),delete Y[B.id]}),Object.keys(Y).length>0)for(const[B,ne]of Object.entries(Y))A(B,ne)}return at(D)},[at,y,Xe,Gn,A,w,S,h,m,s]),vc=f.useCallback(N=>{let D=Q;if(N.action==="add_tables"){for(const P of N.data.tables)D=Dt({node:s(P.id)},{nodes:fe.filter(K=>!K.hidden&&K.type==="table")},Q);se(D)}else if(N.action==="remove_tables"){for(const P of N.data.tableIds)D=cu(D,P);se(D)}else if(N.action==="update_table"&&N.data.table.width){const P=s(N.data.id),K={...P.measured,width:N.data.table.width};D=Dt({node:{...P,measured:K}},{nodes:fe.filter(U=>!U.hidden&&U.type==="table")},Q),se(D),setTimeout(()=>{Oe(U=>U.map(I=>I.id===N.data.id?{...I,measured:K}:I))},0)}else if(N.action==="add_field"||N.action==="remove_field"){const P=s(N.data.tableId),K={...P.measured??{},height:Mr({...P.data.table,fields:N.data.fields})};D=Dt({node:{...P,measured:K}},{nodes:fe.filter(U=>!U.hidden&&U.type==="table")},Q),se(D)}else if(N.action==="load_diagram"){const P=N.data.diagram.tables??[],K=Hi({tables:P.filter(U=>$e({table:{id:U.id,schema:U.schema},filter:re,options:{defaultSchema:Ve[T]}}))});se(K)}},[Q,se,s,fe,re,Oe,T]);M.useSubscription(vc);const bc=h.length>0?!n(h[0].id):!1,Cc=f.useCallback(()=>{G({title:d("reorder_diagram_alert.title"),description:d("reorder_diagram_alert.description"),actionLabel:d("reorder_diagram_alert.reorder"),closeLabel:d("reorder_diagram_alert.cancel"),onAction:O})},[d,G,O]),Tc=f.useMemo(()=>Array.from(Q.graph).some(([,N])=>N.length>0),[Q]),wc=f.useCallback(()=>{R(!0),setTimeout(()=>R(!1),600)},[]),Fi=uu("Shift"),Li=kc();return xu(Li==="mac"?"meta+f":"ctrl+f",()=>{je(N=>!N)},{preventDefault:!0,enableOnFormTags:!0},[]),c.jsx(Yh,{children:c.jsxs("div",{className:"relative flex h-full",id:"canvas",children:[c.jsxs(du,{onlyRenderVisibleElements:!0,colorMode:H,className:"canvas-cursor-default nodes-animated",nodes:fe,edges:Je,onNodesChange:xc,onEdgesChange:Hn,maxZoom:5,minZoom:.1,onConnect:Kn,proOptions:{hideAttribution:!0},fitView:!1,nodeTypes:Xy,edgeTypes:Wy,defaultEdgeOptions:{animated:!1,type:"relationship-edge"},panOnScroll:_==="pan",snapToGrid:Fi||ue,snapGrid:[20,20],children:[c.jsx(It,{position:"top-left",showZoom:!1,showFitView:!1,showInteractive:!1,className:"!shadow-none",children:c.jsxs("div",{className:"flex flex-col items-center gap-2 md:flex-row",children:[S?null:c.jsxs(c.Fragment,{children:[c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:c.jsx("span",{children:c.jsx(he,{variant:"secondary",className:"size-8 p-1 shadow-none",onClick:Cc,children:c.jsx(hu,{className:"size-4"})})})}),c.jsx(ve,{children:d("toolbar.reorder_diagram")})]}),c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:c.jsx("span",{children:c.jsx(he,{variant:"secondary",className:z("size-8 p-1 shadow-none",ue||Fi?"bg-pink-600 text-white hover:bg-pink-500 dark:hover:bg-pink-700 hover:text-white":""),onClick:()=>Pe(N=>!N),children:c.jsx(Xu,{className:"size-4"})})})}),c.jsx(ve,{children:d("snap_to_grid_tooltip",{key:Li==="mac"?"â‡§":"Shift"})})]}),F?c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:c.jsx("span",{children:c.jsx(he,{variant:"secondary",className:"size-8 border border-yellow-400 bg-yellow-200 p-1 shadow-none hover:bg-yellow-300 dark:border-yellow-700 dark:bg-yellow-800 dark:hover:bg-yellow-700",onClick:()=>$(void 0),children:c.jsx($u,{className:"size-4"})})})}),c.jsx(ve,{children:d("toolbar.custom_type_highlight_tooltip",{typeName:F.name})})]}):null]}),c.jsx("div",{className:`transition-opacity duration-300 ease-in-out ${Tc?"opacity-100":"opacity-0"}`,children:c.jsxs(ye,{children:[c.jsx(xe,{asChild:!0,children:c.jsx("span",{children:c.jsx(he,{variant:"default",className:"size-8 p-1 shadow-none",onClick:wc,children:c.jsx(fu,{className:"size-4 text-white"})})})}),c.jsx(ve,{children:d("toolbar.highlight_overlapping_tables")})]})})]})}),bc?c.jsx(It,{position:"top-center",orientation:"horizontal",showZoom:!1,showFitView:!1,showInteractive:!1,className:"!shadow-none",children:c.jsx(vu,{variant:"default",className:"bg-pink-600 text-white",children:d("loading_diagram")})}):null,!W&&!S?c.jsx(It,{position:"bottom-left",orientation:"horizontal",showZoom:!1,showFitView:!1,showInteractive:!1,className:"!shadow-none",children:c.jsx(he,{className:"size-11 bg-pink-600 p-2 hover:bg-pink-500",onClick:X,children:c.jsx(jr,{})})}):null,u?c.jsx(It,{position:W?"bottom-center":"top-center",orientation:"horizontal",showZoom:!1,showFitView:!1,showInteractive:!1,className:"!shadow-none",style:{[W?"bottom":"top"]:"70px"},children:c.jsx(Hy,{})}):null,c.jsx(It,{position:W?"bottom-center":"top-center",orientation:"horizontal",showZoom:!1,showFitView:!1,showInteractive:!1,className:"!shadow-none",children:c.jsx(Wh,{readonly:S})}),pe&&c.jsx(mu,{style:{width:W?100:60,height:W?100:60}}),c.jsx(pu,{variant:gu.Dots,gap:16,size:1}),Le?c.jsx(Ky,{onClose:()=>je(!1)}):null]}),c.jsx(Xh,{})]})})};export{th as A,l0 as C,ih as G,$u as H,rh as I,Ku as K,oh as L,qu as M,nh as P,eh as R,dh as S,Nr as W,sh as a,ah as b,_r as c,lh as d,ch as e,uh as f,hh as g,fh as h,mh as i,Mt as j,Bu as k,jr as l,Ru as m,_t as n,Ly as o,o0 as p,Hs as u};
