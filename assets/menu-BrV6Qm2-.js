import{r as l,j as t,m as ot,R as I,b as D,p as zi,T as le,e as ce,f as de,q as Fi,s as Bi,S as on,t as Vi,u as Ki}from"./index-erRrosO1.js";import{f as ya,g as ja,h as nn,i as Hi,j as Is,k as tt,l as Na,m as nt,A as Gi,n as X,P as Ui,o as Wi,p as qi,q as Xi,r as Yi,F as Qi,s as Zi,t as Ji,v as ea,w as el,x as tl,y as ks,z as nl,B as sl,C as Ca,E as Sa,c as Q,G as ln,H as Rt,e as J,I as Dt,u as ge,J as Et,K as dt,L as Ms,M as al,T as Ke,N as re,O as Tt,Q as _a,U as rl,V as ta,W as ol,S as ut,X as na,Y as il,Z as sa,_ as ll,$ as Ia,a0 as cl,a1 as ka,a2 as cn,a3 as At,a4 as dl,a5 as ul,a6 as Je,a7 as is,a8 as fl,a9 as pl,aa as ml,ab as hl,ac as xl,ad as gl,ae as bl,af as Ma,ag as vl,ah as wl,ai as yl,aj as jl}from"./canvas-utils-DduuDUb8.js";import{c as Ra,u as Le,P as ve,B as Y,L as De,l as Nl,b as Cl}from"./label-BqRU9iC8.js";import{u as Sl,V as _l,F as ls,e as Da,f as Rs,g as Ds,h as Es,i as cs,S as Pn,A as dn,j as it,k as lt,l as ct,n as Ea,o as Ta,p as Il,q as kl,r as Ml,s as aa,v as Rl,w as Dl,x as El,y as Tl,z as Al,B as ra,R as Ol,P as Ll,C as Aa,E as Pl,T as Oa,D as La,O as Pa,G as $l,H as zl}from"./code-editor-iDtN62Sg.js";import{c as Ts,R as $a,A as za,P as Fa,a as Ba,G as Va,L as Ka,S as Ha,I as Ga,b as Ua,d as Wa,e as qa,f as Xa,g as Ya,h as Qa,i as Za,u as un,j as st,k as fn,l as pn,m as Kn,n as Fl,K as Bl,M as Vl,W as Ja,H as er,o as oa,p as Kl}from"./canvas-DbZZ0cKa.js";import{a as ue,c as tr,u as Hl,k as jt,K as Nt}from"./theme-provider-Duo_jK4a.js";import{c as Gl,u as Hn,C as Ul,a as Wl,b as ke}from"./databases-DiL8jvE9.js";import{b as ql,d as Xl}from"./use-storage-BV5ljb6r.js";import{B as Yl}from"./badge-KJycx4YO.js";import{D as U}from"./database-type-DzFzzfY6.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],Zl=ue("arrow-left-right",Ql);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ec=ue("book-open",Jl);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]],nc=ue("braces",tc);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"m17 7 5 5-5 5",key:"1xlxn0"}],["path",{d:"m7 7-5 5 5 5",key:"19njba"}],["path",{d:"M8 12h.01",key:"czm47f"}]],ac=ue("chevrons-left-right-ellipsis",sc);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],oc=ue("code-xml",rc);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],mn=ue("ellipsis-vertical",ic);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],nr=ue("ellipsis",lc);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v6",key:"rc0qvx"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"4",cy:"16",r:"2",key:"1ehqvc"}],["path",{d:"m10 10-4.5 4.5",key:"7fwrp6"}],["path",{d:"m9 11 1 1",key:"wa6s5q"}]],ds=ue("file-key-2",cc);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]],uc=ue("file-type",dc);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],pc=ue("folder-open",fc);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],hc=ue("globe",mc);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"m3 10 3-3-3-3",key:"i7pm08"}],["path",{d:"m3 20 3-3-3-3",key:"20gx1n"}]],sr=ue("list-collapse",xc);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],bc=ue("pause",gc);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=[["path",{d:"m10 10-6.157 6.162a2 2 0 0 0-.5.833l-1.322 4.36a.5.5 0 0 0 .622.624l4.358-1.323a2 2 0 0 0 .83-.5L14 13.982",key:"bjo8r8"}],["path",{d:"m12.829 7.172 4.359-4.346a1 1 0 1 1 3.986 3.986l-4.353 4.353",key:"16h5ne"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],wc=ue("pencil-off",vc);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],et=ue("plus",yc);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M17 12h.01",key:"1m0b6t"}],["path",{d:"M7 12h.01",key:"eqddd0"}]],Nc=ue("rectangle-ellipsis",jc);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=[["path",{d:"M4 10c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2",key:"4i38lg"}],["path",{d:"M10 16c-1.1 0-2-.9-2-2v-4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2",key:"mlte4a"}],["rect",{width:"8",height:"8",x:"14",y:"14",rx:"2",key:"1fa9i4"}]],Sc=ue("square-stack",Cc);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Ic=ue("undo-2",_c);var ar=l.forwardRef((e,n)=>{const{children:s,...a}=e,r=l.Children.toArray(s),o=r.find(Mc);if(o){const i=o.props.children,c=r.map(d=>d===o?l.Children.count(i)>1?l.Children.only(null):l.isValidElement(i)?i.props.children:null:d);return t.jsx(us,{...a,ref:n,children:l.isValidElement(i)?l.cloneElement(i,void 0,c):null})}return t.jsx(us,{...a,ref:n,children:s})});ar.displayName="Slot";var us=l.forwardRef((e,n)=>{const{children:s,...a}=e;if(l.isValidElement(s)){const r=Dc(s);return l.cloneElement(s,{...Rc(a,s.props),ref:n?Ra(n,r):r})}return l.Children.count(s)>1?l.Children.only(null):null});us.displayName="SlotClone";var kc=({children:e})=>t.jsx(t.Fragment,{children:e});function Mc(e){return l.isValidElement(e)&&e.type===kc}function Rc(e,n){const s={...n};for(const a in n){const r=e[a],o=n[a];/^on[A-Z]/.test(a)?r&&o?s[a]=(...c)=>{o(...c),r(...c)}:r&&(s[a]=r):a==="style"?s[a]={...r,...o}:a==="className"&&(s[a]=[r,o].filter(Boolean).join(" "))}return{...e,...s}}function Dc(e){var a,r;let n=(a=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:a.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var Ec=[" ","Enter","ArrowUp","ArrowDown"],Tc=[" ","Enter"],hn="Select",[Gn,Un,Ac]=Na(hn),[Ot,xm]=Is(hn,[Ac,ya]),Wn=ya(),[Oc,at]=Ot(hn),[Lc,Pc]=Ot(hn),rr=e=>{const{__scopeSelect:n,children:s,open:a,defaultOpen:r,onOpenChange:o,value:i,defaultValue:c,onValueChange:d,dir:f,name:p,autoComplete:u,disabled:g,required:x,form:m}=e,h=Wn(n),[v,N]=l.useState(null),[b,w]=l.useState(null),[y,j]=l.useState(!1),C=ja(f),[S=!1,M]=nn({prop:a,defaultProp:r,onChange:o}),[k,L]=nn({prop:i,defaultProp:c,onChange:d}),E=l.useRef(null),T=v?m||!!v.closest("form"):!0,[_,H]=l.useState(new Set),W=Array.from(_).map(z=>z.props.value).join(";");return t.jsx(Hi,{...h,children:t.jsxs(Oc,{required:x,scope:n,trigger:v,onTriggerChange:N,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:y,onValueNodeHasChildrenChange:j,contentId:tt(),value:k,onValueChange:L,open:S,onOpenChange:M,dir:C,triggerPointerDownPosRef:E,disabled:g,children:[t.jsx(Gn.Provider,{scope:n,children:t.jsx(Lc,{scope:e.__scopeSelect,onNativeOptionAdd:l.useCallback(z=>{H(O=>new Set(O).add(z))},[]),onNativeOptionRemove:l.useCallback(z=>{H(O=>{const A=new Set(O);return A.delete(z),A})},[]),children:s})}),T?t.jsxs(Dr,{"aria-hidden":!0,required:x,tabIndex:-1,name:p,autoComplete:u,value:k,onChange:z=>L(z.target.value),disabled:g,form:m,children:[k===void 0?t.jsx("option",{value:""}):null,Array.from(_)]},W):null]})})};rr.displayName=hn;var or="SelectTrigger",ir=l.forwardRef((e,n)=>{const{__scopeSelect:s,disabled:a=!1,...r}=e,o=Wn(s),i=at(or,s),c=i.disabled||a,d=Le(n,i.onTriggerChange),f=Un(s),p=l.useRef("touch"),[u,g,x]=Er(h=>{const v=f().filter(w=>!w.disabled),N=v.find(w=>w.value===i.value),b=Tr(v,h,N);b!==void 0&&i.onValueChange(b.value)}),m=h=>{c||(i.onOpenChange(!0),x()),h&&(i.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return t.jsx(Gi,{asChild:!0,...o,children:t.jsx(ve.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Rr(i.value)?"":void 0,...r,ref:d,onClick:X(r.onClick,h=>{h.currentTarget.focus(),p.current!=="mouse"&&m(h)}),onPointerDown:X(r.onPointerDown,h=>{p.current=h.pointerType;const v=h.target;v.hasPointerCapture(h.pointerId)&&v.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(m(h),h.preventDefault())}),onKeyDown:X(r.onKeyDown,h=>{const v=u.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&g(h.key),!(v&&h.key===" ")&&Ec.includes(h.key)&&(m(),h.preventDefault())})})})});ir.displayName=or;var lr="SelectValue",cr=l.forwardRef((e,n)=>{const{__scopeSelect:s,className:a,style:r,children:o,placeholder:i="",...c}=e,d=at(lr,s),{onValueNodeHasChildrenChange:f}=d,p=o!==void 0,u=Le(n,d.onValueNodeChange);return nt(()=>{f(p)},[f,p]),t.jsx(ve.span,{...c,ref:u,style:{pointerEvents:"none"},children:Rr(d.value)?t.jsx(t.Fragment,{children:i}):o})});cr.displayName=lr;var $c="SelectIcon",dr=l.forwardRef((e,n)=>{const{__scopeSelect:s,children:a,...r}=e;return t.jsx(ve.span,{"aria-hidden":!0,...r,ref:n,children:a||"▼"})});dr.displayName=$c;var zc="SelectPortal",ur=e=>t.jsx(Ui,{asChild:!0,...e});ur.displayName=zc;var ft="SelectContent",fr=l.forwardRef((e,n)=>{const s=at(ft,e.__scopeSelect),[a,r]=l.useState();if(nt(()=>{r(new DocumentFragment)},[]),!s.open){const o=a;return o?ot.createPortal(t.jsx(pr,{scope:e.__scopeSelect,children:t.jsx(Gn.Slot,{scope:e.__scopeSelect,children:t.jsx("div",{children:e.children})})}),o):null}return t.jsx(mr,{...e,ref:n})});fr.displayName=ft;var Ae=10,[pr,rt]=Ot(ft),Fc="SelectContentImpl",mr=l.forwardRef((e,n)=>{const{__scopeSelect:s,position:a="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:o,onPointerDownOutside:i,side:c,sideOffset:d,align:f,alignOffset:p,arrowPadding:u,collisionBoundary:g,collisionPadding:x,sticky:m,hideWhenDetached:h,avoidCollisions:v,...N}=e,b=at(ft,s),[w,y]=l.useState(null),[j,C]=l.useState(null),S=Le(n,$=>y($)),[M,k]=l.useState(null),[L,E]=l.useState(null),T=Un(s),[_,H]=l.useState(!1),W=l.useRef(!1);l.useEffect(()=>{if(w)return qi(w)},[w]),Xi();const z=l.useCallback($=>{const[V,...B]=T().map(P=>P.ref.current),[R]=B.slice(-1),K=document.activeElement;for(const P of $)if(P===K||(P==null||P.scrollIntoView({block:"nearest"}),P===V&&j&&(j.scrollTop=0),P===R&&j&&(j.scrollTop=j.scrollHeight),P==null||P.focus(),document.activeElement!==K))return},[T,j]),O=l.useCallback(()=>z([M,w]),[z,M,w]);l.useEffect(()=>{_&&O()},[_,O]);const{onOpenChange:A,triggerPointerDownPosRef:F}=b;l.useEffect(()=>{if(w){let $={x:0,y:0};const V=R=>{var K,P;$={x:Math.abs(Math.round(R.pageX)-(((K=F.current)==null?void 0:K.x)??0)),y:Math.abs(Math.round(R.pageY)-(((P=F.current)==null?void 0:P.y)??0))}},B=R=>{$.x<=10&&$.y<=10?R.preventDefault():w.contains(R.target)||A(!1),document.removeEventListener("pointermove",V),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",V),document.addEventListener("pointerup",B,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",B,{capture:!0})}}},[w,A,F]),l.useEffect(()=>{const $=()=>A(!1);return window.addEventListener("blur",$),window.addEventListener("resize",$),()=>{window.removeEventListener("blur",$),window.removeEventListener("resize",$)}},[A]);const[he,ye]=Er($=>{const V=T().filter(K=>!K.disabled),B=V.find(K=>K.ref.current===document.activeElement),R=Tr(V,$,B);R&&setTimeout(()=>R.ref.current.focus())}),ee=l.useCallback(($,V,B)=>{const R=!W.current&&!B;(b.value!==void 0&&b.value===V||R)&&(k($),R&&(W.current=!0))},[b.value]),se=l.useCallback(()=>w==null?void 0:w.focus(),[w]),te=l.useCallback(($,V,B)=>{const R=!W.current&&!B;(b.value!==void 0&&b.value===V||R)&&E($)},[b.value]),je=a==="popper"?fs:hr,ne=je===fs?{side:c,sideOffset:d,align:f,alignOffset:p,arrowPadding:u,collisionBoundary:g,collisionPadding:x,sticky:m,hideWhenDetached:h,avoidCollisions:v}:{};return t.jsx(pr,{scope:s,content:w,viewport:j,onViewportChange:C,itemRefCallback:ee,selectedItem:M,onItemLeave:se,itemTextRefCallback:te,focusSelectedItem:O,selectedItemText:L,position:a,isPositioned:_,searchRef:he,children:t.jsx(Yi,{as:ar,allowPinchZoom:!0,children:t.jsx(Qi,{asChild:!0,trapped:b.open,onMountAutoFocus:$=>{$.preventDefault()},onUnmountAutoFocus:X(r,$=>{var V;(V=b.trigger)==null||V.focus({preventScroll:!0}),$.preventDefault()}),children:t.jsx(Zi,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:$=>$.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:t.jsx(je,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:$=>$.preventDefault(),...N,...ne,onPlaced:()=>H(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:X(N.onKeyDown,$=>{const V=$.ctrlKey||$.altKey||$.metaKey;if($.key==="Tab"&&$.preventDefault(),!V&&$.key.length===1&&ye($.key),["ArrowUp","ArrowDown","Home","End"].includes($.key)){let R=T().filter(K=>!K.disabled).map(K=>K.ref.current);if(["ArrowUp","End"].includes($.key)&&(R=R.slice().reverse()),["ArrowUp","ArrowDown"].includes($.key)){const K=$.target,P=R.indexOf(K);R=R.slice(P+1)}setTimeout(()=>z(R)),$.preventDefault()}})})})})})})});mr.displayName=Fc;var Bc="SelectItemAlignedPosition",hr=l.forwardRef((e,n)=>{const{__scopeSelect:s,onPlaced:a,...r}=e,o=at(ft,s),i=rt(ft,s),[c,d]=l.useState(null),[f,p]=l.useState(null),u=Le(n,S=>p(S)),g=Un(s),x=l.useRef(!1),m=l.useRef(!0),{viewport:h,selectedItem:v,selectedItemText:N,focusSelectedItem:b}=i,w=l.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&f&&h&&v&&N){const S=o.trigger.getBoundingClientRect(),M=f.getBoundingClientRect(),k=o.valueNode.getBoundingClientRect(),L=N.getBoundingClientRect();if(o.dir!=="rtl"){const K=L.left-M.left,P=k.left-K,ae=S.left-P,Z=S.width+ae,Ce=Math.max(Z,M.width),Pe=window.innerWidth-Ae,bt=ea(P,[Ae,Math.max(Ae,Pe-Ce)]);c.style.minWidth=Z+"px",c.style.left=bt+"px"}else{const K=M.right-L.right,P=window.innerWidth-k.right-K,ae=window.innerWidth-S.right-P,Z=S.width+ae,Ce=Math.max(Z,M.width),Pe=window.innerWidth-Ae,bt=ea(P,[Ae,Math.max(Ae,Pe-Ce)]);c.style.minWidth=Z+"px",c.style.right=bt+"px"}const E=g(),T=window.innerHeight-Ae*2,_=h.scrollHeight,H=window.getComputedStyle(f),W=parseInt(H.borderTopWidth,10),z=parseInt(H.paddingTop,10),O=parseInt(H.borderBottomWidth,10),A=parseInt(H.paddingBottom,10),F=W+z+_+A+O,he=Math.min(v.offsetHeight*5,F),ye=window.getComputedStyle(h),ee=parseInt(ye.paddingTop,10),se=parseInt(ye.paddingBottom,10),te=S.top+S.height/2-Ae,je=T-te,ne=v.offsetHeight/2,$=v.offsetTop+ne,V=W+z+$,B=F-V;if(V<=te){const K=E.length>0&&v===E[E.length-1].ref.current;c.style.bottom="0px";const P=f.clientHeight-h.offsetTop-h.offsetHeight,ae=Math.max(je,ne+(K?se:0)+P+O),Z=V+ae;c.style.height=Z+"px"}else{const K=E.length>0&&v===E[0].ref.current;c.style.top="0px";const ae=Math.max(te,W+h.offsetTop+(K?ee:0)+ne)+B;c.style.height=ae+"px",h.scrollTop=V-te+h.offsetTop}c.style.margin=`${Ae}px 0`,c.style.minHeight=he+"px",c.style.maxHeight=T+"px",a==null||a(),requestAnimationFrame(()=>x.current=!0)}},[g,o.trigger,o.valueNode,c,f,h,v,N,o.dir,a]);nt(()=>w(),[w]);const[y,j]=l.useState();nt(()=>{f&&j(window.getComputedStyle(f).zIndex)},[f]);const C=l.useCallback(S=>{S&&m.current===!0&&(w(),b==null||b(),m.current=!1)},[w,b]);return t.jsx(Kc,{scope:s,contentWrapper:c,shouldExpandOnScrollRef:x,onScrollButtonChange:C,children:t.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:y},children:t.jsx(ve.div,{...r,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});hr.displayName=Bc;var Vc="SelectPopperPosition",fs=l.forwardRef((e,n)=>{const{__scopeSelect:s,align:a="start",collisionPadding:r=Ae,...o}=e,i=Wn(s);return t.jsx(Ji,{...i,...o,ref:n,align:a,collisionPadding:r,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});fs.displayName=Vc;var[Kc,As]=Ot(ft,{}),ps="SelectViewport",xr=l.forwardRef((e,n)=>{const{__scopeSelect:s,nonce:a,...r}=e,o=rt(ps,s),i=As(ps,s),c=Le(n,o.onViewportChange),d=l.useRef(0);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),t.jsx(Gn.Slot,{scope:s,children:t.jsx(ve.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:X(r.onScroll,f=>{const p=f.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:g}=i;if(g!=null&&g.current&&u){const x=Math.abs(d.current-p.scrollTop);if(x>0){const m=window.innerHeight-Ae*2,h=parseFloat(u.style.minHeight),v=parseFloat(u.style.height),N=Math.max(h,v);if(N<m){const b=N+x,w=Math.min(m,b),y=b-w;u.style.height=w+"px",u.style.bottom==="0px"&&(p.scrollTop=y>0?y:0,u.style.justifyContent="flex-end")}}}d.current=p.scrollTop})})})]})});xr.displayName=ps;var gr="SelectGroup",[Hc,Gc]=Ot(gr),br=l.forwardRef((e,n)=>{const{__scopeSelect:s,...a}=e,r=tt();return t.jsx(Hc,{scope:s,id:r,children:t.jsx(ve.div,{role:"group","aria-labelledby":r,...a,ref:n})})});br.displayName=gr;var vr="SelectLabel",wr=l.forwardRef((e,n)=>{const{__scopeSelect:s,...a}=e,r=Gc(vr,s);return t.jsx(ve.div,{id:r.id,...a,ref:n})});wr.displayName=vr;var $n="SelectItem",[Uc,yr]=Ot($n),jr=l.forwardRef((e,n)=>{const{__scopeSelect:s,value:a,disabled:r=!1,textValue:o,...i}=e,c=at($n,s),d=rt($n,s),f=c.value===a,[p,u]=l.useState(o??""),[g,x]=l.useState(!1),m=Le(n,b=>{var w;return(w=d.itemRefCallback)==null?void 0:w.call(d,b,a,r)}),h=tt(),v=l.useRef("touch"),N=()=>{r||(c.onValueChange(a),c.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return t.jsx(Uc,{scope:s,value:a,disabled:r,textId:h,isSelected:f,onItemTextChange:l.useCallback(b=>{u(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:t.jsx(Gn.ItemSlot,{scope:s,value:a,disabled:r,textValue:p,children:t.jsx(ve.div,{role:"option","aria-labelledby":h,"data-highlighted":g?"":void 0,"aria-selected":f&&g,"data-state":f?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...i,ref:m,onFocus:X(i.onFocus,()=>x(!0)),onBlur:X(i.onBlur,()=>x(!1)),onClick:X(i.onClick,()=>{v.current!=="mouse"&&N()}),onPointerUp:X(i.onPointerUp,()=>{v.current==="mouse"&&N()}),onPointerDown:X(i.onPointerDown,b=>{v.current=b.pointerType}),onPointerMove:X(i.onPointerMove,b=>{var w;v.current=b.pointerType,r?(w=d.onItemLeave)==null||w.call(d):v.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:X(i.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=d.onItemLeave)==null||w.call(d))}),onKeyDown:X(i.onKeyDown,b=>{var y;((y=d.searchRef)==null?void 0:y.current)!==""&&b.key===" "||(Tc.includes(b.key)&&N(),b.key===" "&&b.preventDefault())})})})})});jr.displayName=$n;var Qt="SelectItemText",Nr=l.forwardRef((e,n)=>{const{__scopeSelect:s,className:a,style:r,...o}=e,i=at(Qt,s),c=rt(Qt,s),d=yr(Qt,s),f=Pc(Qt,s),[p,u]=l.useState(null),g=Le(n,N=>u(N),d.onItemTextChange,N=>{var b;return(b=c.itemTextRefCallback)==null?void 0:b.call(c,N,d.value,d.disabled)}),x=p==null?void 0:p.textContent,m=l.useMemo(()=>t.jsx("option",{value:d.value,disabled:d.disabled,children:x},d.value),[d.disabled,d.value,x]),{onNativeOptionAdd:h,onNativeOptionRemove:v}=f;return nt(()=>(h(m),()=>v(m)),[h,v,m]),t.jsxs(t.Fragment,{children:[t.jsx(ve.span,{id:d.textId,...o,ref:g}),d.isSelected&&i.valueNode&&!i.valueNodeHasChildren?ot.createPortal(o.children,i.valueNode):null]})});Nr.displayName=Qt;var Cr="SelectItemIndicator",Sr=l.forwardRef((e,n)=>{const{__scopeSelect:s,...a}=e;return yr(Cr,s).isSelected?t.jsx(ve.span,{"aria-hidden":!0,...a,ref:n}):null});Sr.displayName=Cr;var ms="SelectScrollUpButton",_r=l.forwardRef((e,n)=>{const s=rt(ms,e.__scopeSelect),a=As(ms,e.__scopeSelect),[r,o]=l.useState(!1),i=Le(n,a.onScrollButtonChange);return nt(()=>{if(s.viewport&&s.isPositioned){let c=function(){const f=d.scrollTop>0;o(f)};const d=s.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),r?t.jsx(kr,{...e,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=s;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});_r.displayName=ms;var hs="SelectScrollDownButton",Ir=l.forwardRef((e,n)=>{const s=rt(hs,e.__scopeSelect),a=As(hs,e.__scopeSelect),[r,o]=l.useState(!1),i=Le(n,a.onScrollButtonChange);return nt(()=>{if(s.viewport&&s.isPositioned){let c=function(){const f=d.scrollHeight-d.clientHeight,p=Math.ceil(d.scrollTop)<f;o(p)};const d=s.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),r?t.jsx(kr,{...e,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=s;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});Ir.displayName=hs;var kr=l.forwardRef((e,n)=>{const{__scopeSelect:s,onAutoScroll:a,...r}=e,o=rt("SelectScrollButton",s),i=l.useRef(null),c=Un(s),d=l.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return l.useEffect(()=>()=>d(),[d]),nt(()=>{var p;const f=c().find(u=>u.ref.current===document.activeElement);(p=f==null?void 0:f.ref.current)==null||p.scrollIntoView({block:"nearest"})},[c]),t.jsx(ve.div,{"aria-hidden":!0,...r,ref:n,style:{flexShrink:0,...r.style},onPointerDown:X(r.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(a,50))}),onPointerMove:X(r.onPointerMove,()=>{var f;(f=o.onItemLeave)==null||f.call(o),i.current===null&&(i.current=window.setInterval(a,50))}),onPointerLeave:X(r.onPointerLeave,()=>{d()})})}),Wc="SelectSeparator",Mr=l.forwardRef((e,n)=>{const{__scopeSelect:s,...a}=e;return t.jsx(ve.div,{"aria-hidden":!0,...a,ref:n})});Mr.displayName=Wc;var xs="SelectArrow",qc=l.forwardRef((e,n)=>{const{__scopeSelect:s,...a}=e,r=Wn(s),o=at(xs,s),i=rt(xs,s);return o.open&&i.position==="popper"?t.jsx(el,{...r,...a,ref:n}):null});qc.displayName=xs;function Rr(e){return e===""||e===void 0}var Dr=l.forwardRef((e,n)=>{const{value:s,...a}=e,r=l.useRef(null),o=Le(n,r),i=Sl(s);return l.useEffect(()=>{const c=r.current,d=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(d,"value").set;if(i!==s&&p){const u=new Event("change",{bubbles:!0});p.call(c,s),c.dispatchEvent(u)}},[i,s]),t.jsx(_l,{asChild:!0,children:t.jsx("select",{...a,ref:o,defaultValue:s})})});Dr.displayName="BubbleSelect";function Er(e){const n=Wi(e),s=l.useRef(""),a=l.useRef(0),r=l.useCallback(i=>{const c=s.current+i;n(c),function d(f){s.current=f,window.clearTimeout(a.current),f!==""&&(a.current=window.setTimeout(()=>d(""),1e3))}(c)},[n]),o=l.useCallback(()=>{s.current="",window.clearTimeout(a.current)},[]);return l.useEffect(()=>()=>window.clearTimeout(a.current),[]),[s,r,o]}function Tr(e,n,s){const r=n.length>1&&Array.from(n).every(f=>f===n[0])?n[0]:n,o=s?e.indexOf(s):-1;let i=Xc(e,Math.max(o,0));r.length===1&&(i=i.filter(f=>f!==s));const d=i.find(f=>f.textValue.toLowerCase().startsWith(r.toLowerCase()));return d!==s?d:void 0}function Xc(e,n){return e.map((s,a)=>e[(n+a)%e.length])}var Yc=rr,Ar=ir,Qc=cr,Zc=dr,Jc=ur,Or=fr,ed=xr,td=br,Lr=wr,Pr=jr,nd=Nr,sd=Sr,$r=_r,zr=Ir,Fr=Mr;const xn=Yc,sn=td,gn=Qc,Lt=I.forwardRef(({className:e,children:n,...s},a)=>t.jsxs(Ar,{ref:a,className:D("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[n,t.jsx(Zc,{asChild:!0,children:t.jsx(tl,{className:"size-4 opacity-50"})})]}));Lt.displayName=Ar.displayName;const Br=I.forwardRef(({className:e,...n},s)=>t.jsx($r,{ref:s,className:D("flex cursor-default items-center justify-center py-1",e),...n,children:t.jsx(nl,{})}));Br.displayName=$r.displayName;const Vr=I.forwardRef(({className:e,...n},s)=>t.jsx(zr,{ref:s,className:D("flex cursor-default items-center justify-center py-1",e),...n,children:t.jsx(sl,{})}));Vr.displayName=zr.displayName;const Pt=I.forwardRef(({className:e,children:n,position:s="popper",...a},r)=>t.jsx(Jc,{children:t.jsxs(Or,{ref:r,className:D("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...a,children:[t.jsx(Br,{}),t.jsx(ed,{className:D("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),t.jsx(Vr,{})]})}));Pt.displayName=Or.displayName;const gs=I.forwardRef(({className:e,...n},s)=>t.jsx(Lr,{ref:s,className:D("px-2 py-1.5 text-sm font-semibold",e),...n}));gs.displayName=Lr.displayName;const pe=I.forwardRef(({className:e,children:n,...s},a)=>t.jsxs(Pr,{ref:a,className:D("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[t.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:t.jsx(sd,{children:t.jsx(ks,{className:"size-4"})})}),t.jsx(nd,{children:n})]}));pe.displayName=Pr.displayName;const Kr=I.forwardRef(({className:e,...n},s)=>t.jsx(Fr,{ref:s,className:D("-mx-1 my-1 h-px bg-muted",e),...n}));Kr.displayName=Fr.displayName;const me=I.forwardRef((e,n)=>t.jsx(Y,{ref:n,variant:"ghost",className:"size-8 p-2 text-slate-500 hover:cursor-pointer hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",asChild:!0,...e}));me.displayName="ListItemHeaderButton";function ad(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return l.useMemo(()=>a=>{n.forEach(r=>r(a))},n)}const qn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $t(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function Os(e){return"nodeType"in e}function Ne(e){var n,s;return e?$t(e)?e:Os(e)&&(n=(s=e.ownerDocument)==null?void 0:s.defaultView)!=null?n:window:window}function Ls(e){const{Document:n}=Ne(e);return e instanceof n}function bn(e){return $t(e)?!1:e instanceof Ne(e).HTMLElement}function Hr(e){return e instanceof Ne(e).SVGElement}function zt(e){return e?$t(e)?e.document:Os(e)?Ls(e)?e:bn(e)||Hr(e)?e.ownerDocument:document:document:document}const Ve=qn?l.useLayoutEffect:l.useEffect;function Ps(e){const n=l.useRef(e);return Ve(()=>{n.current=e}),l.useCallback(function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return n.current==null?void 0:n.current(...a)},[])}function rd(){const e=l.useRef(null),n=l.useCallback((a,r)=>{e.current=setInterval(a,r)},[]),s=l.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,s]}function an(e,n){n===void 0&&(n=[e]);const s=l.useRef(e);return Ve(()=>{s.current!==e&&(s.current=e)},n),s}function vn(e,n){const s=l.useRef();return l.useMemo(()=>{const a=e(s.current);return s.current=a,a},[...n])}function zn(e){const n=Ps(e),s=l.useRef(null),a=l.useCallback(r=>{r!==s.current&&(n==null||n(r,s.current)),s.current=r},[]);return[s,a]}function bs(e){const n=l.useRef();return l.useEffect(()=>{n.current=e},[e]),n.current}let ns={};function wn(e,n){return l.useMemo(()=>{if(n)return n;const s=ns[e]==null?0:ns[e]+1;return ns[e]=s,e+"-"+s},[e,n])}function Gr(e){return function(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),r=1;r<s;r++)a[r-1]=arguments[r];return a.reduce((o,i)=>{const c=Object.entries(i);for(const[d,f]of c){const p=o[d];p!=null&&(o[d]=p+e*f)}return o},{...n})}}const Mt=Gr(1),Fn=Gr(-1);function od(e){return"clientX"in e&&"clientY"in e}function $s(e){if(!e)return!1;const{KeyboardEvent:n}=Ne(e.target);return n&&e instanceof n}function id(e){if(!e)return!1;const{TouchEvent:n}=Ne(e.target);return n&&e instanceof n}function vs(e){if(id(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:s}=e.touches[0];return{x:n,y:s}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:s}=e.changedTouches[0];return{x:n,y:s}}}return od(e)?{x:e.clientX,y:e.clientY}:null}const Ue=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:s}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:s}=e;return"scaleX("+n+") scaleY("+s+")"}},Transform:{toString(e){if(e)return[Ue.Translate.toString(e),Ue.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:s,easing:a}=e;return n+" "+s+"ms "+a}}}),ia="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ld(e){return e.matches(ia)?e:e.querySelector(ia)}const cd={display:"none"};function dd(e){let{id:n,value:s}=e;return I.createElement("div",{id:n,style:cd},s)}function ud(e){let{id:n,announcement:s,ariaLiveType:a="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return I.createElement("div",{id:n,style:r,role:"status","aria-live":a,"aria-atomic":!0},s)}function fd(){const[e,n]=l.useState("");return{announce:l.useCallback(a=>{a!=null&&n(a)},[]),announcement:e}}const Ur=l.createContext(null);function pd(e){const n=l.useContext(Ur);l.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function md(){const[e]=l.useState(()=>new Set),n=l.useCallback(a=>(e.add(a),()=>e.delete(a)),[e]);return[l.useCallback(a=>{let{type:r,event:o}=a;e.forEach(i=>{var c;return(c=i[r])==null?void 0:c.call(i,o)})},[e]),n]}const hd={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},xd={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was moved over droppable area "+s.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was dropped over droppable area "+s.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function gd(e){let{announcements:n=xd,container:s,hiddenTextDescribedById:a,screenReaderInstructions:r=hd}=e;const{announce:o,announcement:i}=fd(),c=wn("DndLiveRegion"),[d,f]=l.useState(!1);if(l.useEffect(()=>{f(!0)},[]),pd(l.useMemo(()=>({onDragStart(u){let{active:g}=u;o(n.onDragStart({active:g}))},onDragMove(u){let{active:g,over:x}=u;n.onDragMove&&o(n.onDragMove({active:g,over:x}))},onDragOver(u){let{active:g,over:x}=u;o(n.onDragOver({active:g,over:x}))},onDragEnd(u){let{active:g,over:x}=u;o(n.onDragEnd({active:g,over:x}))},onDragCancel(u){let{active:g,over:x}=u;o(n.onDragCancel({active:g,over:x}))}}),[o,n])),!d)return null;const p=I.createElement(I.Fragment,null,I.createElement(dd,{id:a,value:r.draggable}),I.createElement(ud,{id:c,announcement:i}));return s?ot.createPortal(p,s):p}var oe;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(oe||(oe={}));function Bn(){}function yn(e,n){return l.useMemo(()=>({sensor:e,options:{}}),[e,n])}function jn(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return l.useMemo(()=>[...n].filter(a=>a!=null),[...n])}const Oe=Object.freeze({x:0,y:0});function bd(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function vd(e,n){let{data:{value:s}}=e,{data:{value:a}}=n;return s-a}function wd(e,n){let{data:{value:s}}=e,{data:{value:a}}=n;return a-s}function yd(e,n){if(!e||e.length===0)return null;const[s]=e;return s[n]}function la(e,n,s){return n===void 0&&(n=e.left),s===void 0&&(s=e.top),{x:n+e.width*.5,y:s+e.height*.5}}const Nn=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:a}=e;const r=la(n,n.left,n.top),o=[];for(const i of a){const{id:c}=i,d=s.get(c);if(d){const f=bd(la(d),r);o.push({id:c,data:{droppableContainer:i,value:f}})}}return o.sort(vd)};function jd(e,n){const s=Math.max(n.top,e.top),a=Math.max(n.left,e.left),r=Math.min(n.left+n.width,e.left+e.width),o=Math.min(n.top+n.height,e.top+e.height),i=r-a,c=o-s;if(a<r&&s<o){const d=n.width*n.height,f=e.width*e.height,p=i*c,u=p/(d+f-p);return Number(u.toFixed(4))}return 0}const Nd=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:a}=e;const r=[];for(const o of a){const{id:i}=o,c=s.get(i);if(c){const d=jd(c,n);d>0&&r.push({id:i,data:{droppableContainer:o,value:d}})}}return r.sort(wd)};function Cd(e,n,s){return{...e,scaleX:n&&s?n.width/s.width:1,scaleY:n&&s?n.height/s.height:1}}function Wr(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:Oe}function Sd(e){return function(s){for(var a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];return r.reduce((i,c)=>({...i,top:i.top+e*c.y,bottom:i.bottom+e*c.y,left:i.left+e*c.x,right:i.right+e*c.x}),{...s})}}const _d=Sd(1);function Id(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function kd(e,n,s){const a=Id(n);if(!a)return e;const{scaleX:r,scaleY:o,x:i,y:c}=a,d=e.left-i-(1-r)*parseFloat(s),f=e.top-c-(1-o)*parseFloat(s.slice(s.indexOf(" ")+1)),p=r?e.width/r:e.width,u=o?e.height/o:e.height;return{width:p,height:u,top:f,right:d+p,bottom:f+u,left:d}}const Md={ignoreTransform:!1};function Ft(e,n){n===void 0&&(n=Md);let s=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:f,transformOrigin:p}=Ne(e).getComputedStyle(e);f&&(s=kd(s,f,p))}const{top:a,left:r,width:o,height:i,bottom:c,right:d}=s;return{top:a,left:r,width:o,height:i,bottom:c,right:d}}function ca(e){return Ft(e,{ignoreTransform:!0})}function Rd(e){const n=e.innerWidth,s=e.innerHeight;return{top:0,left:0,right:n,bottom:s,width:n,height:s}}function Dd(e,n){return n===void 0&&(n=Ne(e).getComputedStyle(e)),n.position==="fixed"}function Ed(e,n){n===void 0&&(n=Ne(e).getComputedStyle(e));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const o=n[r];return typeof o=="string"?s.test(o):!1})}function zs(e,n){const s=[];function a(r){if(n!=null&&s.length>=n||!r)return s;if(Ls(r)&&r.scrollingElement!=null&&!s.includes(r.scrollingElement))return s.push(r.scrollingElement),s;if(!bn(r)||Hr(r)||s.includes(r))return s;const o=Ne(e).getComputedStyle(r);return r!==e&&Ed(r,o)&&s.push(r),Dd(r,o)?s:a(r.parentNode)}return e?a(e):s}function qr(e){const[n]=zs(e,1);return n??null}function ss(e){return!qn||!e?null:$t(e)?e:Os(e)?Ls(e)||e===zt(e).scrollingElement?window:bn(e)?e:null:null}function Xr(e){return $t(e)?e.scrollX:e.scrollLeft}function Yr(e){return $t(e)?e.scrollY:e.scrollTop}function ws(e){return{x:Xr(e),y:Yr(e)}}var ie;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ie||(ie={}));function Qr(e){return!qn||!e?!1:e===document.scrollingElement}function Zr(e){const n={x:0,y:0},s=Qr(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-s.width,y:e.scrollHeight-s.height},r=e.scrollTop<=n.y,o=e.scrollLeft<=n.x,i=e.scrollTop>=a.y,c=e.scrollLeft>=a.x;return{isTop:r,isLeft:o,isBottom:i,isRight:c,maxScroll:a,minScroll:n}}const Td={x:.2,y:.2};function Ad(e,n,s,a,r){let{top:o,left:i,right:c,bottom:d}=s;a===void 0&&(a=10),r===void 0&&(r=Td);const{isTop:f,isBottom:p,isLeft:u,isRight:g}=Zr(e),x={x:0,y:0},m={x:0,y:0},h={height:n.height*r.y,width:n.width*r.x};return!f&&o<=n.top+h.height?(x.y=ie.Backward,m.y=a*Math.abs((n.top+h.height-o)/h.height)):!p&&d>=n.bottom-h.height&&(x.y=ie.Forward,m.y=a*Math.abs((n.bottom-h.height-d)/h.height)),!g&&c>=n.right-h.width?(x.x=ie.Forward,m.x=a*Math.abs((n.right-h.width-c)/h.width)):!u&&i<=n.left+h.width&&(x.x=ie.Backward,m.x=a*Math.abs((n.left+h.width-i)/h.width)),{direction:x,speed:m}}function Od(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:i}=window;return{top:0,left:0,right:o,bottom:i,width:o,height:i}}const{top:n,left:s,right:a,bottom:r}=e.getBoundingClientRect();return{top:n,left:s,right:a,bottom:r,width:e.clientWidth,height:e.clientHeight}}function Jr(e){return e.reduce((n,s)=>Mt(n,ws(s)),Oe)}function Ld(e){return e.reduce((n,s)=>n+Xr(s),0)}function Pd(e){return e.reduce((n,s)=>n+Yr(s),0)}function $d(e,n){if(n===void 0&&(n=Ft),!e)return;const{top:s,left:a,bottom:r,right:o}=n(e);qr(e)&&(r<=0||o<=0||s>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const zd=[["x",["left","right"],Ld],["y",["top","bottom"],Pd]];class Fs{constructor(n,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=zs(s),r=Jr(a);this.rect={...n},this.width=n.width,this.height=n.height;for(const[o,i,c]of zd)for(const d of i)Object.defineProperty(this,d,{get:()=>{const f=c(a),p=r[o]-f;return this.rect[d]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Jt{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...s)})},this.target=n}add(n,s,a){var r;(r=this.target)==null||r.addEventListener(n,s,a),this.listeners.push([n,s,a])}}function Fd(e){const{EventTarget:n}=Ne(e);return e instanceof n?e:zt(e)}function as(e,n){const s=Math.abs(e.x),a=Math.abs(e.y);return typeof n=="number"?Math.sqrt(s**2+a**2)>n:"x"in n&&"y"in n?s>n.x&&a>n.y:"x"in n?s>n.x:"y"in n?a>n.y:!1}var Ee;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ee||(Ee={}));function da(e){e.preventDefault()}function Bd(e){e.stopPropagation()}var q;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(q||(q={}));const eo={start:[q.Space,q.Enter],cancel:[q.Esc],end:[q.Space,q.Enter,q.Tab]},Vd=(e,n)=>{let{currentCoordinates:s}=n;switch(e.code){case q.Right:return{...s,x:s.x+25};case q.Left:return{...s,x:s.x-25};case q.Down:return{...s,y:s.y+25};case q.Up:return{...s,y:s.y-25}}};class to{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:s}}=n;this.props=n,this.listeners=new Jt(zt(s)),this.windowListeners=new Jt(Ne(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ee.Resize,this.handleCancel),this.windowListeners.add(Ee.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ee.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:s}=this.props,a=n.node.current;a&&$d(a),s(Oe)}handleKeyDown(n){if($s(n)){const{active:s,context:a,options:r}=this.props,{keyboardCodes:o=eo,coordinateGetter:i=Vd,scrollBehavior:c="smooth"}=r,{code:d}=n;if(o.end.includes(d)){this.handleEnd(n);return}if(o.cancel.includes(d)){this.handleCancel(n);return}const{collisionRect:f}=a.current,p=f?{x:f.left,y:f.top}:Oe;this.referenceCoordinates||(this.referenceCoordinates=p);const u=i(n,{active:s,context:a.current,currentCoordinates:p});if(u){const g=Fn(u,p),x={x:0,y:0},{scrollableAncestors:m}=a.current;for(const h of m){const v=n.code,{isTop:N,isRight:b,isLeft:w,isBottom:y,maxScroll:j,minScroll:C}=Zr(h),S=Od(h),M={x:Math.min(v===q.Right?S.right-S.width/2:S.right,Math.max(v===q.Right?S.left:S.left+S.width/2,u.x)),y:Math.min(v===q.Down?S.bottom-S.height/2:S.bottom,Math.max(v===q.Down?S.top:S.top+S.height/2,u.y))},k=v===q.Right&&!b||v===q.Left&&!w,L=v===q.Down&&!y||v===q.Up&&!N;if(k&&M.x!==u.x){const E=h.scrollLeft+g.x,T=v===q.Right&&E<=j.x||v===q.Left&&E>=C.x;if(T&&!g.y){h.scrollTo({left:E,behavior:c});return}T?x.x=h.scrollLeft-E:x.x=v===q.Right?h.scrollLeft-j.x:h.scrollLeft-C.x,x.x&&h.scrollBy({left:-x.x,behavior:c});break}else if(L&&M.y!==u.y){const E=h.scrollTop+g.y,T=v===q.Down&&E<=j.y||v===q.Up&&E>=C.y;if(T&&!g.x){h.scrollTo({top:E,behavior:c});return}T?x.y=h.scrollTop-E:x.y=v===q.Down?h.scrollTop-j.y:h.scrollTop-C.y,x.y&&h.scrollBy({top:-x.y,behavior:c});break}}this.handleMove(n,Mt(Fn(u,this.referenceCoordinates),x))}}}handleMove(n,s){const{onMove:a}=this.props;n.preventDefault(),a(s)}handleEnd(n){const{onEnd:s}=this.props;n.preventDefault(),this.detach(),s()}handleCancel(n){const{onCancel:s}=this.props;n.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}to.activators=[{eventName:"onKeyDown",handler:(e,n,s)=>{let{keyboardCodes:a=eo,onActivation:r}=n,{active:o}=s;const{code:i}=e.nativeEvent;if(a.start.includes(i)){const c=o.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),r==null||r({event:e.nativeEvent}),!0)}return!1}}];function ua(e){return!!(e&&"distance"in e)}function fa(e){return!!(e&&"delay"in e)}class Bs{constructor(n,s,a){var r;a===void 0&&(a=Fd(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=s;const{event:o}=n,{target:i}=o;this.props=n,this.events=s,this.document=zt(i),this.documentListeners=new Jt(this.document),this.listeners=new Jt(a),this.windowListeners=new Jt(Ne(i)),this.initialCoordinates=(r=vs(o))!=null?r:Oe,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:s,bypassActivationConstraint:a}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(Ee.Resize,this.handleCancel),this.windowListeners.add(Ee.DragStart,da),this.windowListeners.add(Ee.VisibilityChange,this.handleCancel),this.windowListeners.add(Ee.ContextMenu,da),this.documentListeners.add(Ee.Keydown,this.handleKeydown),s){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(fa(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(ua(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,s){const{active:a,onPending:r}=this.props;r(a,n,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:n}=this,{onStart:s}=this.props;n&&(this.activated=!0,this.documentListeners.add(Ee.Click,Bd,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ee.SelectionChange,this.removeTextSelection),s(n))}handleMove(n){var s;const{activated:a,initialCoordinates:r,props:o}=this,{onMove:i,options:{activationConstraint:c}}=o;if(!r)return;const d=(s=vs(n))!=null?s:Oe,f=Fn(r,d);if(!a&&c){if(ua(c)){if(c.tolerance!=null&&as(f,c.tolerance))return this.handleCancel();if(as(f,c.distance))return this.handleStart()}if(fa(c)&&as(f,c.tolerance))return this.handleCancel();this.handlePending(c,f);return}n.cancelable&&n.preventDefault(),i(d)}handleEnd(){const{onAbort:n,onEnd:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleCancel(){const{onAbort:n,onCancel:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleKeydown(n){n.code===q.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const Kd={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class pt extends Bs{constructor(n){const{event:s}=n,a=zt(s.target);super(n,Kd,a)}}pt.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:a}=n;return!s.isPrimary||s.button!==0?!1:(a==null||a({event:s}),!0)}}];const Hd={move:{name:"mousemove"},end:{name:"mouseup"}};var ys;(function(e){e[e.RightClick=2]="RightClick"})(ys||(ys={}));class Gd extends Bs{constructor(n){super(n,Hd,zt(n.event.target))}}Gd.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:a}=n;return s.button===ys.RightClick?!1:(a==null||a({event:s}),!0)}}];const rs={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ud extends Bs{constructor(n){super(n,rs)}static setup(){return window.addEventListener(rs.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(rs.move.name,n)};function n(){}}}Ud.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:a}=n;const{touches:r}=s;return r.length>1?!1:(a==null||a({event:s}),!0)}}];var en;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(en||(en={}));var Vn;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Vn||(Vn={}));function Wd(e){let{acceleration:n,activator:s=en.Pointer,canScroll:a,draggingRect:r,enabled:o,interval:i=5,order:c=Vn.TreeOrder,pointerCoordinates:d,scrollableAncestors:f,scrollableAncestorRects:p,delta:u,threshold:g}=e;const x=Xd({delta:u,disabled:!o}),[m,h]=rd(),v=l.useRef({x:0,y:0}),N=l.useRef({x:0,y:0}),b=l.useMemo(()=>{switch(s){case en.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case en.DraggableRect:return r}},[s,r,d]),w=l.useRef(null),y=l.useCallback(()=>{const C=w.current;if(!C)return;const S=v.current.x*N.current.x,M=v.current.y*N.current.y;C.scrollBy(S,M)},[]),j=l.useMemo(()=>c===Vn.TreeOrder?[...f].reverse():f,[c,f]);l.useEffect(()=>{if(!o||!f.length||!b){h();return}for(const C of j){if((a==null?void 0:a(C))===!1)continue;const S=f.indexOf(C),M=p[S];if(!M)continue;const{direction:k,speed:L}=Ad(C,M,b,n,g);for(const E of["x","y"])x[E][k[E]]||(L[E]=0,k[E]=0);if(L.x>0||L.y>0){h(),w.current=C,m(y,i),v.current=L,N.current=k;return}}v.current={x:0,y:0},N.current={x:0,y:0},h()},[n,y,a,h,o,i,JSON.stringify(b),JSON.stringify(x),m,f,j,p,JSON.stringify(g)])}const qd={x:{[ie.Backward]:!1,[ie.Forward]:!1},y:{[ie.Backward]:!1,[ie.Forward]:!1}};function Xd(e){let{delta:n,disabled:s}=e;const a=bs(n);return vn(r=>{if(s||!a||!r)return qd;const o={x:Math.sign(n.x-a.x),y:Math.sign(n.y-a.y)};return{x:{[ie.Backward]:r.x[ie.Backward]||o.x===-1,[ie.Forward]:r.x[ie.Forward]||o.x===1},y:{[ie.Backward]:r.y[ie.Backward]||o.y===-1,[ie.Forward]:r.y[ie.Forward]||o.y===1}}},[s,n,a])}function Yd(e,n){const s=n!=null?e.get(n):void 0,a=s?s.node.current:null;return vn(r=>{var o;return n==null?null:(o=a??r)!=null?o:null},[a,n])}function Qd(e,n){return l.useMemo(()=>e.reduce((s,a)=>{const{sensor:r}=a,o=r.activators.map(i=>({eventName:i.eventName,handler:n(i.handler,a)}));return[...s,...o]},[]),[e,n])}var rn;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(rn||(rn={}));var js;(function(e){e.Optimized="optimized"})(js||(js={}));const pa=new Map;function Zd(e,n){let{dragging:s,dependencies:a,config:r}=n;const[o,i]=l.useState(null),{frequency:c,measure:d,strategy:f}=r,p=l.useRef(e),u=v(),g=an(u),x=l.useCallback(function(N){N===void 0&&(N=[]),!g.current&&i(b=>b===null?N:b.concat(N.filter(w=>!b.includes(w))))},[g]),m=l.useRef(null),h=vn(N=>{if(u&&!s)return pa;if(!N||N===pa||p.current!==e||o!=null){const b=new Map;for(let w of e){if(!w)continue;if(o&&o.length>0&&!o.includes(w.id)&&w.rect.current){b.set(w.id,w.rect.current);continue}const y=w.node.current,j=y?new Fs(d(y),y):null;w.rect.current=j,j&&b.set(w.id,j)}return b}return N},[e,o,s,u,d]);return l.useEffect(()=>{p.current=e},[e]),l.useEffect(()=>{u||x()},[s,u]),l.useEffect(()=>{o&&o.length>0&&i(null)},[JSON.stringify(o)]),l.useEffect(()=>{u||typeof c!="number"||m.current!==null||(m.current=setTimeout(()=>{x(),m.current=null},c))},[c,u,x,...a]),{droppableRects:h,measureDroppableContainers:x,measuringScheduled:o!=null};function v(){switch(f){case rn.Always:return!1;case rn.BeforeDragging:return s;default:return!s}}}function no(e,n){return vn(s=>e?s||(typeof n=="function"?n(e):e):null,[n,e])}function Jd(e,n){return no(e,n)}function eu(e){let{callback:n,disabled:s}=e;const a=Ps(n),r=l.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(a)},[a,s]);return l.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function Xn(e){let{callback:n,disabled:s}=e;const a=Ps(n),r=l.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(a)},[s]);return l.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function tu(e){return new Fs(Ft(e),e)}function ma(e,n,s){n===void 0&&(n=tu);const[a,r]=l.useState(null);function o(){r(d=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=d??s)!=null?f:null}const p=n(e);return JSON.stringify(d)===JSON.stringify(p)?d:p})}const i=eu({callback(d){if(e)for(const f of d){const{type:p,target:u}=f;if(p==="childList"&&u instanceof HTMLElement&&u.contains(e)){o();break}}}}),c=Xn({callback:o});return Ve(()=>{o(),e?(c==null||c.observe(e),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),i==null||i.disconnect())},[e]),a}function nu(e){const n=no(e);return Wr(e,n)}const ha=[];function su(e){const n=l.useRef(e),s=vn(a=>e?a&&a!==ha&&e&&n.current&&e.parentNode===n.current.parentNode?a:zs(e):ha,[e]);return l.useEffect(()=>{n.current=e},[e]),s}function au(e){const[n,s]=l.useState(null),a=l.useRef(e),r=l.useCallback(o=>{const i=ss(o.target);i&&s(c=>c?(c.set(i,ws(i)),new Map(c)):null)},[]);return l.useEffect(()=>{const o=a.current;if(e!==o){i(o);const c=e.map(d=>{const f=ss(d);return f?(f.addEventListener("scroll",r,{passive:!0}),[f,ws(f)]):null}).filter(d=>d!=null);s(c.length?new Map(c):null),a.current=e}return()=>{i(e),i(o)};function i(c){c.forEach(d=>{const f=ss(d);f==null||f.removeEventListener("scroll",r)})}},[r,e]),l.useMemo(()=>e.length?n?Array.from(n.values()).reduce((o,i)=>Mt(o,i),Oe):Jr(e):Oe,[e,n])}function xa(e,n){n===void 0&&(n=[]);const s=l.useRef(null);return l.useEffect(()=>{s.current=null},n),l.useEffect(()=>{const a=e!==Oe;a&&!s.current&&(s.current=e),!a&&s.current&&(s.current=null)},[e]),s.current?Fn(e,s.current):Oe}function ru(e){l.useEffect(()=>{if(!qn)return;const n=e.map(s=>{let{sensor:a}=s;return a.setup==null?void 0:a.setup()});return()=>{for(const s of n)s==null||s()}},e.map(n=>{let{sensor:s}=n;return s}))}function ou(e,n){return l.useMemo(()=>e.reduce((s,a)=>{let{eventName:r,handler:o}=a;return s[r]=i=>{o(i,n)},s},{}),[e,n])}function so(e){return l.useMemo(()=>e?Rd(e):null,[e])}const ga=[];function iu(e,n){n===void 0&&(n=Ft);const[s]=e,a=so(s?Ne(s):null),[r,o]=l.useState(ga);function i(){o(()=>e.length?e.map(d=>Qr(d)?a:new Fs(n(d),d)):ga)}const c=Xn({callback:i});return Ve(()=>{c==null||c.disconnect(),i(),e.forEach(d=>c==null?void 0:c.observe(d))},[e]),r}function lu(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return bn(n)?n:e}function cu(e){let{measure:n}=e;const[s,a]=l.useState(null),r=l.useCallback(f=>{for(const{target:p}of f)if(bn(p)){a(u=>{const g=n(p);return u?{...u,width:g.width,height:g.height}:g});break}},[n]),o=Xn({callback:r}),i=l.useCallback(f=>{const p=lu(f);o==null||o.disconnect(),p&&(o==null||o.observe(p)),a(p?n(p):null)},[n,o]),[c,d]=zn(i);return l.useMemo(()=>({nodeRef:c,rect:s,setRef:d}),[s,c,d])}const du=[{sensor:pt,options:{}},{sensor:to,options:{}}],uu={current:{}},Tn={draggable:{measure:ca},droppable:{measure:ca,strategy:rn.WhileDragging,frequency:js.Optimized},dragOverlay:{measure:Ft}};class tn extends Map{get(n){var s;return n!=null&&(s=super.get(n))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:s}=n;return!s})}getNodeFor(n){var s,a;return(s=(a=this.get(n))==null?void 0:a.node.current)!=null?s:void 0}}const fu={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new tn,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Bn},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Tn,measureDroppableContainers:Bn,windowRect:null,measuringScheduled:!1},pu={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Bn,draggableNodes:new Map,over:null,measureDroppableContainers:Bn},Yn=l.createContext(pu),ao=l.createContext(fu);function mu(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new tn}}}function hu(e,n){switch(n.type){case oe.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case oe.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case oe.DragEnd:case oe.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case oe.RegisterDroppable:{const{element:s}=n,{id:a}=s,r=new tn(e.droppable.containers);return r.set(a,s),{...e,droppable:{...e.droppable,containers:r}}}case oe.SetDroppableDisabled:{const{id:s,key:a,disabled:r}=n,o=e.droppable.containers.get(s);if(!o||a!==o.key)return e;const i=new tn(e.droppable.containers);return i.set(s,{...o,disabled:r}),{...e,droppable:{...e.droppable,containers:i}}}case oe.UnregisterDroppable:{const{id:s,key:a}=n,r=e.droppable.containers.get(s);if(!r||a!==r.key)return e;const o=new tn(e.droppable.containers);return o.delete(s),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function xu(e){let{disabled:n}=e;const{active:s,activatorEvent:a,draggableNodes:r}=l.useContext(Yn),o=bs(a),i=bs(s==null?void 0:s.id);return l.useEffect(()=>{if(!n&&!a&&o&&i!=null){if(!$s(o)||document.activeElement===o.target)return;const c=r.get(i);if(!c)return;const{activatorNode:d,node:f}=c;if(!d.current&&!f.current)return;requestAnimationFrame(()=>{for(const p of[d.current,f.current]){if(!p)continue;const u=ld(p);if(u){u.focus();break}}})}},[a,n,r,i,o]),null}function gu(e,n){let{transform:s,...a}=n;return e!=null&&e.length?e.reduce((r,o)=>o({transform:r,...a}),s):s}function bu(e){return l.useMemo(()=>({draggable:{...Tn.draggable,...e==null?void 0:e.draggable},droppable:{...Tn.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Tn.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function vu(e){let{activeNode:n,measure:s,initialRect:a,config:r=!0}=e;const o=l.useRef(!1),{x:i,y:c}=typeof r=="boolean"?{x:r,y:r}:r;Ve(()=>{if(!i&&!c||!n){o.current=!1;return}if(o.current||!a)return;const f=n==null?void 0:n.node.current;if(!f||f.isConnected===!1)return;const p=s(f),u=Wr(p,a);if(i||(u.x=0),c||(u.y=0),o.current=!0,Math.abs(u.x)>0||Math.abs(u.y)>0){const g=qr(f);g&&g.scrollBy({top:u.y,left:u.x})}},[n,i,c,a,s])}const ro=l.createContext({...Oe,scaleX:1,scaleY:1});var Ze;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ze||(Ze={}));const Cn=l.memo(function(n){var s,a,r,o;let{id:i,accessibility:c,autoScroll:d=!0,children:f,sensors:p=du,collisionDetection:u=Nd,measuring:g,modifiers:x,...m}=n;const h=l.useReducer(hu,void 0,mu),[v,N]=h,[b,w]=md(),[y,j]=l.useState(Ze.Uninitialized),C=y===Ze.Initialized,{draggable:{active:S,nodes:M,translate:k},droppable:{containers:L}}=v,E=S!=null?M.get(S):null,T=l.useRef({initial:null,translated:null}),_=l.useMemo(()=>{var xe;return S!=null?{id:S,data:(xe=E==null?void 0:E.data)!=null?xe:uu,rect:T}:null},[S,E]),H=l.useRef(null),[W,z]=l.useState(null),[O,A]=l.useState(null),F=an(m,Object.values(m)),he=wn("DndDescribedBy",i),ye=l.useMemo(()=>L.getEnabled(),[L]),ee=bu(g),{droppableRects:se,measureDroppableContainers:te,measuringScheduled:je}=Zd(ye,{dragging:C,dependencies:[k.x,k.y],config:ee.droppable}),ne=Yd(M,S),$=l.useMemo(()=>O?vs(O):null,[O]),V=$i(),B=Jd(ne,ee.draggable.measure);vu({activeNode:S!=null?M.get(S):null,config:V.layoutShiftCompensation,initialRect:B,measure:ee.draggable.measure});const R=ma(ne,ee.draggable.measure,B),K=ma(ne?ne.parentElement:null),P=l.useRef({activatorEvent:null,active:null,activeNode:ne,collisionRect:null,collisions:null,droppableRects:se,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:L,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ae=L.getNodeFor((s=P.current.over)==null?void 0:s.id),Z=cu({measure:ee.dragOverlay.measure}),Ce=(a=Z.nodeRef.current)!=null?a:ne,Pe=C?(r=Z.rect)!=null?r:R:null,bt=!!(Z.nodeRef.current&&Z.rect),Ws=nu(bt?null:R),Jn=so(Ce?Ne(Ce):null),We=su(C?ae??ne:null),kn=iu(We),Mn=gu(x,{transform:{x:k.x-Ws.x,y:k.y-Ws.y,scaleX:1,scaleY:1},activatorEvent:O,active:_,activeNodeRect:R,containerNodeRect:K,draggingNodeRect:Pe,over:P.current.over,overlayNodeRect:Z.rect,scrollableAncestors:We,scrollableAncestorRects:kn,windowRect:Jn}),qs=$?Mt($,k):null,Xs=au(We),Di=xa(Xs),Ei=xa(Xs,[R]),vt=Mt(Mn,Di),wt=Pe?_d(Pe,Mn):null,Gt=_&&wt?u({active:_,collisionRect:wt,droppableRects:se,droppableContainers:ye,pointerCoordinates:qs}):null,Ys=yd(Gt,"id"),[qe,Qs]=l.useState(null),Ti=bt?Mn:Mt(Mn,Ei),Ai=Cd(Ti,(o=qe==null?void 0:qe.rect)!=null?o:null,R),es=l.useRef(null),Zs=l.useCallback((xe,Se)=>{let{sensor:_e,options:Xe}=Se;if(H.current==null)return;const Me=M.get(H.current);if(!Me)return;const Ie=xe.nativeEvent,$e=new _e({active:H.current,activeNode:Me,event:Ie,options:Xe,context:P,onAbort(fe){if(!M.get(fe))return;const{onDragAbort:ze}=F.current,He={id:fe};ze==null||ze(He),b({type:"onDragAbort",event:He})},onPending(fe,Ye,ze,He){if(!M.get(fe))return;const{onDragPending:Wt}=F.current,Qe={id:fe,constraint:Ye,initialCoordinates:ze,offset:He};Wt==null||Wt(Qe),b({type:"onDragPending",event:Qe})},onStart(fe){const Ye=H.current;if(Ye==null)return;const ze=M.get(Ye);if(!ze)return;const{onDragStart:He}=F.current,Ut={activatorEvent:Ie,active:{id:Ye,data:ze.data,rect:T}};ot.unstable_batchedUpdates(()=>{He==null||He(Ut),j(Ze.Initializing),N({type:oe.DragStart,initialCoordinates:fe,active:Ye}),b({type:"onDragStart",event:Ut}),z(es.current),A(Ie)})},onMove(fe){N({type:oe.DragMove,coordinates:fe})},onEnd:yt(oe.DragEnd),onCancel:yt(oe.DragCancel)});es.current=$e;function yt(fe){return async function(){const{active:ze,collisions:He,over:Ut,scrollAdjustedTranslate:Wt}=P.current;let Qe=null;if(ze&&Wt){const{cancelDrop:qt}=F.current;Qe={activatorEvent:Ie,active:ze,collisions:He,delta:Wt,over:Ut},fe===oe.DragEnd&&typeof qt=="function"&&await Promise.resolve(qt(Qe))&&(fe=oe.DragCancel)}H.current=null,ot.unstable_batchedUpdates(()=>{N({type:fe}),j(Ze.Uninitialized),Qs(null),z(null),A(null),es.current=null;const qt=fe===oe.DragEnd?"onDragEnd":"onDragCancel";if(Qe){const ts=F.current[qt];ts==null||ts(Qe),b({type:qt,event:Qe})}})}}},[M]),Oi=l.useCallback((xe,Se)=>(_e,Xe)=>{const Me=_e.nativeEvent,Ie=M.get(Xe);if(H.current!==null||!Ie||Me.dndKit||Me.defaultPrevented)return;const $e={active:Ie};xe(_e,Se.options,$e)===!0&&(Me.dndKit={capturedBy:Se.sensor},H.current=Xe,Zs(_e,Se))},[M,Zs]),Js=Qd(p,Oi);ru(p),Ve(()=>{R&&y===Ze.Initializing&&j(Ze.Initialized)},[R,y]),l.useEffect(()=>{const{onDragMove:xe}=F.current,{active:Se,activatorEvent:_e,collisions:Xe,over:Me}=P.current;if(!Se||!_e)return;const Ie={active:Se,activatorEvent:_e,collisions:Xe,delta:{x:vt.x,y:vt.y},over:Me};ot.unstable_batchedUpdates(()=>{xe==null||xe(Ie),b({type:"onDragMove",event:Ie})})},[vt.x,vt.y]),l.useEffect(()=>{const{active:xe,activatorEvent:Se,collisions:_e,droppableContainers:Xe,scrollAdjustedTranslate:Me}=P.current;if(!xe||H.current==null||!Se||!Me)return;const{onDragOver:Ie}=F.current,$e=Xe.get(Ys),yt=$e&&$e.rect.current?{id:$e.id,rect:$e.rect.current,data:$e.data,disabled:$e.disabled}:null,fe={active:xe,activatorEvent:Se,collisions:_e,delta:{x:Me.x,y:Me.y},over:yt};ot.unstable_batchedUpdates(()=>{Qs(yt),Ie==null||Ie(fe),b({type:"onDragOver",event:fe})})},[Ys]),Ve(()=>{P.current={activatorEvent:O,active:_,activeNode:ne,collisionRect:wt,collisions:Gt,droppableRects:se,draggableNodes:M,draggingNode:Ce,draggingNodeRect:Pe,droppableContainers:L,over:qe,scrollableAncestors:We,scrollAdjustedTranslate:vt},T.current={initial:Pe,translated:wt}},[_,ne,Gt,wt,M,Ce,Pe,se,L,qe,We,vt]),Wd({...V,delta:k,draggingRect:wt,pointerCoordinates:qs,scrollableAncestors:We,scrollableAncestorRects:kn});const Li=l.useMemo(()=>({active:_,activeNode:ne,activeNodeRect:R,activatorEvent:O,collisions:Gt,containerNodeRect:K,dragOverlay:Z,draggableNodes:M,droppableContainers:L,droppableRects:se,over:qe,measureDroppableContainers:te,scrollableAncestors:We,scrollableAncestorRects:kn,measuringConfiguration:ee,measuringScheduled:je,windowRect:Jn}),[_,ne,R,O,Gt,K,Z,M,L,se,qe,te,We,kn,ee,je,Jn]),Pi=l.useMemo(()=>({activatorEvent:O,activators:Js,active:_,activeNodeRect:R,ariaDescribedById:{draggable:he},dispatch:N,draggableNodes:M,over:qe,measureDroppableContainers:te}),[O,Js,_,R,N,he,M,qe,te]);return I.createElement(Ur.Provider,{value:w},I.createElement(Yn.Provider,{value:Pi},I.createElement(ao.Provider,{value:Li},I.createElement(ro.Provider,{value:Ai},f)),I.createElement(xu,{disabled:(c==null?void 0:c.restoreFocus)===!1})),I.createElement(gd,{...c,hiddenTextDescribedById:he}));function $i(){const xe=(W==null?void 0:W.autoScrollEnabled)===!1,Se=typeof d=="object"?d.enabled===!1:d===!1,_e=C&&!xe&&!Se;return typeof d=="object"?{...d,enabled:_e}:{enabled:_e}}}),wu=l.createContext(null),ba="button",yu="Draggable";function ju(e){let{id:n,data:s,disabled:a=!1,attributes:r}=e;const o=wn(yu),{activators:i,activatorEvent:c,active:d,activeNodeRect:f,ariaDescribedById:p,draggableNodes:u,over:g}=l.useContext(Yn),{role:x=ba,roleDescription:m="draggable",tabIndex:h=0}=r??{},v=(d==null?void 0:d.id)===n,N=l.useContext(v?ro:wu),[b,w]=zn(),[y,j]=zn(),C=ou(i,n),S=an(s);Ve(()=>(u.set(n,{id:n,key:o,node:b,activatorNode:y,data:S}),()=>{const k=u.get(n);k&&k.key===o&&u.delete(n)}),[u,n]);const M=l.useMemo(()=>({role:x,tabIndex:h,"aria-disabled":a,"aria-pressed":v&&x===ba?!0:void 0,"aria-roledescription":m,"aria-describedby":p.draggable}),[a,x,h,v,m,p.draggable]);return{active:d,activatorEvent:c,activeNodeRect:f,attributes:M,isDragging:v,listeners:a?void 0:C,node:b,over:g,setNodeRef:w,setActivatorNodeRef:j,transform:N}}function Nu(){return l.useContext(ao)}const Cu="Droppable",Su={timeout:25};function _u(e){let{data:n,disabled:s=!1,id:a,resizeObserverConfig:r}=e;const o=wn(Cu),{active:i,dispatch:c,over:d,measureDroppableContainers:f}=l.useContext(Yn),p=l.useRef({disabled:s}),u=l.useRef(!1),g=l.useRef(null),x=l.useRef(null),{disabled:m,updateMeasurementsFor:h,timeout:v}={...Su,...r},N=an(h??a),b=l.useCallback(()=>{if(!u.current){u.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{f(Array.isArray(N.current)?N.current:[N.current]),x.current=null},v)},[v]),w=Xn({callback:b,disabled:m||!i}),y=l.useCallback((M,k)=>{w&&(k&&(w.unobserve(k),u.current=!1),M&&w.observe(M))},[w]),[j,C]=zn(y),S=an(n);return l.useEffect(()=>{!w||!j.current||(w.disconnect(),u.current=!1,w.observe(j.current))},[j,w]),l.useEffect(()=>(c({type:oe.RegisterDroppable,element:{id:a,key:o,disabled:s,node:j,rect:g,data:S}}),()=>c({type:oe.UnregisterDroppable,key:o,id:a})),[a]),l.useEffect(()=>{s!==p.current.disabled&&(c({type:oe.SetDroppableDisabled,id:a,key:o,disabled:s}),p.current.disabled=s)},[a,o,s,c]),{active:i,rect:g,isOver:(d==null?void 0:d.id)===a,node:j,over:d,setNodeRef:C}}function mt(e,n,s){const a=e.slice();return a.splice(s<0?a.length+s:s,0,a.splice(n,1)[0]),a}function Iu(e,n){return e.reduce((s,a,r)=>{const o=n.get(a);return o&&(s[r]=o),s},Array(e.length))}function Rn(e){return e!==null&&e>=0}function ku(e,n){if(e===n)return!0;if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==n[s])return!1;return!0}function Mu(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const oo=e=>{let{rects:n,activeIndex:s,overIndex:a,index:r}=e;const o=mt(n,a,s),i=n[r],c=o[r];return!c||!i?null:{x:c.left-i.left,y:c.top-i.top,scaleX:c.width/i.width,scaleY:c.height/i.height}},Dn={scaleX:1,scaleY:1},Sn=e=>{var n;let{activeIndex:s,activeNodeRect:a,index:r,rects:o,overIndex:i}=e;const c=(n=o[s])!=null?n:a;if(!c)return null;if(r===s){const f=o[i];return f?{x:0,y:s<i?f.top+f.height-(c.top+c.height):f.top-c.top,...Dn}:null}const d=Ru(o,r,s);return r>s&&r<=i?{x:0,y:-c.height-d,...Dn}:r<s&&r>=i?{x:0,y:c.height+d,...Dn}:{x:0,y:0,...Dn}};function Ru(e,n,s){const a=e[n],r=e[n-1],o=e[n+1];return a?s<n?r?a.top-(r.top+r.height):o?o.top-(a.top+a.height):0:o?o.top-(a.top+a.height):r?a.top-(r.top+r.height):0:0}const io="Sortable",lo=I.createContext({activeIndex:-1,containerId:io,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:oo,disabled:{draggable:!1,droppable:!1}});function _n(e){let{children:n,id:s,items:a,strategy:r=oo,disabled:o=!1}=e;const{active:i,dragOverlay:c,droppableRects:d,over:f,measureDroppableContainers:p}=Nu(),u=wn(io,s),g=c.rect!==null,x=l.useMemo(()=>a.map(C=>typeof C=="object"&&"id"in C?C.id:C),[a]),m=i!=null,h=i?x.indexOf(i.id):-1,v=f?x.indexOf(f.id):-1,N=l.useRef(x),b=!ku(x,N.current),w=v!==-1&&h===-1||b,y=Mu(o);Ve(()=>{b&&m&&p(x)},[b,x,m,p]),l.useEffect(()=>{N.current=x},[x]);const j=l.useMemo(()=>({activeIndex:h,containerId:u,disabled:y,disableTransforms:w,items:x,overIndex:v,useDragOverlay:g,sortedRects:Iu(x,d),strategy:r}),[h,u,y.draggable,y.droppable,w,x,v,d,g,r]);return I.createElement(lo.Provider,{value:j},n)}const Du=e=>{let{id:n,items:s,activeIndex:a,overIndex:r}=e;return mt(s,a,r).indexOf(n)},Eu=e=>{let{containerId:n,isSorting:s,wasDragging:a,index:r,items:o,newIndex:i,previousItems:c,previousContainerId:d,transition:f}=e;return!f||!a||c!==o&&r===i?!1:s?!0:i!==r&&n===d},Tu={duration:200,easing:"ease"},co="transform",Au=Ue.Transition.toString({property:co,duration:0,easing:"linear"}),Ou={roleDescription:"sortable"};function Lu(e){let{disabled:n,index:s,node:a,rect:r}=e;const[o,i]=l.useState(null),c=l.useRef(s);return Ve(()=>{if(!n&&s!==c.current&&a.current){const d=r.current;if(d){const f=Ft(a.current,{ignoreTransform:!0}),p={x:d.left-f.left,y:d.top-f.top,scaleX:d.width/f.width,scaleY:d.height/f.height};(p.x||p.y)&&i(p)}}s!==c.current&&(c.current=s)},[n,s,a,r]),l.useEffect(()=>{o&&i(null)},[o]),o}function ht(e){let{animateLayoutChanges:n=Eu,attributes:s,disabled:a,data:r,getNewIndex:o=Du,id:i,strategy:c,resizeObserverConfig:d,transition:f=Tu}=e;const{items:p,containerId:u,activeIndex:g,disabled:x,disableTransforms:m,sortedRects:h,overIndex:v,useDragOverlay:N,strategy:b}=l.useContext(lo),w=Pu(a,x),y=p.indexOf(i),j=l.useMemo(()=>({sortable:{containerId:u,index:y,items:p},...r}),[u,r,y,p]),C=l.useMemo(()=>p.slice(p.indexOf(i)),[p,i]),{rect:S,node:M,isOver:k,setNodeRef:L}=_u({id:i,data:j,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...d}}),{active:E,activatorEvent:T,activeNodeRect:_,attributes:H,setNodeRef:W,listeners:z,isDragging:O,over:A,setActivatorNodeRef:F,transform:he}=ju({id:i,data:j,attributes:{...Ou,...s},disabled:w.draggable}),ye=ad(L,W),ee=!!E,se=ee&&!m&&Rn(g)&&Rn(v),te=!N&&O,je=te&&se?he:null,$=se?je??(c??b)({rects:h,activeNodeRect:_,activeIndex:g,overIndex:v,index:y}):null,V=Rn(g)&&Rn(v)?o({id:i,items:p,activeIndex:g,overIndex:v}):y,B=E==null?void 0:E.id,R=l.useRef({activeId:B,items:p,newIndex:V,containerId:u}),K=p!==R.current.items,P=n({active:E,containerId:u,isDragging:O,isSorting:ee,id:i,index:y,items:p,newIndex:R.current.newIndex,previousItems:R.current.items,previousContainerId:R.current.containerId,transition:f,wasDragging:R.current.activeId!=null}),ae=Lu({disabled:!P,index:y,node:M,rect:S});return l.useEffect(()=>{ee&&R.current.newIndex!==V&&(R.current.newIndex=V),u!==R.current.containerId&&(R.current.containerId=u),p!==R.current.items&&(R.current.items=p)},[ee,V,u,p]),l.useEffect(()=>{if(B===R.current.activeId)return;if(B&&!R.current.activeId){R.current.activeId=B;return}const Ce=setTimeout(()=>{R.current.activeId=B},50);return()=>clearTimeout(Ce)},[B]),{active:E,activeIndex:g,attributes:H,data:j,rect:S,index:y,newIndex:V,items:p,isOver:k,isSorting:ee,isDragging:O,listeners:z,node:M,overIndex:v,over:A,setNodeRef:ye,setActivatorNodeRef:F,setDroppableNodeRef:L,setDraggableNodeRef:W,transform:ae??$,transition:Z()};function Z(){if(ae||K&&R.current.newIndex===y)return Au;if(!(te&&!$s(T)||!f)&&(ee||P))return Ue.Transition.toString({...f,property:co})}}function Pu(e,n){var s,a;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(s=e==null?void 0:e.draggable)!=null?s:n.draggable,droppable:(a=e==null?void 0:e.droppable)!=null?a:n.droppable}}q.Down,q.Right,q.Up,q.Left;var Vs="DropdownMenu",[$u,gm]=Is(Vs,[Ts]),we=Ts(),[zu,uo]=$u(Vs),fo=e=>{const{__scopeDropdownMenu:n,children:s,dir:a,open:r,defaultOpen:o,onOpenChange:i,modal:c=!0}=e,d=we(n),f=l.useRef(null),[p=!1,u]=nn({prop:r,defaultProp:o,onChange:i});return t.jsx(zu,{scope:n,triggerId:tt(),triggerRef:f,contentId:tt(),open:p,onOpenChange:u,onOpenToggle:l.useCallback(()=>u(g=>!g),[u]),modal:c,children:t.jsx($a,{...d,open:p,onOpenChange:u,dir:a,modal:c,children:s})})};fo.displayName=Vs;var po="DropdownMenuTrigger",mo=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,disabled:a=!1,...r}=e,o=uo(po,s),i=we(s);return t.jsx(za,{asChild:!0,...i,children:t.jsx(ve.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...r,ref:Ra(n,o.triggerRef),onPointerDown:X(e.onPointerDown,c=>{!a&&c.button===0&&c.ctrlKey===!1&&(o.onOpenToggle(),o.open||c.preventDefault())}),onKeyDown:X(e.onKeyDown,c=>{a||(["Enter"," "].includes(c.key)&&o.onOpenToggle(),c.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});mo.displayName=po;var Fu="DropdownMenuPortal",ho=e=>{const{__scopeDropdownMenu:n,...s}=e,a=we(n);return t.jsx(Fa,{...a,...s})};ho.displayName=Fu;var xo="DropdownMenuContent",go=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...a}=e,r=uo(xo,s),o=we(s),i=l.useRef(!1);return t.jsx(Ba,{id:r.contentId,"aria-labelledby":r.triggerId,...o,...a,ref:n,onCloseAutoFocus:X(e.onCloseAutoFocus,c=>{var d;i.current||(d=r.triggerRef.current)==null||d.focus(),i.current=!1,c.preventDefault()}),onInteractOutside:X(e.onInteractOutside,c=>{const d=c.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0,p=d.button===2||f;(!r.modal||p)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});go.displayName=xo;var Bu="DropdownMenuGroup",bo=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...a}=e,r=we(s);return t.jsx(Va,{...r,...a,ref:n})});bo.displayName=Bu;var Vu="DropdownMenuLabel",vo=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...a}=e,r=we(s);return t.jsx(Ka,{...r,...a,ref:n})});vo.displayName=Vu;var Ku="DropdownMenuItem",wo=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...a}=e,r=we(s);return t.jsx(Ga,{...r,...a,ref:n})});wo.displayName=Ku;var Hu="DropdownMenuCheckboxItem",yo=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...a}=e,r=we(s);return t.jsx(Ua,{...r,...a,ref:n})});yo.displayName=Hu;var Gu="DropdownMenuRadioGroup",Uu=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...a}=e,r=we(s);return t.jsx(Wa,{...r,...a,ref:n})});Uu.displayName=Gu;var Wu="DropdownMenuRadioItem",jo=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...a}=e,r=we(s);return t.jsx(qa,{...r,...a,ref:n})});jo.displayName=Wu;var qu="DropdownMenuItemIndicator",No=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...a}=e,r=we(s);return t.jsx(Xa,{...r,...a,ref:n})});No.displayName=qu;var Xu="DropdownMenuSeparator",Co=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...a}=e,r=we(s);return t.jsx(Ha,{...r,...a,ref:n})});Co.displayName=Xu;var Yu="DropdownMenuArrow",Qu=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...a}=e,r=we(s);return t.jsx(Ya,{...r,...a,ref:n})});Qu.displayName=Yu;var Zu="DropdownMenuSubTrigger",So=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...a}=e,r=we(s);return t.jsx(Qa,{...r,...a,ref:n})});So.displayName=Zu;var Ju="DropdownMenuSubContent",_o=l.forwardRef((e,n)=>{const{__scopeDropdownMenu:s,...a}=e,r=we(s);return t.jsx(Za,{...r,...a,ref:n,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_o.displayName=Ju;var ef=fo,tf=mo,nf=ho,Io=go,sf=bo,ko=vo,Mo=wo,Ro=yo,Do=jo,Eo=No,To=Co,Ao=So,Oo=_o;const Bt=ef,Vt=tf,Ge=sf,af=I.forwardRef(({className:e,inset:n,children:s,...a},r)=>t.jsxs(Ao,{ref:r,className:D("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",e),...a,children:[s,t.jsx(Ca,{className:"ml-auto size-4"})]}));af.displayName=Ao.displayName;const rf=I.forwardRef(({className:e,...n},s)=>t.jsx(Oo,{ref:s,className:D("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));rf.displayName=Oo.displayName;const xt=I.forwardRef(({className:e,sideOffset:n=4,...s},a)=>t.jsx(nf,{children:t.jsx(Io,{ref:a,sideOffset:n,className:D("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));xt.displayName=Io.displayName;const Te=I.forwardRef(({className:e,inset:n,...s},a)=>t.jsx(Mo,{ref:a,className:D("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",e),...s}));Te.displayName=Mo.displayName;const of=I.forwardRef(({className:e,children:n,checked:s,...a},r)=>t.jsxs(Ro,{ref:r,className:D("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...a,children:[t.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:t.jsx(Eo,{children:t.jsx(ks,{className:"size-4"})})}),n]}));of.displayName=Ro.displayName;const lf=I.forwardRef(({className:e,children:n,...s},a)=>t.jsxs(Do,{ref:a,className:D("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[t.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:t.jsx(Eo,{children:t.jsx(Sa,{className:"size-4 fill-current"})})}),n]}));lf.displayName=Do.displayName;const Kt=I.forwardRef(({className:e,inset:n,...s},a)=>t.jsx(ko,{ref:a,className:D("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",e),...s}));Kt.displayName=ko.displayName;const Be=I.forwardRef(({className:e,...n},s)=>t.jsx(To,{ref:s,className:D("-mx-1 my-1 h-px bg-muted",e),...n}));Be.displayName=To.displayName;const cf=({table:e})=>{const{updateTable:n,updateTablesState:s,removeTable:a,createIndex:r,createField:o,createTable:i,schemas:c,databaseType:d}=Q(),{schemasDisplayed:f}=ln(),{openTableSchemaDialog:p}=Rt(),{t:u}=J(),{fitView:g,setNodes:x}=Dt(),{hideSidePanel:m}=ge(),[h,v]=I.useState(!1),[N,b]=I.useState(e.name),{isMd:w}=Et("md"),y=I.useRef(null),{listeners:j}=ht({id:e.id}),C=l.useCallback(()=>{h&&(N.trim()&&n(e.id,{name:N.trim()}),v(!1))},[N,e.id,n,h]),S=l.useCallback(()=>{v(!1),b(e.name)},[e.name]);un(y,C),st("Enter",C),st("Escape",S);const M=z=>{z.stopPropagation(),v(!0)},k=l.useCallback(z=>{z.stopPropagation(),x(O=>O.map(A=>A.id==e.id?{...A,selected:!0}:{...A,selected:!1})),g({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.id}]}),w||m()},[g,e.id,x,m,w]),L=l.useCallback(()=>{a(e.id)},[e.id,a]),E=l.useCallback(({schema:z})=>{s(O=>O.map(A=>A.id===e.id||!A.schema?{...A,schema:z.name}:A))},[e.id,s]),T=l.useCallback(()=>{p({table:e,schemas:c,onConfirm:E,allowSchemaCreation:!0})},[p,e,c,E]),_=l.useCallback(z=>{z.stopPropagation();const O=zi(e);O.name=`${O.name}_copy`,O.x+=30,O.y+=50,i(O)},[i,e]),H=l.useCallback(()=>{var z;return t.jsxs(Bt,{children:[t.jsx(Vt,{children:t.jsx(me,{children:t.jsx(mn,{})})}),t.jsxs(xt,{className:"w-fit min-w-40",children:[t.jsx(Kt,{children:u("side_panel.tables_section.table.table_actions.title")}),t.jsx(Be,{}),c.length>0||(z=dt)!=null&&z[d]?t.jsxs(t.Fragment,{children:[t.jsx(Ge,{children:t.jsxs(Te,{className:"flex justify-between gap-4",onClick:O=>{O.stopPropagation(),T()},children:[u("side_panel.tables_section.table.table_actions.change_schema"),t.jsx(Ms,{className:"size-3.5"})]})}),t.jsx(Be,{})]}):null,t.jsxs(Ge,{children:[t.jsxs(Te,{className:"flex justify-between gap-4",onClick:O=>{O.stopPropagation(),o(e.id)},children:[u("side_panel.tables_section.table.table_actions.add_field"),t.jsx(ls,{className:"size-3.5"})]}),t.jsxs(Te,{className:"flex justify-between gap-4",onClick:O=>{O.stopPropagation(),r(e.id)},children:[u("side_panel.tables_section.table.table_actions.add_index"),t.jsx(ds,{className:"size-3.5"})]})]}),t.jsx(Be,{}),t.jsx(Ge,{children:t.jsxs(Te,{onClick:_,className:"flex justify-between",children:[u("side_panel.tables_section.table.table_actions.duplicate_table"),t.jsx(al,{className:"size-3.5"})]})}),t.jsx(Be,{}),t.jsx(Ge,{children:t.jsxs(Te,{onClick:L,className:"flex justify-between !text-red-700",children:[u("side_panel.tables_section.table.table_actions.delete_table"),t.jsx(Ke,{className:"size-3.5 text-red-700"})]})})]})]})},[e.id,o,r,L,_,u,T,c.length,d]),W=l.useMemo(()=>{if(f.length>1)return e.schema??dt[d]},[e.schema,f.length,d]);return l.useEffect(()=>{e.name.trim()&&b(e.name.trim())},[e.name]),t.jsxs("div",{className:"group flex h-11 flex-1 items-center justify-between gap-1 overflow-hidden",children:[t.jsx("div",{className:"flex cursor-move items-center justify-center",...j,children:t.jsx(fn,{className:"size-4 text-muted-foreground"})}),t.jsx("div",{className:"flex min-w-0 flex-1 px-1",children:h?t.jsx(re,{ref:y,autoFocus:!0,type:"text",placeholder:e.name,value:N,onClick:z=>z.stopPropagation(),onChange:z=>b(z.target.value),className:"h-7 w-full focus-visible:ring-0"}):t.jsxs(le,{children:[t.jsx(ce,{asChild:!0,children:t.jsxs("div",{onDoubleClick:M,className:"text-editable truncate px-2 py-0.5",children:[e.name,t.jsx("span",{className:"text-xs text-muted-foreground",children:W?` (${W})`:""})]})}),t.jsx(de,{children:u("tool_tips.double_click_to_edit")})]})}),t.jsx("div",{className:"flex flex-row-reverse",children:h?t.jsx(me,{onClick:C,children:t.jsx(Tt,{})}):t.jsxs(t.Fragment,{children:[t.jsx("div",{children:H()}),t.jsxs("div",{className:"flex flex-row-reverse md:hidden md:group-hover:flex",children:[t.jsx(me,{onClick:M,children:t.jsx(pn,{})}),t.jsx(me,{onClick:k,children:t.jsx(Kn,{})})]})]})})]})},In=I.forwardRef(({className:e,variant:n,size:s,...a},r)=>t.jsx(_a,{ref:r,className:D(rl({variant:n,size:s,className:e})),...a}));In.displayName=_a.displayName;const Ns=I.forwardRef((e,n)=>t.jsx(In,{...e,ref:n,variant:"default",className:"h-8 w-[32px] p-2 text-xs text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}));Ns.displayName=In.displayName;const Ks=I.forwardRef(({className:e,...n},s)=>t.jsx("textarea",{className:D("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...n}));Ks.displayName="Textarea";const df=({field:e,table:n,databaseType:s,updateField:a,removeField:r})=>{var v,N,b,w,y,j,C,S,M,k,L,E,T,_,H,W,z,O;const{t:o}=J(),[i,c]=I.useState(e),[d,f]=I.useState(!1),p=I.useMemo(()=>{if(!e.primaryKey)return!1;for(const A of n.fields)if(A.id!==e.id&&A.primaryKey)return!1;return!0},[n.fields,e.primaryKey,e.id]);l.useEffect(()=>{c(e)},[e]);const u=l.useCallback(A=>{a(A)},[a]),g=Da(u,200),x=l.useRef(e);l.useEffect(()=>{d&&!Fl(x.current,i)&&g({comments:i.comments,characterMaximumLength:i.characterMaximumLength,precision:i.precision,scale:i.scale,unique:i.unique,default:i.default,increment:i.increment}),x.current=i},[i,g,d]);const m=l.useMemo(()=>ta(e.type.id,s),[e.type.id,s]),h=l.useMemo(()=>ol(e.type.name),[e.type.name]);return t.jsxs(Rs,{open:d,onOpenChange:A=>{f(A),A&&c(e)},children:[t.jsx(Ds,{asChild:!0,children:t.jsx(Y,{variant:"ghost",className:"h-8 w-[32px] p-2 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:t.jsx(nr,{className:"size-3.5"})})}),t.jsx(Es,{className:"w-52",children:t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("div",{className:"text-sm font-semibold",children:o("side_panel.tables_section.table.field_actions.title")}),t.jsx(ut,{orientation:"horizontal"}),t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(De,{htmlFor:"width",className:"text-subtitle",children:o("side_panel.tables_section.table.field_actions.unique")}),t.jsx(cs,{checked:i.unique,disabled:p,onCheckedChange:A=>c(F=>({...F,unique:!!A}))})]}),h?t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(De,{htmlFor:"increment",className:"text-subtitle",children:o("side_panel.tables_section.table.field_actions.auto_increment")}),t.jsx(cs,{checked:i.increment??!1,disabled:!i.primaryKey,onCheckedChange:A=>c(F=>({...F,increment:!!A}))})]}):null,t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(De,{htmlFor:"default",className:"text-subtitle",children:o("side_panel.tables_section.table.field_actions.default_value")}),t.jsx(re,{value:i.default??"",onChange:A=>c(F=>({...F,default:A.target.value||null})),placeholder:o("side_panel.tables_section.table.field_actions.no_default"),className:"w-full rounded-md bg-muted text-sm"})]}),(v=m==null?void 0:m.fieldAttributes)!=null&&v.hasCharMaxLength?t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(De,{htmlFor:"width",className:"text-subtitle",children:o("side_panel.tables_section.table.field_actions.character_length")}),(N=m==null?void 0:m.fieldAttributes)!=null&&N.hasCharMaxLengthOption?t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(xn,{value:i.characterMaximumLength==="max"?"max":i.characterMaximumLength?"custom":"none",onValueChange:A=>{c(A==="max"?F=>({...F,characterMaximumLength:"max"}):A==="custom"?F=>({...F,characterMaximumLength:"255"}):F=>({...F,characterMaximumLength:null}))},children:[t.jsx(Lt,{className:"w-full bg-muted",children:t.jsx(gn,{placeholder:"Select length"})}),t.jsxs(Pt,{children:[t.jsx(pe,{value:"none",children:"No length"}),t.jsx(pe,{value:"max",children:"MAX"}),t.jsx(pe,{value:"custom",children:"Custom"})]})]}),i.characterMaximumLength&&i.characterMaximumLength!=="max"?t.jsx(re,{value:i.characterMaximumLength,type:"number",min:"1",max:((b=m==null?void 0:m.fieldAttributes)==null?void 0:b.maxLength)||void 0,onChange:A=>c(F=>({...F,characterMaximumLength:A.target.value})),className:"w-24 rounded-md bg-muted text-sm"}):null]}):t.jsx(re,{value:i.characterMaximumLength??"",type:"number",onChange:A=>c(F=>({...F,characterMaximumLength:A.target.value})),className:"w-full rounded-md bg-muted text-sm"})]}):null,(w=m==null?void 0:m.fieldAttributes)!=null&&w.precision||(y=m==null?void 0:m.fieldAttributes)!=null&&y.scale?t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"flex flex-1 flex-col gap-2",children:[t.jsx(De,{htmlFor:"width",className:"text-subtitle",children:o("side_panel.tables_section.table.field_actions.precision")}),t.jsx(re,{value:i.precision??"",type:"number",max:(j=m==null?void 0:m.fieldAttributes)!=null&&j.precision?((C=m==null?void 0:m.fieldAttributes)==null?void 0:C.precision).max:void 0,min:(S=m==null?void 0:m.fieldAttributes)!=null&&S.precision?((M=m==null?void 0:m.fieldAttributes)==null?void 0:M.precision).min:void 0,placeholder:(k=m==null?void 0:m.fieldAttributes)!=null&&k.precision?`${((L=m==null?void 0:m.fieldAttributes)==null?void 0:L.precision).default}`:"Optional",onChange:A=>c(F=>({...F,precision:A.target.value?parseInt(A.target.value):void 0})),className:"w-full rounded-md bg-muted text-sm"})]}),t.jsxs("div",{className:"flex flex-1 flex-col gap-2",children:[t.jsx(De,{htmlFor:"width",className:"text-subtitle",children:o("side_panel.tables_section.table.field_actions.scale")}),t.jsx(re,{value:i.scale??"",max:(E=m==null?void 0:m.fieldAttributes)!=null&&E.scale?((T=m==null?void 0:m.fieldAttributes)==null?void 0:T.scale).max:void 0,min:(_=m==null?void 0:m.fieldAttributes)!=null&&_.scale?((W=(H=ta(e.type.id))==null?void 0:H.fieldAttributes)==null?void 0:W.scale).min:void 0,placeholder:(z=m==null?void 0:m.fieldAttributes)!=null&&z.scale?`${((O=m==null?void 0:m.fieldAttributes)==null?void 0:O.scale).default}`:"Optional",type:"number",onChange:A=>c(F=>({...F,scale:A.target.value?parseInt(A.target.value):void 0})),className:"w-full rounded-md bg-muted text-sm"})]})]}):null,t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(De,{htmlFor:"width",className:"text-subtitle",children:o("side_panel.tables_section.table.field_actions.comments")}),t.jsx(Ks,{value:i.comments??void 0,onChange:A=>c(F=>({...F,comments:A.target.value})),placeholder:o("side_panel.tables_section.table.field_actions.no_comments"),className:"w-full rounded-md bg-muted text-sm"})]})]}),t.jsx(ut,{orientation:"horizontal"}),t.jsxs(Y,{variant:"outline",className:"flex gap-2 !text-red-700",onClick:r,children:[t.jsx(Ke,{className:"size-3.5 text-red-700"}),o("side_panel.tables_section.table.field_actions.delete_field")]})]})})]})},uf=e=>{if(!e.fieldAttributes)return{regex:void 0,extractRegex:void 0};const n=e.name,s=e.fieldAttributes;return s.hasCharMaxLength?s.hasCharMaxLengthOption?{regex:`^${n}\\((\\d+|[mM][aA][xX])\\)$`,extractRegex:/\((\d+|max)\)/i}:{regex:`^${n}\\(\\d+\\)$`,extractRegex:/\((\d+)\)/}:s.precision&&s.scale?{regex:`^${n}\\s*\\(\\s*\\d+\\s*(?:,\\s*\\d+\\s*)?\\)$`,extractRegex:new RegExp(`${n}\\s*\\(\\s*(\\d+)\\s*(?:,\\s*(\\d+)\\s*)?\\)`)}:s.precision?{regex:`^${n}\\s*\\(\\s*\\d+\\s*\\)$`,extractRegex:/\((\d+)\)/}:{regex:void 0,extractRegex:void 0}},ff=({table:e,field:n,updateField:s,removeField:a})=>{const{databaseType:r,customTypes:o}=Q(),{t:i}=J(),d=l.useMemo(()=>e.fields.filter(y=>y.primaryKey),[e.fields]).length,{attributes:f,listeners:p,setNodeRef:u,transform:g,transition:x}=ht({id:n.id}),m=l.useMemo(()=>{const y=na[r].map(C=>{const S=uf(C);return{label:C.name,value:C.id,regex:S.regex,extractRegex:S.extractRegex,group:o!=null&&o.length?"Standard Types":void 0}});if(!(o!=null&&o.length))return y;const j=o.map(C=>{var S;return{label:C.name,value:C.name,description:C.kind==="enum"?`${(S=C.values)==null?void 0:S.join(" | ")}`:"",group:"Custom Types"}});return[...y,...j]},[r,o]),h=l.useCallback((y,j)=>{var L,E,T,_,H,W,z,O;const C=na[r].find(A=>A.id===y)??{id:y,name:y};let S,M,k;j!=null&&j.length?(L=C==null?void 0:C.fieldAttributes)!=null&&L.hasCharMaxLength?S=(E=j[1])==null?void 0:E.toLowerCase():(T=C==null?void 0:C.fieldAttributes)!=null&&T.precision&&((_=C==null?void 0:C.fieldAttributes)!=null&&_.scale)?(M=parseInt(j[1]),k=j[2]?parseInt(j[2]):void 0):(H=C==null?void 0:C.fieldAttributes)!=null&&H.precision&&(M=parseInt(j[1])):((W=C==null?void 0:C.fieldAttributes)!=null&&W.hasCharMaxLength&&n.characterMaximumLength&&(S=n.characterMaximumLength),(z=C==null?void 0:C.fieldAttributes)!=null&&z.precision&&n.precision&&(M=n.precision),(O=C==null?void 0:C.fieldAttributes)!=null&&O.scale&&n.scale&&(k=n.scale)),s({characterMaximumLength:S,precision:M,scale:k,type:il(C??{id:y,name:y})})},[s,r,n.characterMaximumLength,n.precision,n.scale]),v={transform:Ue.Translate.toString(g),transition:x},N=l.useCallback(y=>{if(y){const j={primaryKey:!0};d===0&&(j.unique=!0),s(j)}else s({primaryKey:!1})},[d,s]),b=l.useCallback(y=>{s({nullable:y})},[s]),w=l.useCallback(y=>{s({name:y.target.value})},[s]);return t.jsxs("div",{className:"flex flex-1 touch-none flex-row justify-between gap-2 p-1",ref:u,style:v,...f,children:[t.jsxs("div",{className:"flex flex-1 items-center justify-start gap-1 overflow-hidden",children:[t.jsx("div",{className:"flex w-4 shrink-0 cursor-move items-center justify-center",...p,children:t.jsx(fn,{className:"size-3.5  text-muted-foreground"})}),t.jsxs(le,{children:[t.jsx(ce,{asChild:!0,children:t.jsx("span",{className:"min-w-0 flex-1",children:t.jsx(re,{className:"h-8 w-full !truncate focus-visible:ring-0",type:"text",placeholder:i("side_panel.tables_section.table.field_name"),value:n.name,onChange:w})})}),t.jsx(de,{children:n.name})]}),t.jsxs(le,{children:[t.jsx(ce,{className:"flex h-8 min-w-0 flex-1",asChild:!0,children:t.jsx("span",{children:t.jsx(Pn,{className:"flex h-8 min-h-8 w-full",popoverClassName:"min-w-[350px]",options:m,placeholder:i("side_panel.tables_section.table.field_type"),value:n.type.id,valueSuffix:sa(n),optionSuffix:y=>sa(n,{databaseType:r,forceExtended:!0,typeId:y.value}),onChange:h,emptyPlaceholder:i("side_panel.tables_section.table.no_types_found")})})}),t.jsxs(de,{children:[n.type.name,n.characterMaximumLength?`(${n.characterMaximumLength})`:""]})]})]}),t.jsxs("div",{className:"flex shrink-0 items-center justify-end gap-1",children:[t.jsxs(le,{children:[t.jsx(ce,{asChild:!0,children:t.jsx("span",{children:t.jsx(Ns,{pressed:n.nullable,onPressedChange:b,children:"N"})})}),t.jsx(de,{children:i("side_panel.tables_section.table.nullable")})]}),t.jsxs(le,{children:[t.jsx(ce,{asChild:!0,children:t.jsx("span",{children:t.jsx(Ns,{pressed:n.primaryKey,onPressedChange:N,children:t.jsx(Bl,{className:"h-3.5"})})})}),t.jsx(de,{children:i("side_panel.tables_section.table.primary_key")})]}),t.jsx(df,{field:n,table:e,updateField:s,removeField:a,databaseType:r})]})]})},Lo=I.forwardRef((e,n)=>t.jsx(In,{...e,ref:n,variant:"default",className:"h-8 w-[32px] p-2 text-xs text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}));Lo.displayName=In.displayName;const pf=[{label:"B-tree (default)",value:"btree"},{label:"Hash",value:"hash"}],mf=({fields:e,index:n,updateIndex:s,removeIndex:a})=>{const{t:r}=J(),{databaseType:o}=Q(),i=e.map(p=>({label:p.name,value:p.id})),c=l.useCallback(p=>{const u=Array.isArray(p)?p:[p];n.type==="hash"&&u.length>0?s({fieldIds:[u[u.length-1]]}):s({fieldIds:u})},[n.type,s]),d=l.useMemo(()=>pf.filter(p=>{var u;return(u=ll[o])==null?void 0:u.includes(p.value)}),[o]),f=l.useCallback(p=>{{const u=p;u==="hash"&&n.fieldIds.length>1?s({type:u,fieldIds:[n.fieldIds[0]]}):s({type:u})}},[s,n.fieldIds]);return t.jsxs("div",{className:"flex flex-1 flex-row justify-between gap-2 p-1",children:[t.jsx(Pn,{className:"flex h-8 min-h-8 min-w-0 flex-1",multiple:!0,oneLine:!0,options:i,placeholder:r("side_panel.tables_section.table.index_select_fields"),value:n.fieldIds,onChange:c,emptyPlaceholder:r("side_panel.tables_section.table.no_types_found"),keepOrder:!0}),t.jsxs("div",{className:"flex shrink-0 gap-1",children:[t.jsxs(le,{children:[t.jsx(ce,{asChild:!0,children:t.jsx("span",{children:t.jsx(Lo,{pressed:n.unique,onPressedChange:p=>s({unique:!!p}),children:"U"})})}),t.jsx(de,{children:r("side_panel.tables_section.table.index_actions.unique")})]}),t.jsxs(Rs,{children:[t.jsx(Ds,{asChild:!0,children:t.jsx(Y,{variant:"ghost",className:"h-8 w-[32px] p-2 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:t.jsx(nr,{className:"size-3.5"})})}),t.jsx(Es,{className:"w-52",children:t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("div",{className:"text-sm font-semibold",children:r("side_panel.tables_section.table.index_actions.title")}),t.jsx(ut,{orientation:"horizontal"}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(De,{htmlFor:"width",className:"text-subtitle",children:r("side_panel.tables_section.table.index_actions.name")}),t.jsx(re,{value:n.name,onChange:p=>s({name:p.target.value})})]}),t.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[t.jsx(De,{htmlFor:"width",className:"text-subtitle",children:r("side_panel.tables_section.table.index_actions.unique")}),t.jsx(cs,{checked:n.unique,onCheckedChange:p=>s({unique:!!p})})]}),d.length>0?t.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[t.jsx(De,{htmlFor:"indexType",className:"text-subtitle",children:r("side_panel.tables_section.table.index_actions.index_type")}),t.jsx(Pn,{options:d,value:n.type||"btree",onChange:f})]}):null,t.jsx(ut,{orientation:"horizontal"}),t.jsxs(Y,{variant:"outline",className:"flex gap-2 !text-red-700",onClick:a,children:[t.jsx(Ke,{className:"size-3.5 text-red-700"}),r("side_panel.tables_section.table.index_actions.delete_index")]})]})})]})]})]})},Hs=I.forwardRef(({color:e,onChange:n},s)=>t.jsxs(Rs,{children:[t.jsx(Ds,{asChild:!0,ref:s,children:t.jsx("div",{className:"h-6 w-8 cursor-pointer rounded-md border-2 border-muted transition-shadow hover:shadow-md",style:{backgroundColor:e}})}),t.jsx(Es,{className:"w-fit",children:t.jsx("div",{className:"grid grid-cols-4 gap-2",children:Gl.map(a=>t.jsx("div",{className:"size-8 cursor-pointer rounded-md border-2 border-muted transition-shadow hover:shadow-md",style:{backgroundColor:a},onClick:()=>n(a)},a))})})]}));Hs.displayName="ColorPicker";const hf=({table:e})=>{const{updateField:n,removeField:s,createField:a,createIndex:r,removeIndex:o,updateIndex:i,updateTable:c}=Q(),{t:d}=J(),{color:f}=e,[p,u]=I.useState(["fields"]),g=jn(yn(pt)),x=l.useCallback((N,b)=>{if(n(e.id,N,b),b.primaryKey===!1){const w=e.fields.filter(y=>y.id!==N&&y.primaryKey);w.length===1&&n(e.id,w[0].id,{unique:!0},{updateHistory:!1})}},[e.id,e.fields,n]),m=N=>{const{active:b,over:w}=N;if((b==null?void 0:b.id)!==(w==null?void 0:w.id)&&w&&b){const y=e.fields,j=y.findIndex(S=>S.id===b.id),C=y.findIndex(S=>S.id===w.id);c(e.id,{fields:mt(y,j,C)})}},h=l.useCallback(N=>{N.stopPropagation(),u(b=>b.includes("indexes")?b:[...b,"indexes"]),r(e.id)},[r,e.id,u]),v=l.useCallback(N=>{N.stopPropagation(),a(e.id)},[a,e.id]);return t.jsxs("div",{className:"flex flex-col gap-1 rounded-b-md border-l-[6px] px-1",style:{borderColor:f},children:[t.jsxs(dn,{type:"multiple",className:"w-full",value:p,onValueChange:N=>u(N),children:[t.jsxs(it,{value:"fields",className:"mb-2 border-y-0",children:[t.jsx(lt,{iconPosition:"right",className:"group flex flex-1 p-0 px-2 py-1 text-xs text-subtitle hover:bg-secondary",asChild:!0,children:t.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[t.jsxs("div",{className:"flex flex-row items-center gap-1",children:[t.jsx(ls,{className:"size-4"}),d("side_panel.tables_section.table.fields")]}),t.jsx("div",{className:"flex flex-row-reverse",children:t.jsx("div",{className:"hidden flex-row-reverse group-hover:flex",children:t.jsx(Y,{variant:"ghost",className:"size-4 p-0 text-xs hover:bg-primary-foreground",onClick:v,children:t.jsx(et,{className:"size-4 shrink-0 text-muted-foreground transition-transform duration-200"})})})})]})}),t.jsx(ct,{className:"flex flex-col pb-0 pt-1",children:t.jsxs(Cn,{sensors:g,collisionDetection:Nn,onDragEnd:m,children:[t.jsx(_n,{items:e.fields,strategy:Sn,children:e.fields.map(N=>t.jsx(ff,{field:N,table:e,updateField:b=>x(N.id,b),removeField:()=>s(e.id,N.id)},N.id))}),t.jsx("div",{className:"flex justify-start p-1",children:t.jsxs(Y,{variant:"ghost",className:"flex h-7 items-center gap-1 px-2 text-xs",onClick:v,children:[t.jsx(et,{className:"size-4 text-muted-foreground"}),d("side_panel.tables_section.table.add_field")]})})]})})]}),t.jsxs(it,{value:"indexes",className:"mb-2 border-y-0",children:[t.jsx(lt,{iconPosition:"right",className:"group flex flex-1 p-0 px-2 py-1 text-xs text-subtitle hover:bg-secondary",asChild:!0,children:t.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[t.jsxs("div",{className:"flex flex-row items-center gap-1",children:[t.jsx(ds,{className:"size-4"}),d("side_panel.tables_section.table.indexes")]}),t.jsx("div",{className:"flex flex-row-reverse",children:t.jsx("div",{className:"hidden flex-row-reverse group-hover:flex",children:t.jsx(Y,{variant:"ghost",className:"size-4 p-0 text-xs hover:bg-primary-foreground",onClick:h,children:t.jsx(et,{className:"size-4 shrink-0 text-muted-foreground transition-transform duration-200"})})})})]})}),t.jsxs(ct,{className:"pb-0 pt-1",children:[e.indexes.map(N=>t.jsx(mf,{index:N,removeIndex:()=>o(e.id,N.id),updateIndex:b=>i(e.id,N.id,b),fields:e.fields},N.id)),t.jsx("div",{className:"flex justify-start p-1",children:t.jsxs(Y,{variant:"ghost",className:"flex h-7 items-center gap-1 px-2 text-xs",onClick:h,children:[t.jsx(et,{className:"size-4 text-muted-foreground"}),d("side_panel.tables_section.table.add_index")]})})]})]}),t.jsxs(it,{value:"comments",className:"border-y-0",children:[t.jsx(lt,{iconPosition:"right",className:"group flex flex-1 p-0 px-2 py-1 text-xs text-subtitle hover:bg-secondary",asChild:!0,children:t.jsx("div",{className:"flex flex-1 items-center justify-between",children:t.jsxs("div",{className:"flex flex-row items-center gap-1",children:[t.jsx(Vl,{className:"size-4"}),d("side_panel.tables_section.table.comments")]})})}),t.jsx(ct,{className:"pb-0 pt-1",children:t.jsx(Ks,{value:e.comments??void 0,onChange:N=>c(e.id,{comments:N.target.value}),placeholder:d("side_panel.tables_section.table.no_comments"),className:"w-full rounded-md bg-muted text-sm focus-visible:ring-0"})})]})]}),t.jsx(ut,{className:""}),t.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[t.jsx(Hs,{color:f,onChange:N=>c(e.id,{color:N})}),t.jsxs("div",{className:"flex gap-1",children:[t.jsxs(Y,{variant:"outline",className:"h-8 p-2 text-xs",onClick:h,children:[t.jsx(ds,{className:"h-4"}),d("side_panel.tables_section.table.add_index")]}),t.jsxs(Y,{variant:"outline",className:"h-8 p-2 text-xs",onClick:v,children:[t.jsx(ls,{className:"h-4"}),d("side_panel.tables_section.table.add_field")]})]})]})]})},Po=I.forwardRef(({table:e},n)=>{const{attributes:s,setNodeRef:a,transform:r,transition:o}=ht({id:e.id}),i={transform:Ue.Translate.toString(r),transition:o};return t.jsx(it,{value:e.id,className:"border-none",ref:n,children:t.jsxs("div",{className:"w-full rounded-md border-b",ref:a,style:i,...s,children:[t.jsx(lt,{className:"w-full rounded-md border-l-[6px] px-2 py-0 hover:bg-accent hover:no-underline data-[state=open]:rounded-b-none",style:{borderColor:e.color},asChild:!0,children:t.jsx(cf,{table:e})}),t.jsx(ct,{children:t.jsx(hf,{table:e})})]})})});Po.displayName="TableListItem";const xf=({tables:e})=>{const{updateTablesState:n}=Q(),{openTableFromSidebar:s,openedTableInSidebar:a}=ge(),r=I.useRef(null),o=l.useMemo(()=>e.reduce((p,u)=>(p[u.id]=I.createRef(),p),{}),[e]),i=l.useCallback(p=>{var u,g;return(g=(u=o[p])==null?void 0:u.current)==null?void 0:g.scrollIntoView({behavior:"smooth",block:"start"})},[o]),c=jn(yn(pt)),d=p=>{const{active:u,over:g}=p;if((u==null?void 0:u.id)!==(g==null?void 0:g.id)&&g&&u){const x=e.findIndex(v=>v.id===u.id),m=e.findIndex(v=>v.id===g.id),h=mt(e,x,m).reduce((v,N,b)=>(v.set(N.id,b),v),new Map);n(v=>v.map(N=>({id:N.id,order:h.get(N.id)})))}},f=l.useCallback(()=>{a&&r.current!==a&&(r.current=a,i(a))},[i,a]);return t.jsx(dn,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-1",value:a,onValueChange:s,onAnimationEnd:f,children:t.jsx(Cn,{sensors:c,collisionDetection:Nn,onDragEnd:d,children:t.jsx(_n,{items:e,strategy:Sn,children:e.sort((p,u)=>p.order&&u.order===void 0?-1:p.order===void 0&&u.order?1:p.order!==void 0&&u.order!==void 0?(p.order??0)-(u.order??0):p.isView===u.isView?p.name.localeCompare(u.name):p.isView?1:-1).map(p=>t.jsx(Po,{table:p,ref:o[p.id]},p.id))})})})},gf="/MyChart/assets/empty_state-FM0xVkGj.png",bf="/MyChart/assets/empty_state_dark-CGFOiUtp.png",Ht=l.forwardRef(({title:e,description:n,className:s,titleClassName:a,descriptionClassName:r,imageClassName:o},i)=>{const{effectiveTheme:c}=Hn();return t.jsxs("div",{ref:i,className:D("flex flex-1 flex-col items-center justify-center space-y-1",s),children:[t.jsx("img",{src:c==="dark"?bf:gf,alt:"Empty state",className:D("mb-2 w-20",o)}),t.jsx(De,{className:D("text-base",a),children:e}),t.jsx(De,{className:D("text-sm text-center font-normal text-muted-foreground",r),children:n})]})});Ht.displayName="EmptyState";const vf=()=>{const{createTable:e,tables:n,databaseType:s}=Q(),{filter:a,schemasDisplayed:r}=ln(),{openTableSchemaDialog:o}=Rt(),i=Ia(),{t:c}=J(),{openTableFromSidebar:d}=ge(),[f,p]=I.useState(""),u=I.useRef(null),g=l.useMemo(()=>{const v=b=>{var w;return!((w=f==null?void 0:f.trim)!=null&&w.call(f))||b.name.toLowerCase().includes(f.toLowerCase())},N=b=>cl({table:{id:b.id,schema:b.schema},filter:a,options:{defaultSchema:dt[s]}});return n.filter(N).filter(v)},[n,f,a,s]),x=l.useCallback(async({schema:v})=>{const b=-i.x/i.zoom+80/i.zoom,w=-i.y/i.zoom+80/i.zoom,y=await e({x:b,y:w,schema:v==null?void 0:v.name});d(y.id)},[e,d,i.x,i.y,i.zoom]),m=l.useCallback(async()=>{if(p(""),r.length>1)o({onConfirm:x,schemas:r});else{const v=r.length===1?r[0]:void 0;x({schema:v})}},[x,r,o,p]),h=l.useCallback(()=>{p("")},[]);return t.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2","data-vaul-no-drag":!0,children:[t.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[t.jsx("div",{className:"flex-1",children:t.jsx(re,{ref:u,type:"text",placeholder:c("side_panel.tables_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:f,onChange:v=>p(v.target.value)})}),t.jsxs(Y,{variant:"secondary",className:"h-8 p-2 text-xs",onClick:m,children:[t.jsx(ka,{className:"h-4"}),c("side_panel.tables_section.add_table")]})]}),t.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:t.jsx(cn,{className:"h-full",children:n.length===0?t.jsx(Ht,{title:c("side_panel.tables_section.empty_state.title"),description:c("side_panel.tables_section.empty_state.description"),className:"mt-20"}):f&&g.length===0?t.jsxs("div",{className:"mt-10 flex flex-col items-center gap-2",children:[t.jsx("div",{className:"text-sm text-muted-foreground",children:c("side_panel.tables_section.no_results")}),t.jsxs(Y,{variant:"outline",size:"sm",onClick:h,className:"gap-1",children:[t.jsx(At,{className:"size-3.5"}),c("side_panel.tables_section.clear")]})]}):t.jsx(xf,{tables:g})})})]})},wf=({relationship:e})=>{const{updateRelationship:n,removeRelationship:s}=Q(),{fitView:a,deleteElements:r,setEdges:o}=Dt(),{t:i}=J(),{hideSidePanel:c}=ge(),[d,f]=I.useState(!1),{isMd:p}=Et("md"),[u,g]=I.useState(e.name),x=I.useRef(null),m=l.useCallback(()=>{d&&(u.trim()&&u!==e.name&&n(e.id,{name:u.trim()}),f(!1))},[u,e.id,n,d,e.name]);un(x,m),st("Enter",m);const h=w=>{w.stopPropagation(),f(!0)},v=l.useCallback(w=>{w.stopPropagation(),o(y=>y.map(j=>j.id==e.id?{...j,selected:!0}:{...j,selected:!1})),a({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.sourceTableId},{id:e.targetTableId}]}),p||c()},[a,e.sourceTableId,e.targetTableId,o,e.id,p,c]),N=l.useCallback(()=>{s(e.id),r({edges:[{id:e.id}]})},[e.id,s,r]),b=l.useCallback(()=>t.jsxs(Bt,{children:[t.jsx(Vt,{children:t.jsx(me,{children:t.jsx(mn,{})})}),t.jsxs(xt,{className:"w-40",children:[t.jsx(Kt,{children:i("side_panel.relationships_section.relationship.relationship_actions.title")}),t.jsx(Be,{}),t.jsx(Ge,{children:t.jsxs(Te,{onClick:N,className:"flex justify-between !text-red-700",children:[i("side_panel.relationships_section.relationship.relationship_actions.delete_relationship"),t.jsx(Ke,{className:"size-3.5 text-red-700"})]})})]})]}),[N,i]);return t.jsxs("div",{className:"group flex h-11 flex-1 items-center justify-between overflow-hidden",children:[t.jsx("div",{className:"flex min-w-0 flex-1",children:d?t.jsx(re,{ref:x,autoFocus:!0,type:"text",placeholder:e.name,value:u,onClick:w=>w.stopPropagation(),onChange:w=>g(w.target.value),className:"h-7 w-full focus-visible:ring-0"}):t.jsx("div",{className:"truncate",children:e.name})}),t.jsx("div",{className:"flex flex-row-reverse",children:d?t.jsx(me,{onClick:m,children:t.jsx(Tt,{})}):t.jsxs(t.Fragment,{children:[t.jsx("div",{children:b()}),t.jsxs("div",{className:"flex flex-row-reverse md:hidden md:group-hover:flex",children:[t.jsx(me,{onClick:h,children:t.jsx(pn,{})}),t.jsx(me,{onClick:v,children:t.jsx(Kn,{})})]})]})})]})},yf=({relationship:e})=>{const{getTable:n,getField:s,updateRelationship:a,removeRelationship:r}=Q(),{deleteElements:o}=Dt(),{t:i}=J(),c=l.useMemo(()=>ql({sourceCardinality:e.sourceCardinality,targetCardinality:e.targetCardinality}),[e.sourceCardinality,e.targetCardinality]),d=l.useCallback(m=>{const{sourceCardinality:h,targetCardinality:v}=Xl(m);a(e.id,{sourceCardinality:h,targetCardinality:v})},[e.id,a]),f=n(e.targetTableId),p=s(e.targetTableId,e.targetFieldId),u=n(e.sourceTableId),g=s(e.sourceTableId,e.sourceFieldId),x=l.useCallback(()=>{r(e.id),o({edges:[{id:e.id}]})},[e.id,r,o]);return t.jsxs("div",{className:"my-1 flex flex-col rounded-b-md px-1",children:[t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{className:"flex items-center justify-between gap-1 text-xs",children:[t.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[t.jsxs("div",{className:"flex flex-row items-center gap-1",children:[t.jsx(Ea,{className:"size-4 text-subtitle"}),t.jsx("div",{className:"font-bold text-subtitle",children:i("side_panel.relationships_section.relationship.primary")})]}),t.jsxs(le,{children:[t.jsx(ce,{children:t.jsxs("div",{className:"truncate text-left text-sm",children:[u!=null&&u.schema?`${u.schema}.`:"",u==null?void 0:u.name,"(",g==null?void 0:g.name,")"]})}),t.jsxs(de,{children:[u!=null&&u.schema?`${u.schema}.`:"",u==null?void 0:u.name,"(",g==null?void 0:g.name,")"]})]})]}),t.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[t.jsxs("div",{className:"flex flex-row items-center gap-1",children:[t.jsx(Ta,{className:"size-4 text-subtitle"}),t.jsx("div",{className:"font-bold text-subtitle",children:i("side_panel.relationships_section.relationship.foreign")})]}),t.jsxs(le,{children:[t.jsx(ce,{children:t.jsxs("div",{className:"truncate text-left text-sm",children:[f!=null&&f.schema?`${f.schema}.`:"",f==null?void 0:f.name,"(",p==null?void 0:p.name,")"]})}),t.jsxs(de,{children:[f!=null&&f.schema?`${f.schema}.`:"",f==null?void 0:f.name,"(",p==null?void 0:p.name,")"]})]})]})]}),t.jsxs("div",{className:"flex flex-col gap-2 text-xs",children:[t.jsxs("div",{className:"flex flex-row items-center gap-1",children:[t.jsx(ac,{className:"size-4 text-subtitle"}),t.jsx("div",{className:"font-bold text-subtitle",children:i("side_panel.relationships_section.relationship.cardinality")})]}),t.jsxs(xn,{value:c,onValueChange:d,children:[t.jsx(Lt,{className:"h-8",children:t.jsx(gn,{})}),t.jsx(Pt,{children:t.jsxs(sn,{children:[t.jsx(pe,{value:"one_to_one",children:i("relationship_type.one_to_one")}),t.jsx(pe,{value:"one_to_many",children:i("relationship_type.one_to_many")}),t.jsx(pe,{value:"many_to_one",children:i("relationship_type.many_to_one")}),t.jsx(pe,{value:"many_to_many",children:i("relationship_type.many_to_many")})]})})]})]})]}),t.jsx("div",{className:"flex flex-1 items-center justify-center pt-2",children:t.jsxs(Y,{variant:"ghost",className:"h-8 p-2 text-xs",onClick:x,children:[t.jsx(Ke,{className:"mr-1 size-3.5 text-red-700"}),t.jsx("div",{className:"text-red-700",children:i("side_panel.relationships_section.relationship.delete_relationship")})]})})]})},$o=I.forwardRef(({relationship:e},n)=>t.jsxs(it,{value:e.id,className:"rounded-md",ref:n,children:[t.jsx(lt,{asChild:!0,className:"w-full rounded-md px-2 py-0 hover:bg-accent hover:no-underline data-[state=open]:rounded-b-none",children:t.jsx(wf,{relationship:e})}),t.jsx(ct,{className:"p-1 pb-0",children:t.jsx(yf,{relationship:e})})]}));$o.displayName="RelationshipListItem";const jf=({relationships:e})=>{const{openRelationshipFromSidebar:n,openedRelationshipInSidebar:s}=ge(),a=I.useRef(null),r=e.reduce((c,d)=>(c[d.id]=I.createRef(),c),{}),o=l.useCallback(c=>{var d,f;return(f=(d=r[c])==null?void 0:d.current)==null?void 0:f.scrollIntoView({behavior:"smooth",block:"start"})},[r]),i=l.useCallback(()=>{s&&a.current!==s&&(a.current=s,o(s))},[o,s]);return t.jsx(dn,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-1",value:s,onValueChange:n,onAnimationEnd:i,children:e.map(c=>t.jsx($o,{relationship:c,ref:r[c.id]},c.id))})},Nf=()=>{const{relationships:e,databaseType:n}=Q(),{filter:s}=ln(),[a,r]=I.useState(""),{closeAllRelationshipsInSidebar:o}=ge(),{t:i}=J(),{openCreateRelationshipDialog:c}=Rt(),d=I.useRef(null),f=l.useMemo(()=>{const u=x=>{var m;return!((m=a==null?void 0:a.trim)!=null&&m.call(a))||x.name.toLowerCase().includes(a.toLowerCase())},g=x=>dl({tableA:{id:x.sourceTableId,schema:x.sourceSchema},tableB:{id:x.targetTableId,schema:x.targetSchema},filter:s,options:{defaultSchema:dt[n]}});return e.filter(g).filter(u)},[e,a,s,n]),p=l.useCallback(async()=>{r(""),c()},[c,r]);return t.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2",children:[t.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[t.jsx("div",{children:t.jsxs(le,{children:[t.jsx(ce,{asChild:!0,children:t.jsx("span",{children:t.jsx(Y,{variant:"ghost",className:"size-8 p-0",onClick:o,children:t.jsx(sr,{className:"size-4"})})})}),t.jsx(de,{children:i("side_panel.relationships_section.collapse")})]})}),t.jsx("div",{className:"flex-1",children:t.jsx(re,{ref:d,type:"text",placeholder:i("side_panel.relationships_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:a,onChange:u=>r(u.target.value)})}),t.jsxs(Y,{variant:"secondary",className:"h-8 p-2 text-xs",onClick:p,children:[t.jsx(Ja,{className:"h-4"}),i("side_panel.relationships_section.add_relationship")]})]}),t.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:t.jsx(cn,{className:"h-full",children:e.length===0?t.jsx(Ht,{title:i("side_panel.relationships_section.empty_state.title"),description:i("side_panel.relationships_section.empty_state.description"),className:"mt-20"}):t.jsx(jf,{relationships:f})})})]})},Cf=({dependency:e})=>{const{removeDependency:n,getTable:s}=Q(),{fitView:a,deleteElements:r,setEdges:o}=Dt(),{t:i}=J(),{hideSidePanel:c}=ge(),{isMd:d}=Et("md"),f=l.useMemo(()=>{const x=s(e.tableId),m=s(e.dependentTableId);return!x||!m?"":`${m.name} -> ${x.name}`},[e.tableId,e.dependentTableId,s]),p=l.useCallback(x=>{x.stopPropagation(),o(m=>m.map(h=>h.id==e.id?{...h,selected:!0}:{...h,selected:!1})),a({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.tableId},{id:e.dependentTableId}]}),d||c()},[a,e.tableId,e.dependentTableId,o,e.id,d,c]),u=l.useCallback(()=>{n(e.id),r({edges:[{id:e.id}]})},[e.id,n,r]),g=l.useCallback(()=>t.jsxs(Bt,{children:[t.jsx(Vt,{children:t.jsx(me,{children:t.jsx(mn,{})})}),t.jsxs(xt,{className:"w-40",children:[t.jsx(Kt,{children:i("side_panel.dependencies_section.dependency.dependency_actions.title")}),t.jsx(Be,{}),t.jsx(Ge,{children:t.jsxs(Te,{onClick:u,className:"flex justify-between !text-red-700",children:[i("side_panel.dependencies_section.dependency.dependency_actions.delete_dependency"),t.jsx(Ke,{className:"size-3.5 text-red-700"})]})})]})]}),[u,i]);return t.jsxs("div",{className:"group flex h-11 flex-1 items-center justify-between overflow-hidden",children:[t.jsx("div",{className:"flex min-w-0 flex-1",children:t.jsx("div",{className:"truncate",children:f})}),t.jsxs("div",{className:"flex flex-row-reverse",children:[t.jsx("div",{children:g()}),t.jsx("div",{className:"flex flex-row-reverse md:hidden md:group-hover:flex",children:t.jsx(me,{onClick:p,children:t.jsx(Kn,{})})})]})]})},Sf=({dependency:e})=>{const{getTable:n,removeDependency:s}=Q(),{deleteElements:a}=Dt(),{t:r}=J(),o=n(e.tableId),i=n(e.dependentTableId),c=l.useCallback(()=>{s(e.id),a({edges:[{id:e.id}]})},[e.id,s,a]);return t.jsxs("div",{className:"my-1 flex flex-col rounded-b-md px-1",children:[t.jsx("div",{className:"flex flex-col gap-6",children:t.jsxs("div",{className:"flex items-center justify-between gap-1 text-xs",children:[t.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[t.jsxs("div",{className:"flex flex-row items-center gap-1",children:[t.jsx(Ta,{className:"size-4 text-subtitle"}),t.jsx("div",{className:"font-bold text-subtitle",children:r("side_panel.dependencies_section.dependency.dependent_table")})]}),t.jsxs(le,{children:[t.jsx(ce,{children:t.jsx("div",{className:"truncate text-left text-sm	",children:i==null?void 0:i.name})}),t.jsx(de,{children:i==null?void 0:i.name})]})]}),t.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[t.jsxs("div",{className:"flex flex-row items-center gap-1",children:[t.jsx(Ea,{className:"size-4 text-subtitle"}),t.jsx("div",{className:"font-bold text-subtitle",children:r("side_panel.dependencies_section.dependency.table")})]}),t.jsxs(le,{children:[t.jsx(ce,{children:t.jsx("div",{className:"truncate text-left text-sm",children:o==null?void 0:o.name})}),t.jsx(de,{children:o==null?void 0:o.name})]})]})]})}),t.jsx("div",{className:"flex flex-1 items-center justify-center pt-2",children:t.jsxs(Y,{variant:"ghost",className:"h-8 p-2 text-xs",onClick:c,children:[t.jsx(Ke,{className:"mr-1 size-3.5 text-red-700"}),t.jsx("div",{className:"text-red-700",children:r("side_panel.dependencies_section.dependency.delete_dependency")})]})})]})},zo=I.forwardRef(({dependency:e},n)=>t.jsxs(it,{value:e.id,className:"rounded-md",ref:n,children:[t.jsx(lt,{asChild:!0,className:"w-full rounded-md px-2 py-0 hover:bg-accent hover:no-underline data-[state=open]:rounded-b-none",children:t.jsx(Cf,{dependency:e})}),t.jsx(ct,{className:"p-1 pb-0",children:t.jsx(Sf,{dependency:e})})]}));zo.displayName="DependencyListItem";const _f=({dependencies:e})=>{const{openDependencyFromSidebar:n,openedDependencyInSidebar:s}=ge(),a=I.useRef(null),r=e.reduce((c,d)=>(c[d.id]=I.createRef(),c),{}),o=l.useCallback(c=>{var d,f;return(f=(d=r[c])==null?void 0:d.current)==null?void 0:f.scrollIntoView({behavior:"smooth",block:"start"})},[r]),i=l.useCallback(()=>{s&&a.current!==s&&(a.current=s,o(s))},[o,s]);return t.jsx(dn,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-1",value:s,onValueChange:n,onAnimationEnd:i,children:e.map(c=>t.jsx(zo,{dependency:c,ref:r[c.id]},c.id))})},If=()=>{const{dependencies:e,getTable:n,databaseType:s}=Q(),{filter:a}=ln(),[r,o]=I.useState(""),{closeAllDependenciesInSidebar:i}=ge(),{t:c}=J(),d=l.useMemo(()=>{const f=u=>{var m,h,v;if(!((m=r==null?void 0:r.trim)!=null&&m.call(r)))return!0;const g=((h=n(u.tableId))==null?void 0:h.name)??"",x=((v=n(u.dependentTableId))==null?void 0:v.name)??"";return g.toLowerCase().includes(r.toLowerCase())||x.toLowerCase().includes(r.toLowerCase())},p=u=>ul({tableA:{id:u.tableId,schema:u.schema},tableB:{id:u.dependentTableId,schema:u.dependentSchema},filter:a,options:{defaultSchema:dt[s]}});return e.filter(p).filter(f).sort((u,g)=>{const x=n(u.dependentTableId),m=n(u.tableId),h=n(g.dependentTableId),v=n(g.tableId);return`${x==null?void 0:x.name}${m==null?void 0:m.name}`.localeCompare(`${h==null?void 0:h.name}${v==null?void 0:v.name}`)})},[e,r,a,n,s]);return t.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2",children:[t.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[t.jsx("div",{children:t.jsxs(le,{children:[t.jsx(ce,{asChild:!0,children:t.jsx("span",{children:t.jsx(Y,{variant:"ghost",className:"size-8 p-0",onClick:i,children:t.jsx(sr,{className:"size-4"})})})}),t.jsx(de,{children:c("side_panel.dependencies_section.collapse")})]})}),t.jsx("div",{className:"flex-1",children:t.jsx(re,{type:"text",placeholder:c("side_panel.dependencies_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:r,onChange:f=>o(f.target.value)})})]}),t.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:t.jsx(cn,{className:"h-full",children:e.length===0?t.jsx(Ht,{title:c("side_panel.dependencies_section.empty_state.title"),description:c("side_panel.dependencies_section.empty_state.description"),className:"mt-20"}):t.jsx(_f,{dependencies:d})})})]})},Fo=I.forwardRef(({area:e},n)=>{const{updateArea:s,removeArea:a}=Q(),{t:r}=J(),{fitView:o,setNodes:i}=Dt(),{hideSidePanel:c}=ge(),{isMd:d}=Et("md"),[f,p]=I.useState(!1),[u,g]=I.useState(e.name),x=I.useRef(null),{attributes:m,listeners:h,setNodeRef:v,transform:N,transition:b}=ht({id:e.id}),w=Fi(n,v),y={transform:Ue.Translate.toString(N),transition:b},j=l.useCallback(()=>{f&&(u.trim()&&s(e.id,{name:u.trim()}),p(!1))},[u,e.id,s,f]),C=l.useCallback(()=>{p(!1),g(e.name)},[e.name]),S=l.useCallback(T=>{T.stopPropagation(),p(!0)},[]),M=l.useCallback(()=>{a(e.id)},[e.id,a]),k=l.useCallback(T=>{s(e.id,{color:T})},[e.id,s]),L=l.useCallback(T=>{T.stopPropagation(),i(_=>_.map(H=>H.id==e.id?{...H,selected:!0}:{...H,selected:!1})),o({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.id}]}),d||c()},[o,e.id,i,c,d]);un(x,j),st("Enter",j),st("Escape",C);const E=l.useCallback(()=>t.jsxs(Bt,{children:[t.jsx(Vt,{children:t.jsx(me,{children:t.jsx(mn,{})})}),t.jsxs(xt,{className:"w-fit min-w-40",children:[t.jsx(Kt,{children:r("side_panel.areas_section.area.area_actions.title")}),t.jsx(Be,{}),t.jsx(Ge,{children:t.jsxs(Te,{className:"flex justify-between gap-4",onClick:T=>{T.stopPropagation(),S(T)},children:[r("side_panel.areas_section.area.area_actions.edit_name"),t.jsx(pn,{className:"size-3.5"})]})}),t.jsx(Be,{}),t.jsx(Ge,{children:t.jsxs(Te,{onClick:M,className:"flex justify-between !text-red-700",children:[r("side_panel.areas_section.area.area_actions.delete_area"),t.jsx(Ke,{className:"size-3.5 text-red-700"})]})})]})]}),[S,M,r]);return t.jsx("div",{className:"w-full rounded-md border border-border hover:bg-accent/5",ref:w,style:{...y,borderLeftWidth:"6px",borderLeftColor:e.color},...m,children:t.jsxs("div",{className:"group flex h-11 items-center justify-between gap-1 overflow-hidden p-2",children:[t.jsx("div",{className:"flex cursor-move items-center justify-center",...h,children:t.jsx(fn,{className:"size-4 text-muted-foreground"})}),t.jsx("div",{className:"flex min-w-0 flex-1",children:f?t.jsx(re,{ref:x,autoFocus:!0,type:"text",placeholder:e.name,value:u,onClick:T=>T.stopPropagation(),onChange:T=>g(T.target.value),className:"h-7 w-full focus-visible:ring-0"}):t.jsxs(le,{children:[t.jsx(ce,{asChild:!0,children:t.jsx("div",{onDoubleClick:S,className:"text-editable truncate px-2 py-0.5 text-sm font-medium",children:e.name})}),t.jsx(de,{children:r("tool_tips.double_click_to_edit")})]})}),t.jsx("div",{className:"flex items-center gap-1",children:f?t.jsx(me,{onClick:j,children:t.jsx(Tt,{})}):t.jsxs("div",{className:"flex flex-row-reverse items-center gap-1",children:[E(),t.jsx(Hs,{color:e.color,onChange:k}),t.jsx("div",{className:"hidden md:group-hover:flex",children:t.jsx(me,{onClick:L,children:t.jsx(Kn,{})})})]})})]})})});Fo.displayName="AreaListItem";const kf=({areas:e})=>{const{updateArea:n}=Q(),{openedAreaInSidebar:s}=ge(),a=I.useRef(null),r=l.useMemo(()=>e.reduce((f,p)=>(f[p.id]=I.createRef(),f),{}),[e]),o=l.useCallback(f=>{var p,u;return(u=(p=r[f])==null?void 0:p.current)==null?void 0:u.scrollIntoView({behavior:"smooth",block:"start"})},[r]),i=jn(yn(pt)),c=f=>{const{active:p,over:u}=f;if((p==null?void 0:p.id)!==(u==null?void 0:u.id)&&u&&p){const g=e.findIndex(h=>h.id===p.id),x=e.findIndex(h=>h.id===u.id);mt(e,g,x).forEach((h,v)=>{n(h.id,{order:v})})}},d=l.useCallback(()=>{s&&a.current!==s&&(a.current=s,o(s))},[o,s]);return I.useEffect(()=>{d()},[s,d]),t.jsx("div",{className:"flex w-full flex-col gap-1",children:t.jsx(Cn,{sensors:i,collisionDetection:Nn,onDragEnd:c,children:t.jsx(_n,{items:e,strategy:Sn,children:e.sort((f,p)=>f.order&&p.order===void 0?-1:f.order===void 0&&p.order?1:f.order!==void 0&&p.order!==void 0?f.order-p.order:f.name.localeCompare(p.name)).map(f=>t.jsx(Fo,{area:f,ref:r[f.id]},f.id))})})})},Mf=()=>{const{createArea:e,areas:n}=Q(),s=Ia(),{t:a}=J(),{openAreaFromSidebar:r}=ge(),[o,i]=I.useState(""),c=I.useRef(null),d=l.useMemo(()=>{const g=x=>{var m;return!((m=o==null?void 0:o.trim)!=null&&m.call(o))||x.name.toLowerCase().includes(o.toLowerCase())};return n.filter(g)},[n,o]),f=l.useCallback(async()=>{const x=-s.x/s.zoom+80/s.zoom,m=-s.y/s.zoom+80/s.zoom,h=await e({x,y:m});r&&r(h.id)},[e,r,s.x,s.y,s.zoom]),p=l.useCallback(async()=>{i(""),f()},[f,i]),u=l.useCallback(()=>{i("")},[]);return t.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2","data-vaul-no-drag":!0,children:[t.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[t.jsx("div",{className:"flex-1",children:t.jsx(re,{ref:c,type:"text",placeholder:a("side_panel.areas_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:o,onChange:g=>i(g.target.value)})}),t.jsxs(Y,{variant:"secondary",className:"h-8 p-2 text-xs",onClick:p,children:[t.jsx(Ms,{className:"h-4"}),a("side_panel.areas_section.add_area")]})]}),t.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:t.jsx(cn,{className:"h-full",children:n.length===0?t.jsx(Ht,{title:a("side_panel.areas_section.empty_state.title"),description:a("side_panel.areas_section.empty_state.description"),className:"mt-20"}):o&&d.length===0?t.jsxs("div",{className:"mt-10 flex flex-col items-center gap-2",children:[t.jsx("div",{className:"text-sm text-muted-foreground",children:a("side_panel.areas_section.no_results")}),t.jsxs(Y,{variant:"outline",size:"sm",onClick:u,className:"gap-1",children:[t.jsx(At,{className:"size-3.5"}),a("side_panel.areas_section.clear")]})]}):t.jsx(kf,{areas:d})})})]})},Bo=({customType:e,tables:n})=>{const s=e.name;for(const a of n)for(const r of a.fields)if(r.type.name===s)return!0;return!1},Rf=({customType:e})=>{const{updateCustomType:n,removeCustomType:s,highlightedCustomType:a,highlightCustomTypeId:r,tables:o,databaseType:i}=Q(),{schemasDisplayed:c}=ln(),{t:d}=J(),[f,p]=I.useState(!1),[u,g]=I.useState(e.name),x=I.useRef(null),{listeners:m}=ht({id:e.id}),h=l.useCallback(()=>{f&&(u.trim()&&n(e.id,{name:u.trim()}),p(!1))},[u,e.id,n,f]),v=l.useCallback(()=>{p(!1),g(e.name)},[e.name]);un(x,h),st("Enter",h),st("Escape",v);const N=M=>{M.stopPropagation(),p(!0)},b=l.useCallback(M=>{M.stopPropagation(),s(e.id)},[e.id,s]),w=l.useMemo(()=>(a==null?void 0:a.id)===e.id,[a,e.id]),y=l.useCallback(M=>{M.stopPropagation(),r(w?void 0:e.id)},[e.id,r,w]),j=l.useMemo(()=>Bo({customType:e,tables:o}),[e,o]),C=l.useCallback(()=>t.jsxs(Bt,{children:[t.jsx(Vt,{children:t.jsx(me,{children:t.jsx(mn,{})})}),t.jsxs(xt,{className:"w-fit min-w-40",children:[t.jsx(Kt,{children:d("side_panel.custom_types_section.custom_type.custom_type_actions.title")}),t.jsx(Be,{}),t.jsxs(Ge,{children:[t.jsxs(Te,{onClick:y,disabled:!j,className:"flex justify-between",children:[d(w?"side_panel.custom_types_section.custom_type.custom_type_actions.clear_field_highlight":"side_panel.custom_types_section.custom_type.custom_type_actions.highlight_fields"),t.jsx(er,{className:"size-3.5"})]}),t.jsxs(Te,{onClick:b,className:"flex justify-between !text-red-700",children:[d("side_panel.custom_types_section.custom_type.custom_type_actions.delete_custom_type"),t.jsx(Ke,{className:"size-3.5 text-red-700"})]})]})]})]}),[b,d,y,j,w]),S=l.useMemo(()=>{if(c.length>1)return e.schema??dt[i]},[e.schema,c.length,i]);return t.jsxs("div",{className:"group flex h-11 flex-1 items-center justify-between gap-1 overflow-hidden",children:[t.jsx("div",{className:"flex cursor-move items-center justify-center",...m,children:t.jsx(fn,{className:"size-4 text-muted-foreground"})}),t.jsx("div",{className:"flex min-w-0 flex-1 px-1",children:f?t.jsx(re,{ref:x,autoFocus:!0,type:"text",placeholder:e.name,value:u,onClick:M=>M.stopPropagation(),onChange:M=>g(M.target.value),className:"h-7 w-full focus-visible:ring-0"}):t.jsxs(le,{children:[t.jsx(ce,{asChild:!0,children:t.jsxs("div",{onDoubleClick:N,className:"text-editable truncate px-2 py-0.5",children:[e.name,t.jsx("span",{className:"text-xs text-muted-foreground",children:S?` (${S})`:""})]})}),t.jsx(de,{children:d("tool_tips.double_click_to_edit")})]})}),t.jsx("div",{className:"flex flex-row-reverse items-center",children:f?t.jsx(me,{onClick:h,children:t.jsx(Tt,{})}):t.jsxs(t.Fragment,{children:[t.jsx("div",{children:C()}),e.kind===Je.enum?t.jsx(Yl,{variant:"outline",className:"h-fit bg-background px-2 text-xs md:group-hover:hidden",children:is[e.kind]}):null,t.jsx("div",{className:"flex flex-row-reverse md:hidden md:group-hover:flex",children:t.jsx(me,{onClick:N,children:t.jsx(pn,{})})})]})})]})},Df=({values:e,addValue:n,removeValue:s})=>{const{t:a}=J(),[r,o]=l.useState(""),i=l.useCallback(()=>{r.trim()&&!e.includes(r.trim())&&(n(r.trim()),o(""))},[r,e,n]),c=l.useCallback(d=>{d.key==="Enter"&&(d.preventDefault(),i())},[i]);return t.jsxs("div",{className:"flex flex-col gap-2 text-xs",children:[t.jsxs("div",{className:"flex flex-row items-center gap-1",children:[t.jsx(bc,{className:"size-4 text-subtitle"}),t.jsx("div",{className:"font-bold text-subtitle",children:a("side_panel.custom_types_section.custom_type.enum_values")})]}),t.jsx("div",{className:"flex flex-col gap-1",children:e.map((d,f)=>t.jsxs("div",{className:"flex items-center justify-between gap-1 rounded-md border border-border bg-muted/30 px-2 py-1",children:[t.jsx("span",{className:"flex-1 truncate text-sm font-medium",children:d}),t.jsx(Y,{variant:"ghost",className:"size-6 p-0 text-muted-foreground hover:bg-destructive/10 hover:text-destructive",onClick:()=>s(d),children:t.jsx(At,{className:"size-3.5"})})]},f))}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(re,{value:r,onChange:d=>o(d.target.value),onKeyDown:c,placeholder:"Add enum value...",className:"h-8 flex-1 text-xs focus-visible:ring-0"}),t.jsx(Y,{variant:"outline",className:"h-8 px-2 text-xs",onClick:i,disabled:!r.trim()||e.includes(r.trim()),children:t.jsx(et,{className:"size-3.5"})})]})]})},Ef=({field:e,onRemove:n})=>{const{attributes:s,listeners:a,setNodeRef:r,transform:o,transition:i,isDragging:c}=ht({id:e.field}),d={transform:Ue.Transform.toString(o),transition:i,opacity:c?.5:1};return t.jsxs("div",{ref:r,style:d,className:"flex items-center gap-2 rounded-md border p-2",children:[t.jsx("div",{className:"flex cursor-move items-center justify-center",...s,...a,children:t.jsx(fn,{className:"size-3 text-muted-foreground"})}),t.jsx("div",{className:"flex-1 text-sm",children:e.field}),t.jsx("div",{className:"text-xs text-muted-foreground",children:e.type}),t.jsx(Y,{variant:"ghost",size:"sm",className:"size-6 p-0 text-muted-foreground hover:text-red-500",onClick:n,children:t.jsx(At,{className:"size-3"})})]})},Tf=({fields:e,addField:n,removeField:s,reorderFields:a})=>{const{t:r}=J(),{currentDiagram:o,customTypes:i}=Q(),[c,d]=l.useState(""),[f,p]=l.useState(""),u=l.useMemo(()=>fl[o.databaseType]||[],[o.databaseType]),g=l.useMemo(()=>i.map(b=>({id:b.name,name:b.name})),[i]),x=jn(yn(pt)),m=l.useCallback(b=>{const{active:w,over:y}=b;if((w==null?void 0:w.id)!==(y==null?void 0:y.id)&&y&&w){const j=e.findIndex(S=>S.field===w.id),C=e.findIndex(S=>S.field===y.id);if(j!==-1&&C!==-1){const S=mt(e,j,C);a(S)}}},[e,a]),h=l.useCallback(()=>{if(c.trim()&&f.trim()){if(e.some(w=>w.field===c.trim()))return;n({field:c.trim(),type:f.trim()}),d(""),p("")}},[c,f,n,e]),v=l.useCallback(b=>{b.key==="Enter"&&(b.preventDefault(),h())},[h]),N=l.useCallback(b=>{s(b)},[s]);return t.jsxs("div",{className:"flex flex-col gap-2 text-xs",children:[t.jsxs("div",{className:"flex flex-row items-center gap-1",children:[t.jsx(Nc,{className:"size-4 text-subtitle"}),t.jsx("div",{className:"font-bold text-subtitle",children:r("side_panel.custom_types_section.custom_type.composite_fields")})]}),e.length===0?t.jsx("div",{className:"py-2 text-muted-foreground",children:r("side_panel.custom_types_section.custom_type.no_fields")}):t.jsx(Cn,{sensors:x,collisionDetection:Nn,onDragEnd:m,children:t.jsx(_n,{items:e.map(b=>b.field),strategy:Sn,children:t.jsx("div",{className:"flex flex-col gap-1",children:e.map(b=>t.jsx(Ef,{field:b,onRemove:()=>N(b)},b.field))})})}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx(re,{placeholder:r("side_panel.custom_types_section.custom_type.field_name_placeholder"),value:c,onChange:b=>d(b.target.value),onKeyDown:v,className:"h-8 flex-1 text-xs"}),t.jsxs(xn,{value:f,onValueChange:p,children:[t.jsx(Lt,{className:"h-8 w-32 text-xs",children:t.jsx(gn,{placeholder:r("side_panel.custom_types_section.custom_type.field_type_placeholder")})}),t.jsxs(Pt,{children:[t.jsxs(sn,{children:[t.jsx(gs,{children:"Standard Types"}),u.map(b=>t.jsx(pe,{value:b.name,children:b.name},b.id))]}),g.length>0?t.jsxs(t.Fragment,{children:[t.jsx(Kr,{}),t.jsxs(sn,{children:[t.jsx(gs,{children:"Custom Types"}),g.map(b=>t.jsx(pe,{value:b.name,children:b.name},b.id))]})]}):null]})]})]}),t.jsxs(Y,{variant:"ghost",size:"sm",className:"h-6 gap-1 self-start text-xs",onClick:h,disabled:!c.trim()||!f.trim(),children:[t.jsx(et,{className:"size-3"}),r("side_panel.custom_types_section.custom_type.add_field")]})]})]})},Af=({customType:e})=>{const{removeCustomType:n,updateCustomType:s,highlightedCustomType:a,highlightCustomTypeId:r,tables:o}=Q(),{t:i}=J(),c=l.useCallback(()=>{n(e.id)},[e.id,n]),d=l.useCallback(b=>{s(e.id,{kind:b})},[e.id,s]),f=l.useCallback(b=>{s(e.id,{values:[...e.values||[],b]})},[e.id,e.values,s]),p=l.useCallback(b=>{s(e.id,{values:(e.values||[]).filter(w=>w!==b)})},[e.id,e.values,s]),u=l.useCallback(b=>{s(e.id,{fields:[...e.fields||[],b]})},[e.id,e.fields,s]),g=l.useCallback(b=>{s(e.id,{fields:(e.fields||[]).filter(w=>w.field!==b.field)})},[e.id,e.fields,s]),x=l.useCallback(b=>{s(e.id,{fields:b})},[e.id,s]),m=l.useCallback(()=>{(a==null?void 0:a.id)===e.id?r(void 0):r(e.id)},[e.id,r,a==null?void 0:a.id]),h=l.useMemo(()=>Bo({customType:e,tables:o}),[e,o]),v=l.useMemo(()=>(a==null?void 0:a.id)===e.id,[a,e.id]),N=l.useCallback(()=>t.jsxs(Y,{variant:"ghost",disabled:!h,className:"flex h-8 w-full items-center justify-center p-2 text-xs",onClick:m,children:[t.jsx(er,{className:"mr-1 size-3.5"}),i(v?"side_panel.custom_types_section.custom_type.custom_type_actions.clear_field_highlight":"side_panel.custom_types_section.custom_type.custom_type_actions.highlight_fields")]}),[v,h,m,i]);return t.jsxs("div",{className:"my-1 flex flex-col rounded-b-md px-1",children:[t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{className:"flex flex-col gap-2 text-xs",children:[t.jsxs("div",{className:"flex flex-row items-center gap-1",children:[t.jsx(nc,{className:"size-4 text-subtitle"}),t.jsx("div",{className:"font-bold text-subtitle",children:i("side_panel.custom_types_section.custom_type.kind")})]}),t.jsxs(xn,{value:e.kind,onValueChange:d,children:[t.jsx(Lt,{className:"h-8",children:t.jsx(gn,{})}),t.jsx(Pt,{children:t.jsxs(sn,{children:[t.jsx(pe,{value:Je.composite,children:is[Je.composite]}),t.jsx(pe,{value:Je.enum,children:is[Je.enum]})]})})]})]}),e.kind===Je.enum?t.jsx(Df,{values:e.values||[],addValue:f,removeValue:p}):t.jsx(Tf,{fields:e.fields||[],addField:u,removeField:g,reorderFields:x})]}),t.jsxs("div",{className:"flex flex-col items-center justify-center pt-2",children:[h?N():t.jsxs(le,{children:[t.jsx(ce,{asChild:!0,children:t.jsx("span",{children:N()})}),t.jsx(de,{children:i("side_panel.custom_types_section.custom_type.no_fields_tooltip")})]}),t.jsxs(Y,{variant:"ghost",className:"flex h-8 w-full items-center justify-center p-2 text-xs",onClick:c,children:[t.jsx(Ke,{className:"mr-1 size-3.5 text-red-700"}),t.jsx("div",{className:"text-red-700",children:i("side_panel.custom_types_section.custom_type.delete_custom_type")})]})]})]})},Vo=I.forwardRef(({customType:e},n)=>{const{attributes:s,setNodeRef:a,transform:r,transition:o}=ht({id:e.id}),i={transform:Ue.Translate.toString(r),transition:o};return t.jsx(it,{value:e.id,className:"border-none",ref:n,children:t.jsxs("div",{className:"w-full rounded-md border-b",ref:a,style:i,...s,children:[t.jsx(lt,{className:"w-full rounded-md bg-slate-50 px-2 py-0 hover:bg-accent hover:no-underline data-[state=open]:rounded-b-none dark:bg-slate-900",asChild:!0,children:t.jsx(Rf,{customType:e})}),t.jsx(ct,{className:"border-x border-slate-100 p-1 pb-0 dark:border-slate-800",children:t.jsx(Af,{customType:e})})]})})});Vo.displayName="CustomTypeListItem";const Of=({customTypes:e})=>{const{updateCustomType:n}=Q(),{openCustomTypeFromSidebar:s,openedCustomTypeInSidebar:a}=ge(),r=I.useRef(null),o=l.useMemo(()=>e.reduce((p,u)=>(p[u.id]=I.createRef(),p),{}),[e]),i=l.useCallback(p=>{var u,g;return(g=(u=o[p])==null?void 0:u.current)==null?void 0:g.scrollIntoView({behavior:"smooth",block:"start"})},[o]),c=jn(yn(pt)),d=l.useCallback(p=>{const{active:u,over:g}=p;if((u==null?void 0:u.id)!==(g==null?void 0:g.id)&&g&&u){const x=e.findIndex(v=>v.id===u.id),m=e.findIndex(v=>v.id===g.id);mt(e,x,m).forEach((v,N)=>{n(v.id,{order:N})})}},[e,n]),f=l.useCallback(()=>{a&&r.current!==a&&(r.current=a,i(a))},[i,a]);return t.jsx(dn,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-1",value:a,onValueChange:s,onAnimationEnd:f,children:t.jsx(Cn,{sensors:c,collisionDetection:Nn,onDragEnd:d,children:t.jsx(_n,{items:e,strategy:Sn,children:e.sort((p,u)=>p.order&&u.order===void 0?-1:p.order===void 0&&u.order?1:p.order!==void 0&&u.order!==void 0?p.order-u.order:p.name.localeCompare(u.name)).map(p=>t.jsx(Vo,{customType:p,ref:o[p.id]},p.id))})})})},Lf=()=>{const{t:e}=J(),{customTypes:n,createCustomType:s,databaseType:a}=Q(),[r,o]=I.useState(""),i=I.useRef(null),c=a===U.POSTGRESQL,d=l.useMemo(()=>n.filter(u=>{var g;return!((g=r==null?void 0:r.trim)!=null&&g.call(r))||u.name.toLowerCase().includes(r.toLowerCase())}),[n,r]),f=l.useCallback(()=>{o("")},[]),p=l.useCallback(async()=>{await s()},[s]);return t.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2","data-vaul-no-drag":!0,children:[t.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[t.jsx("div",{className:"flex-1",children:t.jsx(re,{ref:i,type:"text",placeholder:e("side_panel.custom_types_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:r,onChange:u=>o(u.target.value)})}),c&&t.jsxs(Y,{variant:"secondary",size:"sm",className:"h-8 px-2",onClick:p,children:[t.jsx(et,{className:"mr-1 size-4"}),"New Type"]})]}),t.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:t.jsx(cn,{className:"h-full",children:n.length===0?t.jsx(Ht,{title:e("side_panel.custom_types_section.empty_state.title"),description:e("side_panel.custom_types_section.empty_state.description"),className:"mt-20"}):r&&d.length===0?t.jsxs("div",{className:"mt-10 flex flex-col items-center gap-2",children:[t.jsx("div",{className:"text-sm text-muted-foreground",children:e("side_panel.custom_types_section.no_results")}),t.jsxs(Y,{variant:"outline",size:"sm",onClick:f,className:"gap-1",children:[t.jsx(At,{className:"size-3.5"}),e("side_panel.custom_types_section.clear")]})]}):t.jsx(Of,{customTypes:d})})})]})},Pf=e=>!e||e.length===0?"":e.filter(n=>n.kind===Je.enum).map(n=>{const s=n.schema?`"${n.schema}"."${n.name.replace(/"/g,'\\"')}"`:`"${n.name.replace(/"/g,'\\"')}"`,a=(n.values||[]).map(r=>`    "${r.replace(/"/g,'\\"')}"`).join(`
`);return`Enum ${s} {
${a}
}
`}).join(`
`),$f=e=>{switch(e){case U.SQL_SERVER:return"mssql";case U.MYSQL:case U.MARIADB:return"mysql";case U.POSTGRESQL:case U.COCKROACHDB:case U.SQLITE:case U.ORACLE:return"postgres";default:return"postgres"}},zf=e=>{var a,r;const n=((a=e.tables)==null?void 0:a.map(o=>{const i={...o};return o.name==="relation"&&(i.fields=o.fields.map(c=>{const d={...c};return c.name==="from"?d.name="source":c.name==="to"&&(d.name="target"),d})),i}))||[],s=((r=e.relationships)==null?void 0:r.map(o=>{var p;const i=(p=e.tables)==null?void 0:p.find(u=>u.name==="relation");if(!i)return o;const c={...o},d=i.fields.find(u=>u.name==="from");if(d&&o.targetFieldId===d.id){const u=n.find(x=>x.name==="relation"),g=u==null?void 0:u.fields.find(x=>x.name==="source");g&&(c.targetFieldId=g.id)}const f=i.fields.find(u=>u.name==="to");if(f&&o.targetFieldId===f.id){const u=n.find(x=>x.name==="relation"),g=u==null?void 0:u.fields.find(x=>x.name==="target");g&&(c.targetFieldId=g.id)}return c}))||[];return{...e,tables:n,relationships:s}},Ff=e=>{let n=e;const s=new Set;let a=0;return n=n.replace(/ADD CONSTRAINT (\w+) FOREIGN KEY/g,(i,c)=>s.has(c)?`ADD CONSTRAINT ${c}_${++a} FOREIGN KEY`:(s.add(c),i)),n=n.split(`
`).map(i=>{const d=/ALTER\s+TABLE\s+(?:["[]?(\S+?)[\]"]?\.)?["[]?(\S+?)[\]"]?\s+ADD\s+CONSTRAINT\s+\S+\s+FOREIGN\s+KEY\s*\(["[]?([^)"]+)[\]"]?\)\s+REFERENCES\s+(?:["[]?\S+?[\]"]?\.)?"?[[]?\2[\]]?"?\s*\(["[]?([^)"]+)[\]"]?\)\s*;/i.exec(i);if(d){const f=d[3].trim(),p=d[4].trim();if(f===p)return`-- ${i}`}return i}).join(`
`),n=n.replace(/::regclass/g,""),n=n.replace(/: :regclass/g,""),n=n.replace(/CREATE\s+(?:UNIQUE\s+)?INDEX\s+\S+\s+ON\s+\S+\s*\(([^)]+)\)/gi,(i,c)=>{const d=c.split(",").map(p=>p.trim()),f=[...new Set(d)];return i.replace(c,f.join(", "))}),n=n.replace(/char\s+\(/g,"char("),n=n.replace(/character\s+\(/g,"character("),n=n.replace(/DEFAULT\s+([A-Z]{3})(?=\s|,|$)/g,"DEFAULT '$1'"),n=n.replace(/DEFAULT\s+([A-Z])(?=\s|,|$)/g,"DEFAULT '$1'"),n=n.replace(/DEFAULT\s+NOW(?=\s|,|$)/gi,"DEFAULT NOW()"),n=n.replace(/\?\?/g,"__"),n},Bf=e=>{const n=/Ref\s+"([^"]+)"\s*:\s*(?:"([^"]+)"\.)?"([^"]+)"\."([^"]+)"\s*([<>*])\s*(?:"([^"]+)"\.)?"([^"]+)"\."([^"]+)"/g,s=[];let a;for(;(a=n.exec(e))!==null;)s.push({refName:a[1],sourceSchema:a[2]||void 0,sourceTable:a[3],sourceField:a[4],direction:a[5],targetSchema:a[6]||void 0,targetTable:a[7],targetField:a[8]});const r={};let o=0;for(;o<e.length;){const m=/Table\s+(?:"([^"]+)"(?:\."([^"]+)")?|(\[?[^\s[]+\]?\.\[?[^\s\]]+\]?)|(\[?[^\s[{]+\]?))\s*{/g;m.lastIndex=o;const h=m.exec(e);if(!h)break;let v;h[1]&&h[2]?v=`${h[1]}.${h[2]}`:h[1]?v=h[1]:v=h[3]||h[4];const N=v.replace(/\[([^\]]+)\]/g,"$1"),b=h.index+h[0].length-1;let w=1;const y=b+1;let j=y;for(let C=y;C<e.length&&w>0;C++)e[C]==="{"?w++:e[C]==="}"&&(w--,w===0&&(j=C));if(w===0){const C=e.substring(y,j),S=e.substring(h.index,j+1);r[N]={start:h.index,end:j+1,content:C,fullMatch:S},o=j+1}else o=h.index+h[0].length}if(s.length===0||Object.keys(r).length===0)return e;const i=new Map(Object.entries(r)),c=new Map;s.forEach(m=>{let h,v,N,b;m.direction==="<"?(h=m.targetSchema?`${m.targetSchema}.${m.targetTable}`:m.targetTable,v=m.targetField,N=`ref: < ${m.sourceSchema?`"${m.sourceSchema}"."${m.sourceTable}"."${m.sourceField}"`:`"${m.sourceTable}"."${m.sourceField}"`}`,b=m.sourceTable):(h=m.sourceSchema?`${m.sourceSchema}.${m.sourceTable}`:m.sourceTable,v=m.sourceField,N=`ref: > ${m.targetSchema?`"${m.targetSchema}"."${m.targetTable}"."${m.targetField}"`:`"${m.targetTable}"."${m.targetField}"`}`,b=m.targetTable);const w=`${h}.${v}`,y=c.get(w)||{table:h,refs:[],relatedTables:[]};y.refs.push(N),y.relatedTables.push(b),c.set(w,y)}),c.forEach((m,h)=>{const v=h.lastIndexOf("."),N=h.substring(0,v),b=h.substring(v+1),w=i.get(N);if(w){const y=new RegExp(`^([ 	]*"${b}"[^\\n]*?)(?:\\s*(\\[[^\\]]*\\]))*\\s*(//.*)?$`,"gm");let j=w.content;j=j.replace(y,(C,S,M,k)=>{var H;const L=[];if(M){const W=/\[([^\]]*)\]/g;let z;for(;(z=W.exec(C))!==null;){const O=z[1].trim();O&&L.push(O)}}L.push(...m.refs);const E=L.join(", "),T=((H=S.match(/^(\s*)/))==null?void 0:H[1])||"",_=S.trim();return`${T}${_} [${E}]${k||""}`}),j!==w.content&&(w.content=j,i.set(N,w))}});let d="",f=0;const p=Object.entries(r).sort(([,m],[,h])=>m.start-h.start);for(const[,m]of p){d+=e.substring(f,m.start);const h=m.fullMatch;let v=m.content;const N=v.split(`
`),b=[];for(let j=0;j<N.length;j++){const C=N[j],S=C.trimEnd();S===""&&j===N.length-1||S===""&&j<N.length-1&&N[j+1].trim().startsWith("}")||b.push(C)}v=b.join(`
`),v.endsWith(`
`)||(v=v+`
`);const y=`${h.substring(0,h.indexOf("{")+1)}${v}}`;d+=y,f=m.end}return d+=e.substring(f),d.split(`
`).filter(m=>!m.trim().startsWith("Ref ")).join(`
`).trim().replace(/\n\s*\n\s*\n/g,`

`).replace(/}\n(?=Table)/g,`}

`)},En=e=>new Set(["YES","NO","TRUE","FALSE","NULL"]).has(e.toUpperCase()),va=e=>new Set(["CASE","ORDER","GROUP","FROM","TO","USER"]).has(e.toUpperCase()),Vf=e=>{if(!e.relationships)return e;const n=new Set,s=e.relationships.filter(a=>{const r=`${a.sourceTableId}-${a.sourceFieldId}->${a.targetTableId}-${a.targetFieldId}`;return n.has(r)?!1:(n.add(r),!0)});return{...e,relationships:s}},Kf=(e,n,s,a)=>{let r=e;return n.forEach((o,i)=>{var p;const c=o.replace(/'/g,"\\'"),d=(p=a.tables)==null?void 0:p.find(u=>u.name===i),f=d!=null&&d.schema?`"${d.schema}"."${i}"`:`"${i}"`;r+=`
COMMENT ON TABLE ${f} IS 'Original name was "${c}" (renamed due to SQL keyword conflict).';`}),s.forEach(({table:o,originalName:i,newName:c})=>{var u;const d=i.replace(/'/g,"\\'"),f=(u=a.tables)==null?void 0:u.find(g=>g.name===o),p=f!=null&&f.schema?`"${f.schema}"."${o}"`:`"${o}"`;r+=`
COMMENT ON COLUMN ${p}."${c}" IS 'Original name was "${d}" (renamed due to SQL keyword conflict).';`}),r},wa=e=>e.replace(/"char "/g,'"char"').replace(/char \(([0-9]+)\)/g,"char($1)").replace(/"char \(([0-9]+)\)"/g,'"char($1)"').replace(/"character \(([0-9]+)\)"/g,'"character($1)"').replace(/character \(([0-9]+)\)/g,"character($1)"),Hf=e=>e.replace(/Table\s+\[([^\]]+)\]\.\[([^\]]+)\]/g,'Table "$1"."$2"'),Gf=(e,n)=>{if(!n||n.length===0)return e;const s=new Map;n.forEach((r,o)=>{const i=s.get(r.name)||[];i.push({table:r,index:o}),s.set(r.name,i)});let a=e;return s.forEach((r,o)=>{if(r.length===1){const i=r[0].table;if(i.schema){const c=new RegExp(`Table\\s+"${i.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}"\\s*{`,"g"),d=`Table "${i.schema}"."${i.name}" {`;a=a.replace(c,d);const f=i.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),p=new RegExp(`(Ref\\s+"[^"]+")\\s*:\\s*"${f}"\\."([^"]+)"`,"g");a=a.replace(p,`$1:"${i.schema}"."${i.name}"."$2"`);const u=new RegExp(`([<>])\\s*"${f}"\\."([^"]+)"`,"g");a=a.replace(u,`$1 "${i.schema}"."${i.name}"."$2"`)}}else{const i=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),c=r.filter(({table:p})=>{const u=new RegExp(`Table\\s+"${p.schema}"\\.\\s*"${i}"\\s*{`,"g");return!a.match(u)}),d=new RegExp(`Table\\s+"${i}"\\s*{`,"g");let f=0;a=a.replace(d,p=>{if(f>=c.length)return p;const u=c[f];return f++,u&&u.table.schema?`Table "${u.table.schema}"."${o}" {`:p})}}),a};function Uf(e){var v,N,b,w;const n=((v=e.tables)==null?void 0:v.map(y=>{const j=y.fields.filter(C=>C.name!=="");return{...y,fields:j}}))??[],s=new Set,a=n.filter(y=>{const j=y.schema?`${y.schema}.${y.name}`:y.name;return s.has(j)?!1:(s.add(j),!0)}),r={...e,tables:a,relationships:((N=e.relationships)==null?void 0:N.filter(y=>{const j=a.find(k=>k.id===y.sourceTableId),C=a.find(k=>k.id===y.targetTableId),S=j==null?void 0:j.fields.some(k=>k.id===y.sourceFieldId),M=C==null?void 0:C.fields.some(k=>k.id===y.targetFieldId);return j&&C&&S&&M}))??[]},o=zf(r),i=e.databaseType===U.POSTGRESQL||e.databaseType===U.SQLITE,c=new Map,d=[],f=y=>{const j=y.name;let C=j;if(/[^\w]/.test(j)&&(C=`"${j.replace(/"/g,'\\"')}"`),i&&(En(j)||va(j))){const k=`${j}_table`;c.set(k,j),C=/[^\w]/.test(k)?`"${k.replace(/"/g,'\\"')}"`:k}else!i&&En(j)&&(C=`"${j.replace(/"/g,'\\"')}"`);const S=new Map,M=y.fields.map(k=>{let L=k.name;/[^\w]/.test(k.name)&&(L=`"${k.name.replace(/"/g,'\\"')}"`);const E=S.get(k.name)||0;if(E>0){const _=`${k.name}_${E+1}`;L=/[^\w]/.test(_)?`"${_.replace(/"/g,'\\"')}"`:_}S.set(k.name,E+1);const T={...k,name:L};if(i&&(En(k.name)||va(k.name))){const _=`${k.name}_field`;d.push({table:C,originalName:k.name,newName:_}),T.name=/[^\w]/.test(_)?`"${_.replace(/"/g,'\\"')}"`:_}else!i&&En(k.name)&&(T.name=`"${k.name.replace(/"/g,'\\"')}"`);return T});return{...y,name:C,fields:M,indexes:(y.indexes||[]).map(k=>({...k,name:k.name?/[^\w]/.test(k.name)?`"${k.name.replace(/"/g,'\\"')}"`:k.name:`idx_${Math.random().toString(36).substring(2,8)}`}))}},p=Vf({...o,tables:((b=o.tables)==null?void 0:b.map(f))??[],relationships:((w=o.relationships)==null?void 0:w.map((y,j)=>{const C=y.name?y.name.replace(/[^\w]/g,"_"):Math.random().toString(36).substring(2,8);return{...y,name:`fk_${j}_${C}`}}))??[]});let u="",g="",x="";const m=Pf(p.customTypes);let h;try{x=Il({diagram:p,targetDatabaseType:e.databaseType,isDBMLFlow:!0}),x=Ff(x),i&&(c.size>0||d.length>0)&&(x=Kf(x,c,d,p)),u=wa(Hf(kl.importer.import(x,$f(e.databaseType)))),u=Gf(u,a),m&&(u=m+`

`+u),g=wa(Bf(u)),u=u.replace(/\n\s*\n\s*\n/g,`

`),g=g.replace(/\n\s*\n\s*\n/g,`

`),u.endsWith(`
`)||(u+=`
`),g.endsWith(`
`)||(g+=`
`)}catch(y){console.error("Error during DBML generation process:",y,"Input SQL was:",x),h=y instanceof Error?y.message:"Unknown error";const j=`// Error generating DBML: ${h}`;u=j,g=j,u.startsWith("// Error generating DBML:")&&m&&(u=m+`

`+u),g.startsWith("// Error generating DBML:")&&m&&(g=m+`

`+g)}return{standardDbml:u,inlineDbml:g,error:h}}const gt=({type:e,schema:n,otherSchema:s,parentName:a,otherParentName:r,name:o,otherName:i})=>`${e}-${n?`${n}.`:""}${s?`${s}.`:""}${a?`${a}.`:""}${r?`${r}.`:""}${o}${i?`.${i}`:""}`,Zt=e=>gt({type:"table",schema:e.schema,name:e.name}),Wf=(e,n)=>gt({type:"field",schema:e.schema,parentName:e.name,name:n.name}),qf=(e,n)=>gt({type:"index",schema:e.schema,parentName:e.name,name:n.name}),Xf=(e,n)=>{const s=n[e.sourceTableId],a=n[e.targetTableId],r=n[e.sourceFieldId],o=n[e.targetFieldId];return!s||!a||!r||!o?null:gt({type:"relationship",schema:s.schema,otherSchema:a.schema,parentName:s.name,otherParentName:a.name,name:r.name,otherName:o.name})},Ko=e=>gt({type:"customType",schema:e.schema,name:e.name}),Yf=(e,n)=>{const s=n[e.dependentTableId],a=n[e.tableId];return!s||!a?null:gt({type:"dependency",schema:s.schema,otherSchema:a.schema,name:s.name,otherName:a.name})},Qf=e=>gt({type:"area",name:e.name}),Zf=e=>{var a,r,o,i,c;const n={},s={};return(a=e.tables)==null||a.forEach(d=>{var p,u;const f=Zt(d);n[f]=d.id,s[d.id]={schema:d.schema,name:d.name,color:d.color},(p=d.fields)==null||p.forEach(g=>{const x=Wf(d,g);n[x]=g.id,s[g.id]={schema:d.schema,name:g.name}}),(u=d.indexes)==null||u.forEach(g=>{const x=qf(d,g);n[x]=g.id})}),(r=e.relationships)==null||r.forEach(d=>{const f=Xf(d,s);f&&(n[f]=d.id)}),(o=e.customTypes)==null||o.forEach(d=>{const f=Ko(d);n[f]=d.id}),(i=e.dependencies)==null||i.forEach(d=>{const f=Yf(d,s);f&&(n[f]=d.id)}),(c=e.areas)==null||c.forEach(d=>{const f=Qf(d);n[f]=d.id}),{objectKeysToIdsMap:n,sourceIdToDataMap:s}},Jf=({targetTables:e,sourceTables:n,defaultDatabaseSchema:s})=>{if(!e)return{tables:[],idMappings:{tables:{},fields:{}}};if(!n)return{tables:e,idMappings:{tables:{},fields:{}}};const a={tables:{},fields:{}},r=new Map;return n.forEach(i=>{const c=Zt(i);r.set(c,i)}),{tables:e.map(i=>{var h,v,N,b,w;const c=Zt(i);let d=r.get(c);if(!d&&i.schema){const y=Zt({...i,schema:void 0});d=r.get(y)}if(!d&&s)if(i.schema)i.schema;else{const y=Zt({...i,schema:s});d=r.get(y)}if(!d)return i;const f=d.id;a.tables[i.id]=f;const p=new Map;(h=d.fields)==null||h.forEach(y=>{p.set(y.name,y)});const u=(v=i.fields)==null?void 0:v.map(y=>{const j=p.get(y.name);return j?(a.fields[y.id]=j.id,{...y,id:j.id,createdAt:j.createdAt}):y}),g=new Map;(N=d.indexes)==null||N.forEach(y=>{g.set(y.name,y)});const x=(b=i.indexes)==null?void 0:b.map(y=>{const j=g.get(y.name);return j?{...y,id:j.id,createdAt:j.createdAt}:y}),m={...d,fields:u,indexes:x,comments:i.comments};return i.fields&&(m.fields=(w=m.fields)==null?void 0:w.map(y=>{var C;const j=(C=i.fields)==null?void 0:C.find(S=>S.name===y.name);return j?{...y,nullable:j.nullable,unique:j.unique,primaryKey:j.primaryKey,type:j.type}:y})),m}),idMappings:a}},ep=(e,n)=>e?e.map(s=>{const a=Ko(s),r=n[a];return r?{...s,id:r}:s}):[],tp=(e,n,s)=>{if(!e||e.length===0)return[];if(!n||n.length===0)return e.map(o=>{let i=o.sourceTableId,c=o.targetTableId,d=o.sourceFieldId,f=o.targetFieldId;for(const[p,u]of Object.entries(s.tables))p===o.sourceTableId&&(i=u),p===o.targetTableId&&(c=u);for(const[p,u]of Object.entries(s.fields))p===o.sourceFieldId&&(d=u),p===o.targetFieldId&&(f=u);return{...o,sourceTableId:i,targetTableId:c,sourceFieldId:d,targetFieldId:f}});const a=[],r=new Set;return n.forEach(o=>{const i=e.find(c=>{const d=s.tables[c.sourceTableId],f=s.tables[c.targetTableId],p=s.fields[c.sourceFieldId],u=s.fields[c.targetFieldId],g=o.sourceTableId===d&&o.targetTableId===f&&o.sourceFieldId===p&&o.targetFieldId===u,x=o.sourceTableId===f&&o.targetTableId===d&&o.sourceFieldId===u&&o.targetFieldId===p;return g||x});if(i){r.add(i.id);const c={...o,sourceCardinality:i.sourceCardinality,targetCardinality:i.targetCardinality};o.sourceSchema||delete c.sourceSchema,o.targetSchema||delete c.targetSchema,a.push(c)}}),e.forEach(o=>{if(!r.has(o.id)){let i=o.sourceTableId,c=o.targetTableId,d=o.sourceFieldId,f=o.targetFieldId;for(const[p,u]of Object.entries(s.tables))p===o.sourceTableId&&(i=u),p===o.targetTableId&&(c=u);for(const[p,u]of Object.entries(s.fields))p===o.sourceFieldId&&(d=u),p===o.targetFieldId&&(f=u);a.push({...o,sourceTableId:i,targetTableId:c,sourceFieldId:d,targetFieldId:f})}}),a},np=(e,n,s)=>e?n?e.map(a=>{const r=n.find(o=>{const i=s.tables[a.tableId],c=s.tables[a.dependentTableId];return o.tableId===i&&o.dependentTableId===c});return r?{...a,id:r.id,tableId:s.tables[a.tableId]||a.tableId,dependentTableId:s.tables[a.dependentTableId]||a.dependentTableId}:{...a,tableId:s.tables[a.tableId]||a.tableId,dependentTableId:s.tables[a.dependentTableId]||a.dependentTableId}}):e:[],sp=(e,n)=>e?e.map(s=>{var a;return{...s,indexes:(a=s.indexes)==null?void 0:a.map(r=>({...r,fieldIds:r.fieldIds.map(o=>n.fields[o]||o)}))}}):[],ap=({sourceDiagram:e,targetDiagram:n})=>{var g;const{objectKeysToIdsMap:s}=Zf(e),{tables:a,idMappings:r}=Jf({targetTables:n.tables,sourceTables:e.tables,defaultDatabaseSchema:dt[e.databaseType]}),o=ep(n.customTypes,s),i=[...((g=e.customTypes)==null?void 0:g.filter(x=>x.kind===Je.composite))??[],...o],c=tp(n.relationships,e.relationships,r),d=np(n.dependencies,e.dependencies,r),f=sp(a,r),p=[...c].sort((x,m)=>{var w,y,j,C;const h=(w=e.relationships)==null?void 0:w.find(S=>S.id===x.id),v=(y=e.relationships)==null?void 0:y.find(S=>S.id===m.id);if(!h||!v)return 0;const N=((j=e.relationships)==null?void 0:j.indexOf(h))??0,b=((C=e.relationships)==null?void 0:C.indexOf(v))??0;return N-b});return{...e,tables:f.sort((x,m)=>(x.order??0)-(m.order??0)),areas:n.areas,relationships:p,dependencies:d,customTypes:i}},rp=e=>e==="dark"?"dbml-dark":"dbml-light",op=()=>{const{currentDiagram:e,updateDiagramData:n,databaseType:s}=Q(),{effectiveTheme:a}=Hn(),{toast:r}=pl(),[o,i]=l.useState("inline"),[c,d]=l.useState(!0),[f,p]=l.useState(""),[u,g]=l.useState(""),x=l.useRef(!0),[m,h]=l.useState(!1),v=l.useRef(),N=l.useRef(),b=l.useCallback(B=>{v.current=B,N.current=B.createDecorationsCollection(),te.current&&te.current.dispose();const R=B.onDidAttemptReadOnlyEdit(()=>{se.current&&clearTimeout(se.current),h(!1),requestAnimationFrame(()=>{h(!0),se.current=setTimeout(()=>{h(!1)},600)})});te.current=R},[]),w=l.useMemo(()=>o==="inline"?u:f,[o,u,f]),y=l.useCallback(()=>{i(B=>B==="inline"?"standard":"inline")},[]),[j,C]=l.useState(!1),[S,M]=l.useState(""),k=l.useRef(S),{calculateDiff:L,originalDiagram:E,resetDiff:T,hasDiff:_,newDiagram:H}=ml(),{loadDiagramFromData:W}=Q(),[z,O]=l.useState(),[A,F]=l.useState(),{t:he}=J(),{hideLoader:ye,showLoader:ee}=Ml(),se=l.useRef(),te=l.useRef();l.useEffect(()=>{var K;if(j)return;let B=!1;const R=new Set;if((K=e.tables)==null||K.forEach(P=>{P.fields.forEach(ae=>{ae.name===""&&(B=!0,R.add(P.name))})}),B){const P=Array.from(R).join(", ");F(`Some fields had empty names in tables: [${P}] and were excluded from the DBML export.`)}},[e.tables,he,j]),l.useEffect(()=>{if(j){d(!1);return}O(void 0),aa(N.current);const B=async()=>{d(!0);const R=Uf(e);R.error&&r({title:"DBML Export Error",description:`Could not generate DBML: ${R.error.substring(0,100)}${R.error.length>100?"...":""}`,variant:"destructive"}),p(R.standardDbml),g(R.inlineDbml),d(!1)};setTimeout(()=>B(),0)},[e,r,j]),l.useEffect(()=>{!c&&w&&!j&&(M(w),k.current=w)},[w,c,j]);const je=l.useCallback(async B=>{var R;aa(N.current),O(void 0);try{const K=await Rl(B,{databaseType:s}),P=E??e,ae={...P,tables:K.tables,relationships:K.relationships,customTypes:K.customTypes},Z=ap({sourceDiagram:P,targetDiagram:ae});E&&(T(),W(E)),L({diagram:P,newDiagram:Z,options:{summaryOnly:!0}})}catch(K){const P=Dl(K);P&&(El({error:P,model:(R=v.current)==null?void 0:R.getModel(),editorDecorationsCollection:N.current}),O(he("import_dbml_dialog.error.description")+` (1 error found - in line ${P.line})`))}},[he,E,e,T,W,L,s]),ne=Da(je,1e3);l.useEffect(()=>{!j||!S||S!==k.current&&(k.current=S,ne(S))},[S,j,ne]);const $=l.useCallback(async()=>{S&&H&&(ee(),await n(H,{forceUpdateStorage:!0}),T(),M(S),C(!1),k.current=S,ye())},[S,n,H,T,ee,ye]),V=l.useCallback(()=>{S&&E&&(W(E),C(!1),T(),M(w),k.current=w)},[S,W,E,T,w]);return l.useEffect(()=>(x.current=!0,()=>{x.current=!1,se.current&&clearTimeout(se.current),te.current&&(te.current.dispose(),te.current=void 0)}),[]),l.useEffect(()=>{const B=V;return()=>{setTimeout(()=>{x.current||B()},0)}},[V]),t.jsxs(t.Fragment,{children:[t.jsx(Tl,{code:S,loading:c,actionsTooltipSide:"right",className:"my-0.5",allowCopy:!j,actions:j&&_?[{label:"Accept Changes",icon:Tt,onClick:$,className:"h-7 items-center gap-1.5 rounded-md border border-green-200 bg-green-50 px-2.5 py-1.5 text-xs font-medium text-green-600 shadow-sm hover:bg-green-100 dark:border-green-800 dark:bg-green-800 dark:text-green-200 dark:hover:bg-green-700"},{label:"Undo Changes",icon:Ic,onClick:V,className:"h-7 items-center gap-1.5 rounded-md border border-red-200 bg-red-50 px-2.5 py-1.5 text-xs font-medium text-red-600 shadow-sm hover:bg-red-100 dark:border-red-800 dark:bg-red-800 dark:text-red-200 dark:hover:bg-red-700"}]:j&&!_?[{label:"View",icon:wc,onClick:()=>C(B=>!B)}]:[{label:`Show ${o==="inline"?"Standard":"Inline"} Refs`,icon:Zl,onClick:y},{label:"Edit",icon:pn,onClick:()=>C(B=>!B),className:m?"dbml-edit-button-emphasis":void 0}],editorProps:{height:"100%",defaultLanguage:"dbml",beforeMount:Al,theme:rp(a),onMount:b,options:{wordWrap:"off",mouseWheelZoom:!1,readOnly:!j},onChange:B=>{M(B??"")}}}),A?t.jsx("div",{className:"my-2 rounded-md border border-blue-200 bg-blue-50 p-3 dark:border-blue-900/50 dark:bg-blue-950/20",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(ra,{className:"mt-0.5 size-4 shrink-0 text-blue-600 dark:text-blue-400"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Warning"}),t.jsx("p",{className:"mt-0.5 text-xs text-blue-700 dark:text-blue-300",children:A})]}),t.jsx("button",{onClick:()=>F(void 0),className:"rounded p-0.5 text-blue-600 hover:bg-blue-100 dark:text-blue-400 dark:hover:bg-blue-900/50","aria-label":"Close warning",children:t.jsx(At,{className:"size-3.5"})})]})}):null,z?t.jsx("div",{className:"my-2 rounded-md border border-orange-200 bg-orange-50 p-3 dark:border-orange-900/50 dark:bg-orange-950/20",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx(ra,{className:"mt-0.5 size-4 shrink-0 text-orange-600 dark:text-orange-400"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-orange-800 dark:text-orange-200",children:"Syntax Error"}),t.jsx("p",{className:"mt-0.5 text-xs text-orange-700 dark:text-orange-300",children:z||he("import_dbml_dialog.error.description")})]})]})}):null]})},ip=()=>t.jsx("section",{className:"flex flex-1 flex-col overflow-hidden px-2","data-vaul-no-drag":!0,children:t.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:t.jsx(op,{})})}),bm=()=>{const{t:e}=J(),{databaseType:n}=Q(),{selectSidebarSection:s,selectedSidebarSection:a}=ge(),{isMd:r}=Et("md");return t.jsxs("aside",{className:"flex h-full flex-col overflow-hidden",children:[r?null:t.jsx("div",{className:"flex justify-center border-b pt-0.5",children:t.jsxs(xn,{value:a,onValueChange:o=>s(o),children:[t.jsxs(Lt,{className:"rounded-none border-none font-semibold shadow-none hover:bg-secondary hover:underline focus:border-transparent focus:ring-0",children:[t.jsx(gn,{}),t.jsx("div",{className:"flex flex-1 justify-end px-2 text-xs font-normal text-muted-foreground",children:e("side_panel.view_all_options")})]}),t.jsx(Pt,{children:t.jsxs(sn,{children:[t.jsx(pe,{value:"tables",children:e("side_panel.tables_section.tables")}),t.jsx(pe,{value:"relationships",children:e("side_panel.relationships_section.relationships")}),t.jsx(pe,{value:"dependencies",children:e("side_panel.dependencies_section.dependencies")}),t.jsx(pe,{value:"areas",children:e("side_panel.areas_section.areas")}),n===U.POSTGRESQL?t.jsx(pe,{value:"customTypes",children:e("side_panel.custom_types_section.custom_types")}):null]})})]})}),a==="tables"?t.jsx(vf,{}):a==="dbml"?t.jsx(ip,{}):a==="relationships"?t.jsx(Nf,{}):a==="dependencies"?t.jsx(If,{}):a==="areas"?t.jsx(Mf,{}):t.jsx(Lf,{})]})},os=768;function lp(){const[e,n]=l.useState(void 0);return l.useEffect(()=>{const s=window.matchMedia(`(max-width: ${os-1}px)`),a=()=>{n(window.innerWidth<os)};return s.addEventListener("change",a),n(window.innerWidth<os),()=>s.removeEventListener("change",a)},[]),!!e}const cp=Ol,dp=Ll,Ho=l.forwardRef(({className:e,...n},s)=>t.jsx(Pa,{className:D("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...n,ref:s}));Ho.displayName=Pa.displayName;const up=tr("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Go=l.forwardRef(({side:e="right",className:n,children:s,...a},r)=>t.jsxs(dp,{children:[t.jsx(Ho,{}),t.jsxs(Aa,{ref:r,className:D(up({side:e}),n),...a,children:[t.jsxs(Pl,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[t.jsx(hl,{className:"size-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]}),s]})]}));Go.displayName=Aa.displayName;const Uo=({className:e,...n})=>t.jsx("div",{className:D("flex flex-col space-y-2 text-center sm:text-left",e),...n});Uo.displayName="SheetHeader";const Wo=l.forwardRef(({className:e,...n},s)=>t.jsx(Oa,{ref:s,className:D("text-lg font-semibold text-foreground",e),...n}));Wo.displayName=Oa.displayName;const qo=l.forwardRef(({className:e,...n},s)=>t.jsx(La,{ref:s,className:D("text-sm text-muted-foreground",e),...n}));qo.displayName=La.displayName;const Qn=()=>{const e=I.useContext(Xo);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e},fp="sidebar_state",pp=60*60*24*7,mp="16rem",hp="18rem",xp="3rem",gp="4rem",bp="b",Xo=l.createContext(null),vp=l.forwardRef(({defaultOpen:e=!0,open:n,onOpenChange:s,className:a,style:r,children:o,...i},c)=>{const d=lp(),[f,p]=l.useState(!1),[u,g]=l.useState(e),x=n??u,m=l.useCallback(b=>{const w=typeof b=="function"?b(x):b;s?s(w):g(w),document.cookie=`${fp}=${w}; path=/; max-age=${pp}`},[s,x]),h=l.useCallback(()=>d?p(b=>!b):m(b=>!b),[d,m,p]);l.useEffect(()=>{const b=w=>{w.key===bp&&(w.metaKey||w.ctrlKey)&&(w.preventDefault(),h())};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[h]);const v=x?"expanded":"collapsed",N=l.useMemo(()=>({state:v,open:x,setOpen:m,isMobile:d,openMobile:f,setOpenMobile:p,toggleSidebar:h}),[v,x,m,d,f,p,h]);return t.jsx(Xo.Provider,{value:N,children:t.jsx(Bi,{delayDuration:0,children:t.jsx("div",{style:{"--sidebar-width":mp,"--sidebar-width-icon":xp,"--sidebar-width-icon-extended":gp,...r},className:D("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",a),ref:c,...i,children:o})})})});vp.displayName="SidebarProvider";const Yo=l.forwardRef(({side:e="left",variant:n="sidebar",collapsible:s="offcanvas",className:a,children:r,...o},i)=>{const{isMobile:c,state:d,openMobile:f,setOpenMobile:p}=Qn();return s==="none"?t.jsx("div",{className:D("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",a),ref:i,...o,children:r}):c?t.jsx(cp,{open:f,onOpenChange:p,...o,children:t.jsxs(Go,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":hp},side:e,children:[t.jsxs(Uo,{className:"sr-only",children:[t.jsx(Wo,{children:"Sidebar"}),t.jsx(qo,{children:"Displays the mobile sidebar."})]}),t.jsx("div",{className:"flex size-full flex-col",children:r})]})}):t.jsxs("div",{ref:i,className:"group peer hidden text-sidebar-foreground md:block","data-state":d,"data-collapsible":d==="collapsed"?s:"","data-variant":n,"data-side":e,children:[t.jsx("div",{className:D("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",n==="floating"||n==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))] group-data-[collapsible=icon-extended]:w-[calc(var(--sidebar-width-icon-extended)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[collapsible=icon-extended]:w-[--sidebar-width-icon-extended]")}),t.jsx("div",{className:D("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",n==="floating"||n==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)] group-data-[collapsible=icon-extended]:w-[calc(var(--sidebar-width-icon-extended)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[collapsible=icon-extended]:w-[--sidebar-width-icon-extended] group-data-[side=left]:border-r group-data-[side=right]:border-l",a),...o,children:t.jsx("div",{"data-sidebar":"sidebar",className:"flex size-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:r})})]})});Yo.displayName="Sidebar";const wp=l.forwardRef(({className:e,onClick:n,...s},a)=>{const{toggleSidebar:r}=Qn();return t.jsxs(Y,{ref:a,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:D("h-7 w-7",e),onClick:o=>{n==null||n(o),r()},...s,children:[t.jsx(xl,{}),t.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});wp.displayName="SidebarTrigger";const yp=l.forwardRef(({className:e,...n},s)=>{const{toggleSidebar:a}=Qn();return t.jsx("button",{ref:s,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:a,title:"Toggle Sidebar",className:D("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...n})});yp.displayName="SidebarRail";const jp=l.forwardRef(({className:e,...n},s)=>t.jsx("main",{ref:s,className:D("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...n}));jp.displayName="SidebarInset";const Np=l.forwardRef(({className:e,...n},s)=>t.jsx(re,{ref:s,"data-sidebar":"input",className:D("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...n}));Np.displayName="SidebarInput";const Qo=l.forwardRef(({className:e,...n},s)=>t.jsx("div",{ref:s,"data-sidebar":"header",className:D("flex flex-col gap-2 p-2",e),...n}));Qo.displayName="SidebarHeader";const Zo=l.forwardRef(({className:e,...n},s)=>t.jsx("div",{ref:s,"data-sidebar":"footer",className:D("flex flex-col gap-2 p-2",e),...n}));Zo.displayName="SidebarFooter";const Cp=l.forwardRef(({className:e,...n},s)=>t.jsx(ut,{ref:s,"data-sidebar":"separator",className:D("mx-2 w-auto bg-sidebar-border",e),...n}));Cp.displayName="SidebarSeparator";const Jo=l.forwardRef(({className:e,...n},s)=>t.jsx("div",{ref:s,"data-sidebar":"content",className:D("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden group-data-[collapsible=icon-extended]:overflow-hidden",e),...n}));Jo.displayName="SidebarContent";const ei=l.forwardRef(({className:e,...n},s)=>t.jsx("div",{ref:s,"data-sidebar":"group",className:D("relative flex w-full min-w-0 flex-col p-2",e),...n}));ei.displayName="SidebarGroup";const Sp=l.forwardRef(({className:e,asChild:n=!1,...s},a)=>{const r=n?on:"div";return t.jsx(r,{ref:a,"data-sidebar":"group-label",className:D("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0","group-data-[collapsible=icon-extended]:-mt-8 group-data-[collapsible=icon-extended]:opacity-0",e),...s})});Sp.displayName="SidebarGroupLabel";const _p=l.forwardRef(({className:e,asChild:n=!1,...s},a)=>{const r=n?on:"button";return t.jsx(r,{ref:a,"data-sidebar":"group-action",className:D("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden group-data-[collapsible=icon-extended]:hidden",e),...s})});_p.displayName="SidebarGroupAction";const ti=l.forwardRef(({className:e,...n},s)=>t.jsx("div",{ref:s,"data-sidebar":"group-content",className:D("w-full text-sm",e),...n}));ti.displayName="SidebarGroupContent";const An=l.forwardRef(({className:e,...n},s)=>t.jsx("ul",{ref:s,"data-sidebar":"menu",className:D("flex w-full min-w-0 flex-col gap-1",e),...n}));An.displayName="SidebarMenu";const On=l.forwardRef(({className:e,...n},s)=>t.jsx("li",{ref:s,"data-sidebar":"menu-item",className:D("group/menu-item relative",e),...n}));On.displayName="SidebarMenuItem";const Ip=tr("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon-extended]:h-auto group-data-[collapsible=icon-extended]:flex-col group-data-[collapsible=icon-extended]:gap-1 group-data-[collapsible=icon-extended]:p-2 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate group-data-[collapsible=icon-extended]:[&>span]:w-full group-data-[collapsible=icon-extended]:[&>span]:text-center group-data-[collapsible=icon-extended]:[&>span]:text-[10px] group-data-[collapsible=icon-extended]:[&>span]:leading-tight [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Ln=l.forwardRef(({asChild:e=!1,isActive:n=!1,variant:s="default",size:a="default",tooltip:r,className:o,...i},c)=>{const d=e?on:"button",{isMobile:f,state:p}=Qn(),u=t.jsx(d,{ref:c,"data-sidebar":"menu-button","data-size":a,"data-active":n,className:D(Ip({variant:s,size:a}),o),...i});return r?(typeof r=="string"&&(r={children:r}),t.jsxs(le,{children:[t.jsx(ce,{asChild:!0,children:u}),t.jsx(de,{side:"right",align:"center",hidden:p!=="collapsed"||f,...r})]})):u});Ln.displayName="SidebarMenuButton";const kp=l.forwardRef(({className:e,asChild:n=!1,showOnHover:s=!1,...a},r)=>{const o=n?on:"button";return t.jsx(o,{ref:r,"data-sidebar":"menu-action",className:D("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden group-data-[collapsible=icon-extended]:hidden",s&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...a})});kp.displayName="SidebarMenuAction";const Mp=l.forwardRef(({className:e,...n},s)=>t.jsx("div",{ref:s,"data-sidebar":"menu-badge",className:D("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...n}));Mp.displayName="SidebarMenuBadge";const Rp=l.forwardRef(({className:e,showIcon:n=!1,...s},a)=>{const r=l.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return t.jsxs("div",{ref:a,"data-sidebar":"menu-skeleton",className:D("flex h-8 items-center gap-2 rounded-md px-2",e),...s,children:[n&&t.jsx(oa,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),t.jsx(oa,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":r}})]})});Rp.displayName="SidebarMenuSkeleton";const Dp=l.forwardRef(({className:e,...n},s)=>t.jsx("ul",{ref:s,"data-sidebar":"menu-sub",className:D("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...n}));Dp.displayName="SidebarMenuSub";const Ep=l.forwardRef(({...e},n)=>t.jsx("li",{ref:n,...e}));Ep.displayName="SidebarMenuSubItem";const Tp=l.forwardRef(({asChild:e=!1,size:n="md",isActive:s,className:a,...r},o)=>{const i=e?on:"a";return t.jsx(i,{ref:o,"data-sidebar":"menu-sub-button","data-size":n,"data-active":s,className:D("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",n==="sm"&&"text-xs",n==="md"&&"text-sm","group-data-[collapsible=icon]:hidden group-data-[collapsible=icon-extended]:hidden",a),...r})});Tp.displayName="SidebarMenuSubButton";const vm=()=>{const{selectSidebarSection:e,selectedSidebarSection:n,showSidePanel:s}=ge(),{t:a}=J(),{isMd:r}=Et("md"),{effectiveTheme:o}=Hn(),{dependencies:i,databaseType:c}=Q(),{openCreateDiagramDialog:d,openOpenDiagramDialog:f}=Rt(),p=l.useMemo(()=>[{title:a("editor_sidebar.new_diagram"),icon:et,onClick:()=>{d()},active:!1},{title:a("editor_sidebar.browse"),icon:pc,onClick:()=>{f()},active:!1}],[a,d,f]),u=l.useMemo(()=>[{title:a("editor_sidebar.tables"),icon:ka,onClick:()=>{s(),e("tables")},active:n==="tables"},{title:"DBML",icon:oc,onClick:()=>{s(),e("dbml")},active:n==="dbml"},{title:a("editor_sidebar.relationships"),icon:Ja,onClick:()=>{s(),e("relationships")},active:n==="relationships"},{title:a("editor_sidebar.areas"),icon:Ms,onClick:()=>{s(),e("areas")},active:n==="areas"},...i&&i.length>0?[{title:a("editor_sidebar.dependencies"),icon:Sc,onClick:()=>{s(),e("dependencies")},active:n==="dependencies"}]:[],...c===U.POSTGRESQL?[{title:a("editor_sidebar.custom_types"),icon:uc,onClick:()=>{s(),e("customTypes")},active:n==="customTypes"}]:[]],[e,n,a,s,i,c]),g=l.useMemo(()=>[{title:"Discord",icon:gl,onClick:()=>window.open("https://discord.gg/QeFwyWSKwC","_blank"),active:!1},{title:"Twitter",icon:bl,onClick:()=>window.open("https://x.com/intent/follow?screen_name=jonathanfishner","_blank"),active:!1},{title:"Docs",icon:ec,onClick:()=>window.open("https://docs.chartdb.io","_blank"),active:!1}],[]);return t.jsxs(Yo,{side:"left",collapsible:"icon-extended",variant:"sidebar",className:"relative h-full",children:[r?null:t.jsx(Qo,{children:t.jsx("a",{href:"https://chartdb.io",className:"cursor-pointer",rel:"noreferrer",children:t.jsx("img",{src:o==="light"?Ul:Wl,alt:"chartDB",className:"h-4 max-w-fit"})})}),t.jsx(Jo,{children:t.jsx(ei,{children:t.jsxs(ti,{children:[t.jsx(An,{children:p.map(x=>t.jsx(On,{children:t.jsx(Ln,{className:"justify-center space-y-0.5 !px-0 hover:bg-gray-200 data-[active=true]:bg-gray-100 data-[active=true]:text-pink-600 data-[active=true]:hover:bg-pink-100 dark:hover:bg-gray-800 dark:data-[active=true]:bg-gray-900 dark:data-[active=true]:text-pink-400 dark:data-[active=true]:hover:bg-pink-950",isActive:x.active,asChild:!0,children:t.jsxs("button",{onClick:x.onClick,children:[t.jsx(x.icon,{}),t.jsx("span",{children:x.title.split(" ").map((m,h)=>t.jsx("div",{children:m},h))})]})})},x.title))}),t.jsx(ut,{className:"my-2"}),t.jsx(An,{children:u.map(x=>t.jsx(On,{children:t.jsx(Ln,{className:"justify-center space-y-0.5 !px-0 hover:bg-gray-200 data-[active=true]:bg-gray-100 data-[active=true]:text-pink-600 data-[active=true]:hover:bg-pink-100 dark:hover:bg-gray-800 dark:data-[active=true]:bg-gray-900 dark:data-[active=true]:text-pink-400 dark:data-[active=true]:hover:bg-pink-950",isActive:x.active,asChild:!0,children:t.jsxs("button",{onClick:x.onClick,children:[t.jsx(x.icon,{}),t.jsx("span",{children:x.title.split(" ").map((m,h)=>t.jsx("div",{children:m},h))})]})})},x.title))})]})})}),t.jsx(Zo,{children:t.jsx(An,{children:g.map(x=>t.jsxs(On,{children:[x.badge&&t.jsx("span",{className:"absolute -right-1 -top-1 rounded-full bg-pink-500 px-[3px] py-px text-[8px] font-semibold text-white",children:x.badge}),t.jsx(Ln,{className:"justify-center space-y-0.5 !px-0 hover:bg-gray-200 data-[active=true]:bg-gray-100 data-[active=true]:text-pink-600 data-[active=true]:hover:bg-pink-100 dark:hover:bg-gray-800 dark:data-[active=true]:bg-gray-900 dark:data-[active=true]:text-pink-400 dark:data-[active=true]:hover:bg-pink-950",isActive:x.active,asChild:!0,children:t.jsxs("button",{onClick:x.onClick,children:[t.jsx(x.icon,{}),t.jsx("span",{children:x.title})]})})]},x.title))})})]})},wm=()=>{const{diagramName:e,updateDiagramName:n,currentDiagram:s}=Q(),{t:a}=J(),[r,o]=l.useState(!1),[i,c]=I.useState(e),d=I.useRef(null),{openOpenDiagramDialog:f}=Rt();l.useEffect(()=>{c(e)},[e]);const p=l.useCallback(()=>{r&&(i.trim()&&n(i.trim()),o(!1))},[i,n,r]);un(d,p),st("Enter",p);const u=g=>{g.stopPropagation(),o(!0)};return t.jsx("div",{className:"group",children:t.jsxs("div",{className:D("flex flex-1 flex-row items-center justify-center px-2 py-1 whitespace-nowrap",{"text-editable":!r}),children:[t.jsx($l,{databaseType:s.databaseType,databaseEdition:s.databaseEdition,onClick:g=>{g.stopPropagation(),f({canClose:!0})}}),t.jsx("div",{className:"flex flex-row items-center gap-1",children:r?t.jsxs(t.Fragment,{children:[t.jsx(re,{ref:d,autoFocus:!0,type:"text",placeholder:e,value:i,onClick:g=>g.stopPropagation(),onChange:g=>c(g.target.value),className:"ml-1 h-7 focus-visible:ring-0"}),t.jsx(Y,{variant:"ghost",className:"flex size-7 p-2 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300",onClick:p,children:t.jsx(Tt,{})})]}):t.jsx(t.Fragment,{children:t.jsxs(le,{children:[t.jsx(ce,{asChild:!0,children:t.jsx("h1",{className:D(Nl(),"group-hover:underline"),onDoubleClick:g=>{u(g)},children:e})}),t.jsx(de,{children:a("tool_tips.double_click_to_edit")})]})})})]})})},ym=()=>{const{t:e,i18n:n}=J(),[s,a]=l.useState(!1),r=Vi.map(c=>({label:c.nativeName,value:c.code,description:`(${c.name})`})),o=l.useCallback(c=>{n.changeLanguage(c),a(!1)},[n]),i=l.useMemo(()=>{var c;return(c=n.languages.map(d=>r.find(f=>f.value===d)).find(d=>d!==void 0))==null?void 0:c.value},[n,r]);return t.jsxs(Bt,{open:s,onOpenChange:a,children:[t.jsxs(le,{children:[t.jsx(ce,{asChild:!0,children:t.jsx(Vt,{asChild:!0,children:t.jsxs("div",{className:D(Cl({variant:"outline",size:"icon"}),"size-6 rounded-full md:size-8 cursor-pointer"),children:[t.jsx(hc,{className:"size-3.5 md:size-4"}),t.jsx("span",{className:"sr-only",children:"Change language"})]})})}),t.jsx(de,{children:e("language_select.change_language")})]}),t.jsx(xt,{className:"w-56",children:t.jsx("div",{className:"p-2",children:t.jsx(Pn,{className:"flex h-8 min-h-8 w-full",options:r,value:i,onChange:o})})})]})};var Zn="Menubar",[Cs,Ap,Op]=Na(Zn),[ni,jm]=Is(Zn,[Op,Ma]),be=Ts(),si=Ma(),[Lp,Gs]=ni(Zn),ai=l.forwardRef((e,n)=>{const{__scopeMenubar:s,value:a,onValueChange:r,defaultValue:o,loop:i=!0,dir:c,...d}=e,f=ja(c),p=si(s),[u="",g]=nn({prop:a,onChange:r,defaultProp:o}),[x,m]=l.useState(null);return t.jsx(Lp,{scope:s,value:u,onMenuOpen:l.useCallback(h=>{g(h),m(h)},[g]),onMenuClose:l.useCallback(()=>g(""),[g]),onMenuToggle:l.useCallback(h=>{g(v=>v?"":h),m(h)},[g]),dir:f,loop:i,children:t.jsx(Cs.Provider,{scope:s,children:t.jsx(Cs.Slot,{scope:s,children:t.jsx(vl,{asChild:!0,...p,orientation:"horizontal",loop:i,dir:f,currentTabStopId:x,onCurrentTabStopIdChange:m,children:t.jsx(ve.div,{role:"menubar",...d,ref:n})})})})})});ai.displayName=Zn;var Us="MenubarMenu",[Pp,ri]=ni(Us),oi=e=>{const{__scopeMenubar:n,value:s,...a}=e,r=tt(),o=s||r||"LEGACY_REACT_AUTO_VALUE",i=Gs(Us,n),c=be(n),d=l.useRef(null),f=l.useRef(!1),p=i.value===o;return l.useEffect(()=>{p||(f.current=!1)},[p]),t.jsx(Pp,{scope:n,value:o,triggerId:tt(),triggerRef:d,contentId:tt(),wasKeyboardTriggerOpenRef:f,children:t.jsx($a,{...c,open:p,onOpenChange:u=>{u||i.onMenuClose()},modal:!1,dir:i.dir,...a})})};oi.displayName=Us;var Ss="MenubarTrigger",ii=l.forwardRef((e,n)=>{const{__scopeMenubar:s,disabled:a=!1,...r}=e,o=si(s),i=be(s),c=Gs(Ss,s),d=ri(Ss,s),f=l.useRef(null),p=Le(n,f,d.triggerRef),[u,g]=l.useState(!1),x=c.value===d.value;return t.jsx(Cs.ItemSlot,{scope:s,value:d.value,disabled:a,children:t.jsx(wl,{asChild:!0,...o,focusable:!a,tabStopId:d.value,children:t.jsx(za,{asChild:!0,...i,children:t.jsx(ve.button,{type:"button",role:"menuitem",id:d.triggerId,"aria-haspopup":"menu","aria-expanded":x,"aria-controls":x?d.contentId:void 0,"data-highlighted":u?"":void 0,"data-state":x?"open":"closed","data-disabled":a?"":void 0,disabled:a,...r,ref:p,onPointerDown:X(e.onPointerDown,m=>{!a&&m.button===0&&m.ctrlKey===!1&&(c.onMenuOpen(d.value),x||m.preventDefault())}),onPointerEnter:X(e.onPointerEnter,()=>{var h;!!c.value&&!x&&(c.onMenuOpen(d.value),(h=f.current)==null||h.focus())}),onKeyDown:X(e.onKeyDown,m=>{a||(["Enter"," "].includes(m.key)&&c.onMenuToggle(d.value),m.key==="ArrowDown"&&c.onMenuOpen(d.value),["Enter"," ","ArrowDown"].includes(m.key)&&(d.wasKeyboardTriggerOpenRef.current=!0,m.preventDefault()))}),onFocus:X(e.onFocus,()=>g(!0)),onBlur:X(e.onBlur,()=>g(!1))})})})})});ii.displayName=Ss;var $p="MenubarPortal",li=e=>{const{__scopeMenubar:n,...s}=e,a=be(n);return t.jsx(Fa,{...a,...s})};li.displayName=$p;var _s="MenubarContent",ci=l.forwardRef((e,n)=>{const{__scopeMenubar:s,align:a="start",...r}=e,o=be(s),i=Gs(_s,s),c=ri(_s,s),d=Ap(s),f=l.useRef(!1);return t.jsx(Ba,{id:c.contentId,"aria-labelledby":c.triggerId,"data-radix-menubar-content":"",...o,...r,ref:n,align:a,onCloseAutoFocus:X(e.onCloseAutoFocus,p=>{var g;!!!i.value&&!f.current&&((g=c.triggerRef.current)==null||g.focus()),f.current=!1,p.preventDefault()}),onFocusOutside:X(e.onFocusOutside,p=>{const u=p.target;d().some(x=>{var m;return(m=x.ref.current)==null?void 0:m.contains(u)})&&p.preventDefault()}),onInteractOutside:X(e.onInteractOutside,()=>{f.current=!0}),onEntryFocus:p=>{c.wasKeyboardTriggerOpenRef.current||p.preventDefault()},onKeyDown:X(e.onKeyDown,p=>{if(["ArrowRight","ArrowLeft"].includes(p.key)){const u=p.target,g=u.hasAttribute("data-radix-menubar-subtrigger"),x=u.closest("[data-radix-menubar-content]")!==p.currentTarget,h=(i.dir==="rtl"?"ArrowRight":"ArrowLeft")===p.key;if(!h&&g||x&&h)return;let b=d().filter(j=>!j.disabled).map(j=>j.value);h&&b.reverse();const w=b.indexOf(c.value);b=i.loop?em(b,w+1):b.slice(w+1);const[y]=b;y&&i.onMenuOpen(y)}},{checkForDefaultPrevented:!1}),style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});ci.displayName=_s;var zp="MenubarGroup",Fp=l.forwardRef((e,n)=>{const{__scopeMenubar:s,...a}=e,r=be(s);return t.jsx(Va,{...r,...a,ref:n})});Fp.displayName=zp;var Bp="MenubarLabel",di=l.forwardRef((e,n)=>{const{__scopeMenubar:s,...a}=e,r=be(s);return t.jsx(Ka,{...r,...a,ref:n})});di.displayName=Bp;var Vp="MenubarItem",ui=l.forwardRef((e,n)=>{const{__scopeMenubar:s,...a}=e,r=be(s);return t.jsx(Ga,{...r,...a,ref:n})});ui.displayName=Vp;var Kp="MenubarCheckboxItem",fi=l.forwardRef((e,n)=>{const{__scopeMenubar:s,...a}=e,r=be(s);return t.jsx(Ua,{...r,...a,ref:n})});fi.displayName=Kp;var Hp="MenubarRadioGroup",Gp=l.forwardRef((e,n)=>{const{__scopeMenubar:s,...a}=e,r=be(s);return t.jsx(Wa,{...r,...a,ref:n})});Gp.displayName=Hp;var Up="MenubarRadioItem",pi=l.forwardRef((e,n)=>{const{__scopeMenubar:s,...a}=e,r=be(s);return t.jsx(qa,{...r,...a,ref:n})});pi.displayName=Up;var Wp="MenubarItemIndicator",mi=l.forwardRef((e,n)=>{const{__scopeMenubar:s,...a}=e,r=be(s);return t.jsx(Xa,{...r,...a,ref:n})});mi.displayName=Wp;var qp="MenubarSeparator",hi=l.forwardRef((e,n)=>{const{__scopeMenubar:s,...a}=e,r=be(s);return t.jsx(Ha,{...r,...a,ref:n})});hi.displayName=qp;var Xp="MenubarArrow",Yp=l.forwardRef((e,n)=>{const{__scopeMenubar:s,...a}=e,r=be(s);return t.jsx(Ya,{...r,...a,ref:n})});Yp.displayName=Xp;var Qp="MenubarSub",xi=e=>{const{__scopeMenubar:n,children:s,open:a,onOpenChange:r,defaultOpen:o}=e,i=be(n),[c=!1,d]=nn({prop:a,defaultProp:o,onChange:r});return t.jsx(Kl,{...i,open:c,onOpenChange:d,children:s})};xi.displayName=Qp;var Zp="MenubarSubTrigger",gi=l.forwardRef((e,n)=>{const{__scopeMenubar:s,...a}=e,r=be(s);return t.jsx(Qa,{"data-radix-menubar-subtrigger":"",...r,...a,ref:n})});gi.displayName=Zp;var Jp="MenubarSubContent",bi=l.forwardRef((e,n)=>{const{__scopeMenubar:s,...a}=e,r=be(s);return t.jsx(Za,{...r,"data-radix-menubar-content":"",...a,ref:n,style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});bi.displayName=Jp;function em(e,n){return e.map((s,a)=>e[(n+a)%e.length])}var vi=ai,tm=oi,wi=ii,nm=li,yi=ci,ji=di,Ni=ui,Ci=fi,Si=pi,_i=mi,Ii=hi,sm=xi,ki=gi,Mi=bi;const Xt=tm,Yt=sm,Ri=I.forwardRef(({className:e,...n},s)=>t.jsx(vi,{ref:s,className:D("flex h-9 items-center space-x-1 rounded-md border bg-background p-1 shadow-sm",e),...n}));Ri.displayName=vi.displayName;const Ct=I.forwardRef(({className:e,...n},s)=>t.jsx(wi,{ref:s,className:D("flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e),...n}));Ct.displayName=wi.displayName;const St=I.forwardRef(({className:e,inset:n,children:s,...a},r)=>t.jsxs(ki,{ref:r,className:D("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",n&&"pl-8",e),...a,children:[s,t.jsx(Ca,{className:"ml-auto size-4"})]}));St.displayName=ki.displayName;const _t=I.forwardRef(({className:e,...n},s)=>t.jsx(Mi,{ref:s,className:D("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));_t.displayName=Mi.displayName;const It=I.forwardRef(({className:e,align:n="start",alignOffset:s=-4,sideOffset:a=8,...r},o)=>t.jsx(nm,{children:t.jsx(yi,{ref:o,align:n,alignOffset:s,sideOffset:a,className:D("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));It.displayName=yi.displayName;const G=I.forwardRef(({className:e,inset:n,...s},a)=>t.jsx(Ni,{ref:a,className:D("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",e),...s}));G.displayName=Ni.displayName;const kt=I.forwardRef(({className:e,children:n,checked:s,...a},r)=>t.jsxs(Ci,{ref:r,className:D("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...a,children:[t.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:t.jsx(_i,{children:t.jsx(ks,{className:"size-4"})})}),n]}));kt.displayName=Ci.displayName;const am=I.forwardRef(({className:e,children:n,...s},a)=>t.jsxs(Si,{ref:a,className:D("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[t.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:t.jsx(_i,{children:t.jsx(Sa,{className:"size-4 fill-current"})})}),n]}));am.displayName=Si.displayName;const rm=I.forwardRef(({className:e,inset:n,...s},a)=>t.jsx(ji,{ref:a,className:D("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",e),...s}));rm.displayName=ji.displayName;const Fe=I.forwardRef(({className:e,...n},s)=>t.jsx(Ii,{ref:s,className:D("-mx-1 my-1 h-px bg-muted",e),...n}));Fe.displayName=Ii.displayName;const Re=({className:e,...n})=>t.jsx("span",{className:D("ml-auto text-xs tracking-widest text-muted-foreground",e),...n});Re.displayname="MenubarShortcut";const Nm=()=>{const{clearDiagramData:e,deleteDiagram:n,updateDiagramUpdatedAt:s,databaseType:a,dependencies:r}=Q(),{openCreateDiagramDialog:o,openOpenDiagramDialog:i,openExportSQLDialog:c,openImportDatabaseDialog:d,openExportImageDialog:f,openExportDiagramDialog:p,openImportDiagramDialog:u,openImportDBMLDialog:g}=Rt(),{showAlert:x}=yl(),{setTheme:m,theme:h}=Hn(),{hideSidePanel:v,isSidePanelShowed:N,showSidePanel:b}=ge(),{scrollAction:w,setScrollAction:y,setShowCardinality:j,showCardinality:C,setShowFieldAttributes:S,showFieldAttributes:M,setShowDependenciesOnCanvas:k,showDependenciesOnCanvas:L,setShowMiniMapOnCanvas:E,showMiniMapOnCanvas:T}=Hl(),{t:_}=J(),{redo:H,undo:W,hasRedo:z,hasUndo:O}=jl(),{exportImage:A}=zl(),F=Ki(),he=l.useCallback(()=>{n(),F("/")},[n,F]),ye=()=>{o()},ee=()=>{i()},se=l.useCallback(()=>{A("svg",{scale:1,transparent:!0,includePatternBG:!1})},[A]),te=l.useCallback(()=>{f({format:"png"})},[f]),je=l.useCallback(()=>{f({format:"jpeg"})},[f]),ne=l.useCallback(()=>{window.open("https://docs.chartdb.io","_blank")},[]),$=l.useCallback(()=>{window.open("https://discord.gg/QeFwyWSKwC","_blank")},[]),V=l.useCallback(Ce=>{if(Ce===U.GENERIC){c({targetDatabaseType:U.GENERIC});return}c({targetDatabaseType:Ce})},[c]),B=l.useCallback(()=>{N?v():b()},[N,b,v]),R=l.useCallback(()=>{j(!C)},[C,j]),K=l.useCallback(()=>{S(!M)},[M,S]),P=l.useCallback(()=>{k(!L)},[L,k]),ae=l.useCallback(()=>{E(!T)},[T,E]),Z="✨";return t.jsxs(Ri,{className:"h-8 border-none py-2 shadow-none md:h-10 md:py-0",children:[t.jsxs(Xt,{children:[t.jsx(Ct,{children:_("menu.databases.databases")}),t.jsxs(It,{children:[t.jsx(G,{onClick:ye,children:_("menu.databases.new")}),t.jsxs(G,{onClick:ee,children:[_("menu.databases.browse"),t.jsx(Re,{children:jt[Nt.OPEN_DIAGRAM].keyCombinationLabel})]}),t.jsxs(G,{onClick:s,children:[_("menu.databases.save"),t.jsx(Re,{children:jt[Nt.SAVE_DIAGRAM].keyCombinationLabel})]}),t.jsx(Fe,{}),t.jsxs(Yt,{children:[t.jsx(St,{children:_("menu.databases.import")}),t.jsxs(_t,{children:[t.jsx(G,{onClick:u,children:".json"}),t.jsx(G,{onClick:()=>g(),children:".dbml"}),t.jsx(Fe,{}),t.jsx(G,{onClick:()=>d({databaseType:U.POSTGRESQL}),children:ke.postgresql}),t.jsx(G,{onClick:()=>d({databaseType:U.MYSQL}),children:ke.mysql}),t.jsx(G,{onClick:()=>d({databaseType:U.SQL_SERVER}),children:ke.sql_server}),t.jsx(G,{onClick:()=>d({databaseType:U.MARIADB}),children:ke.mariadb}),t.jsx(G,{onClick:()=>d({databaseType:U.SQLITE}),children:ke.sqlite}),t.jsx(G,{onClick:()=>d({databaseType:U.ORACLE}),children:ke.oracle})]})]}),t.jsx(Fe,{}),t.jsxs(Yt,{children:[t.jsx(St,{children:_("menu.databases.export_sql")}),t.jsxs(_t,{children:[a===U.GENERIC?t.jsx(G,{onClick:()=>V(U.GENERIC),children:ke.generic}):null,a!==U.GENERIC?t.jsx(G,{onClick:()=>V(a),children:ke[a]}):null,a!==U.POSTGRESQL?t.jsxs(G,{onClick:()=>V(U.POSTGRESQL),children:[ke.postgresql,t.jsx(Re,{className:"text-base",children:Z})]}):null,a!==U.MYSQL?t.jsxs(G,{onClick:()=>V(U.MYSQL),children:[ke.mysql,t.jsx(Re,{className:"text-base",children:Z})]}):null,a!==U.SQL_SERVER?t.jsxs(G,{onClick:()=>V(U.SQL_SERVER),children:[ke.sql_server,t.jsx(Re,{className:"text-base",children:Z})]}):null,a!==U.MARIADB?t.jsxs(G,{onClick:()=>V(U.MARIADB),children:[ke.mariadb,t.jsx(Re,{className:"text-base",children:Z})]}):null,a!==U.SQLITE?t.jsxs(G,{onClick:()=>V(U.SQLITE),children:[ke.sqlite,t.jsx(Re,{className:"text-base",children:Z})]}):null]})]}),t.jsxs(Yt,{children:[t.jsx(St,{children:_("menu.databases.export_as")}),t.jsxs(_t,{children:[t.jsx(G,{onClick:te,children:"PNG"}),t.jsx(G,{onClick:je,children:"JPG"}),t.jsx(G,{onClick:se,children:"SVG"}),t.jsx(Fe,{}),t.jsx(G,{onClick:p,children:"JSON"})]})]}),t.jsx(Fe,{}),t.jsx(G,{onClick:()=>x({title:_("delete_diagram_alert.title"),description:_("delete_diagram_alert.description"),actionLabel:_("delete_diagram_alert.delete"),closeLabel:_("delete_diagram_alert.cancel"),onAction:he}),children:_("menu.databases.delete_diagram")})]})]}),t.jsxs(Xt,{children:[t.jsx(Ct,{children:_("menu.edit.edit")}),t.jsxs(It,{children:[t.jsxs(G,{onClick:W,disabled:!O,children:[_("menu.edit.undo"),t.jsx(Re,{children:jt[Nt.UNDO].keyCombinationLabel})]}),t.jsxs(G,{onClick:H,disabled:!z,children:[_("menu.edit.redo"),t.jsx(Re,{children:jt[Nt.REDO].keyCombinationLabel})]}),t.jsx(Fe,{}),t.jsx(G,{onClick:()=>x({title:_("clear_diagram_alert.title"),description:_("clear_diagram_alert.description"),actionLabel:_("clear_diagram_alert.clear"),closeLabel:_("clear_diagram_alert.cancel"),onAction:e}),children:_("menu.edit.clear")})]})]}),t.jsxs(Xt,{children:[t.jsx(Ct,{children:_("menu.view.view")}),t.jsxs(It,{children:[t.jsxs(G,{onClick:B,children:[_(N?"menu.view.hide_sidebar":"menu.view.show_sidebar"),t.jsx(Re,{children:jt[Nt.TOGGLE_SIDE_PANEL].keyCombinationLabel})]}),t.jsx(Fe,{}),t.jsx(G,{onClick:R,children:_(C?"menu.view.hide_cardinality":"menu.view.show_cardinality")}),t.jsx(G,{onClick:K,children:_(M?"menu.view.hide_field_attributes":"menu.view.show_field_attributes")}),a!==U.CLICKHOUSE&&r&&r.length>0?t.jsx(G,{onClick:P,children:_(L?"menu.view.hide_dependencies":"menu.view.show_dependencies")}):null,t.jsx(G,{onClick:ae,children:_(T?"menu.view.hide_minimap":"menu.view.show_minimap")}),t.jsx(Fe,{}),t.jsxs(Yt,{children:[t.jsx(St,{children:_("menu.view.zoom_on_scroll")}),t.jsxs(_t,{children:[t.jsx(kt,{checked:w==="zoom",onClick:()=>y("zoom"),children:_("zoom.on")}),t.jsx(kt,{checked:w==="pan",onClick:()=>y("pan"),children:_("zoom.off")})]})]}),t.jsx(Fe,{}),t.jsxs(Yt,{children:[t.jsxs(St,{className:"flex items-center gap-1",children:[t.jsx("span",{children:_("menu.view.theme")}),t.jsx("div",{className:"flex-1"}),t.jsx(Re,{children:jt[Nt.TOGGLE_THEME].keyCombinationLabel})]}),t.jsxs(_t,{children:[t.jsx(kt,{checked:h==="system",onClick:()=>m("system"),children:_("theme.system")}),t.jsx(kt,{checked:h==="light",onClick:()=>m("light"),children:_("theme.light")}),t.jsx(kt,{checked:h==="dark",onClick:()=>m("dark"),children:_("theme.dark")})]})]})]})]}),t.jsxs(Xt,{children:[t.jsx(Ct,{children:_("menu.backup.backup")}),t.jsxs(It,{children:[t.jsx(G,{onClick:p,children:_("menu.backup.export_diagram")}),t.jsx(G,{onClick:u,children:_("menu.backup.restore_diagram")})]})]}),t.jsxs(Xt,{children:[t.jsx(Ct,{children:_("menu.help.help")}),t.jsxs(It,{children:[t.jsx(G,{onClick:ne,children:_("menu.help.docs_website")}),t.jsx(G,{onClick:$,children:_("menu.help.join_discord")})]})]})]})};export{wm as D,vm as E,ym as L,Nm as M,vp as S,bm as a,Qn as u};
