import{r as c,j as o,T as O,e as A,f as L,_ as i,b as S}from"./index-erRrosO1.js";import{b as P,c as v,d as I}from"./code-editor-iDtN62Sg.js";import{M as N,D as k,L as R,S as z,E as C,a as M}from"./menu-BrV6Qm2-.js";import{C as V}from"./canvas-DbZZ0cKa.js";import{c as U,e as B,u as H}from"./canvas-utils-DduuDUb8.js";import{u as $,C as G,a as W}from"./databases-DiL8jvE9.js";import{B as Z}from"./badge-KJycx4YO.js";import{a as F}from"./theme-provider-Duo_jK4a.js";import"./label-BqRU9iC8.js";import"./storage-provider-CmL0TSjO.js";import"./use-storage-BV5ljb6r.js";import"./database-type-DzFzzfY6.js";import"./env-BesmyxWN.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Y=F("save",K);var q=["second","minute","hour","day","week","month","year"];function J(e,t){if(t===0)return["just now","right now"];var r=q[Math.floor(t/2)];return e>1&&(r+="s"),[e+" "+r+" ago","in "+e+" "+r]}var Q=["秒","分钟","小时","天","周","个月","年"];function X(e,t){if(t===0)return["刚刚","片刻后"];var r=Q[~~(t/2)];return[e+" "+r+"前",e+" "+r+"后"]}var _={},p=function(e,t){_[e]=t},y=function(e){return _[e]||_.en_US},l=[60,60,24,7,365/7/12,12];function g(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}function b(e,t){var r=e<0?1:0;e=Math.abs(e);for(var a=e,n=0;e>=l[n]&&n<l.length;n++)e/=l[n];return e=Math.floor(e),n*=2,e>(n===0?9:1)&&(n+=1),t(e,n,a)[r].replace("%s",e.toString())}function w(e,t){var r=t?g(t):new Date;return(+r-+g(e))/1e3}function ee(e){for(var t=1,r=0,a=Math.abs(e);e>=l[r]&&r<l.length;r++)e/=l[r],t*=l[r];return a=a%t,a=a?t-a:t,Math.ceil(a)}var te=function(e,t,r){var a=w(e,r&&r.relativeDate);return b(a,y(t))},j="timeago-id";function ae(e){return e.getAttribute("datetime")}function re(e,t){e.setAttribute(j,t)}function T(e){return parseInt(e.getAttribute(j))}var h={},f=function(e){clearTimeout(e),delete h[e]};function E(e,t,r,a){f(T(e));var n=a.relativeDate,s=a.minInterval,u=w(t,n);e.innerText=b(u,r);var d=setTimeout(function(){E(e,t,r,a)},Math.min(Math.max(ee(u),s||1)*1e3,2147483647));h[d]=0,re(e,d)}function x(e){e?f(T(e)):Object.keys(h).forEach(f)}function ne(e,t,r){var a=e.length?e:[e];return a.forEach(function(n){E(n,ae(n),y(t),r||{})}),a}p("en_US",J);p("zh_CN",X);var oe=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var s in n)n.hasOwnProperty(s)&&(a[s]=n[s])},e(t,r)};return function(t,r){e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),m=function(){return m=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},m.apply(this,arguments)},ie=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r},se=function(e){return""+(e instanceof Date?e.getTime():e)},ue=function(e){oe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.dom=null,r}return t.prototype.componentDidMount=function(){this.renderTimeAgo()},t.prototype.componentDidUpdate=function(){this.renderTimeAgo()},t.prototype.renderTimeAgo=function(){var r=this.props,a=r.live,n=r.datetime,s=r.locale,u=r.opts;x(this.dom),a!==!1&&(this.dom.setAttribute("datetime",se(n)),ne(this.dom,s,u))},t.prototype.componentWillUnmount=function(){x(this.dom)},t.prototype.render=function(){var r=this,a=this.props,n=a.datetime;a.live;var s=a.locale,u=a.opts,d=ie(a,["datetime","live","locale","opts"]);return c.createElement("time",m({ref:function(D){r.dom=D}},d),te(n,s,u))},t.defaultProps={live:!0,className:""},t}(c.PureComponent);const le=async e=>{let t,r;switch(e){case"es":t=(await i(async()=>{const{default:a}=await import("./es-CwHy4vRY.js").then(n=>n.e);return{default:a}},[])).default,r="es";break;case"fr":t=(await i(async()=>{const{default:a}=await import("./fr-B5EyHKn9.js").then(n=>n.f);return{default:a}},[])).default,r="fr";break;case"de":t=(await i(async()=>{const{default:a}=await import("./de-CgE-SmEY.js").then(n=>n.d);return{default:a}},[])).default,r="de";break;case"hi":t=(await i(async()=>{const{default:a}=await import("./hi_IN-BgYk_6Tq.js").then(n=>n.h);return{default:a}},[])).default,r="hi_IN";break;case"ja":t=(await i(async()=>{const{default:a}=await import("./ja-Dcpruwcl.js").then(n=>n.j);return{default:a}},[])).default,r="ja";break;case"ko_KR":t=(await i(async()=>{const{default:a}=await import("./ko-CDLnF5OP.js").then(n=>n.k);return{default:a}},[])).default,r="ko";break;case"ru":t=(await i(async()=>{const{default:a}=await import("./ru-BQXwnNcW.js").then(n=>n.r);return{default:a}},[])).default,r="ru";break;case"zh_CN":t=(await i(async()=>{const{default:a}=await import("./zh_CN-D9rcKTH4.js").then(n=>n.z);return{default:a}},[])).default,r="zh_CN";break;case"zh_TW":t=(await i(async()=>{const{default:a}=await import("./zh_TW-BQQtW3fC.js").then(n=>n.z);return{default:a}},[])).default,r="zh_TW";break;case"pt_BR":t=(await i(async()=>{const{default:a}=await import("./pt_BR-id_jqCUF.js").then(n=>n.p);return{default:a}},[])).default,r="pt_BR";break;case"bn":t=(await i(async()=>{const{default:a}=await import("./bn_IN-CiT_Op5m.js").then(n=>n.b);return{default:a}},[])).default,r="bn";break;default:t=(await i(async()=>{const{default:a}=await import("./en_US-BdsvjnLJ.js").then(n=>n.e);return{default:a}},[])).default,r="en_US";break}return{locale:t,lang:r}},ce=()=>{const{currentDiagram:e}=U(),{i18n:t}=B(),[r,a]=c.useState("en_US");return c.useEffect(()=>{(async()=>{const{locale:s,lang:u}=await le(t.language);p(t.language,s),a(u)})()},[t.language]),o.jsxs(O,{children:[o.jsx(A,{children:o.jsxs(Z,{variant:"secondary",className:"flex gap-1.5 whitespace-nowrap",children:[o.jsx(Y,{size:16}),o.jsx(ue,{datetime:e.updatedAt,locale:r})]})}),o.jsx(L,{children:e.updatedAt.toLocaleString()})]})},de=()=>{const{effectiveTheme:e}=$(),t=c.useCallback(()=>o.jsx("iframe",{src:"https://ghbtns.com/github-btn.html?user=chartdb&repo=chartdb&type=star&size=large&text=false",width:"40",height:"30",title:"GitHub"}),[]);return o.jsxs("nav",{className:"flex flex-col justify-between border-b px-3 md:h-12 md:flex-row md:items-center md:px-4",children:[o.jsxs("div",{className:"flex flex-1 flex-col justify-between gap-x-1 md:flex-row md:justify-normal",children:[o.jsx("div",{className:"flex items-center justify-between pt-[8px] font-primary md:py-[10px]",children:o.jsx("a",{href:"https://chartdb.io",className:"cursor-pointer",rel:"noreferrer",children:o.jsx("img",{src:e==="light"?G:W,alt:"chartDB",className:"h-4 max-w-fit"})})}),o.jsx(N,{})]}),o.jsx(k,{}),o.jsxs("div",{className:"hidden flex-1 items-center justify-end gap-2 sm:flex",children:[o.jsx(ce,{}),t(),o.jsx(R,{})]})]})},Ee=({initialDiagram:e})=>{const{isSidePanelShowed:t}=H();return o.jsxs(o.Fragment,{children:[o.jsx(de,{}),o.jsxs(z,{defaultOpen:!1,open:!1,className:"h-full min-h-0",children:[o.jsx(C,{}),o.jsxs(P,{direction:"horizontal",children:[o.jsx(v,{defaultSize:25,minSize:25,maxSize:t?99:0,className:S("transition-[flex-grow] duration-200",{"min-w-[350px]":t}),children:o.jsx(M,{})}),o.jsx(I,{disabled:!t,className:t?"":"hidden"}),o.jsx(v,{defaultSize:75,children:o.jsx(V,{initialTables:(e==null?void 0:e.tables)??[]})})]})]})]})};export{Ee as EditorDesktopLayout,Ee as default};
